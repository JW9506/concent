# concent [C_C]
<p align="center">
  <a href="#">
    <img width="500" src="https://raw.githubusercontent.com/fantasticsoul/static/master/img/cc/banner.png">
  </a>
</p>

<p>
<a href='https://www.npmjs.com/package/concent' style='margin: 0 0.5rem;'>
<img src='data:image/svg+xml;base64,PHN2ZyBjb250ZW50U2NyaXB0VHlwZT0idGV4dC9lY21hc2NyaXB0IiB3aWR0aD0iMTM2IgogICAg%0D%0AIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB6b29tQW5kUGFuPSJt%0D%0AYWduaWZ5IgogICAgIGNvbnRlbnRTdHlsZVR5cGU9InRleHQvY3NzIiBoZWlnaHQ9IjIwIiBwcmVz%0D%0AZXJ2ZUFzcGVjdFJhdGlvPSJ4TWlkWU1pZCBtZWV0IgogICAgIHhtbG5zPSJodHRwOi8vd3d3Lncz%0D%0ALm9yZy8yMDAwL3N2ZyIgdmVyc2lvbj0iMS4wIj4KCgogICAgPGxpbmVhckdyYWRpZW50IHhtbG5z%0D%0AOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4Mj0iMCIgeTI9IjEwMCUiCiAg%0D%0AICAgICAgICAgICAgICAgICAgeGxpbms6dHlwZT0ic2ltcGxlIiB4bGluazphY3R1YXRlPSJvbkxv%0D%0AYWQiIGlkPSJhIgogICAgICAgICAgICAgICAgICAgIHhsaW5rOnNob3c9Im90aGVyIj4KICAgICAg%0D%0AICA8c3RvcCBzdG9wLW9wYWNpdHk9Ii4xIiBzdG9wLWNvbG9yPSIjYmJiIiBvZmZzZXQ9IjAiLz4K%0D%0AICAgICAgICA8c3RvcCBzdG9wLW9wYWNpdHk9Ii4xIiBvZmZzZXQ9IjEiLz4KICAgIDwvbGluZWFy%0D%0AR3JhZGllbnQ+CgogICAgPHJlY3Qgcng9IjMiIGZpbGw9IiM1NTUiIHdpZHRoPSIxMzYiIGhlaWdo%0D%0AdD0iMjAiIGNsYXNzPSJzV2lkdGgiLz4KICAgIDxyZWN0IHJ4PSIzIiBmaWxsPSIjNGMxIiB3aWR0%0D%0AaD0iNDkiIHg9Ijg3IiBoZWlnaHQ9IjIwIiBjbGFzcz0idldpZHRoIHRNb3ZlIi8+CiAgICA8cmVj%0D%0AdCBmaWxsPSIjNGMxIiB4PSI4NyIgd2lkdGg9IjEzIiBoZWlnaHQ9IjIwIiBjbGFzcz0idE1vdmUi%0D%0ALz4KICAgIDxyZWN0IHJ4PSIzIiBmaWxsPSJ1cmwoI2EpIiB3aWR0aD0iMTM2IiBoZWlnaHQ9IjIw%0D%0AIiBjbGFzcz0ic1dpZHRoIi8+CgogICAgPGcgZm9udC1zaXplPSIxMSIgZm9udC1mYW1pbHk9IkRl%0D%0AamFWdSBTYW5zLFZlcmRhbmEsR2VuZXZhLHNhbnMtc2VyaWYiCiAgICAgICBmaWxsPSIjZmZmIj4K%0D%0AICAgICAgICA8dGV4dCB4PSI2IiBmaWxsPSIjMDEwMTAxIiBmaWxsLW9wYWNpdHk9Ii4zIiB5PSIx%0D%0ANSI+CiAgICAgICAgICAgIG5wbSBwYWNrYWdlCiAgICAgICAgPC90ZXh0PgogICAgICAgIDx0ZXh0%0D%0AIHg9IjYiIGlkPSJ0VGV4dCIgeT0iMTQiPgogICAgICAgICAgICBucG0gcGFja2FnZQogICAgICAg%0D%0AIDwvdGV4dD4KICAgICAgICA8dGV4dCBmaWxsPSIjMDEwMTAxIiB4PSI5MiIgZmlsbC1vcGFjaXR5%0D%0APSIuMyIgeT0iMTUiIGNsYXNzPSJ0TW92ZSI+CiAgICAgICAgICAgIDEuMS44MgogICAgICAgIDwv%0D%0AdGV4dD4KICAgICAgICA8dGV4dCB4PSI5MiIgaWQ9InZUZXh0IiB5PSIxNCIgY2xhc3M9InRNb3Zl%0D%0AIj4KICAgICAgICAgICAgMS4xLjgyCiAgICAgICAgPC90ZXh0PgogICAgPC9nPgo8L3N2Zz4=' alt='npm version' height='18'>
</a>

<a href='#' style='margin: 0 0.5rem;'>
  <img src='data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5MCIgaGVpZ2h0%0D%0APSIyMCI+PGxpbmVhckdyYWRpZW50IGlkPSJhIiB4Mj0iMCIgeTI9IjEwMCUiPjxzdG9wIG9mZnNl%0D%0AdD0iMCIgc3RvcC1jb2xvcj0iI2JiYiIgc3RvcC1vcGFjaXR5PSIuMSIvPjxzdG9wIG9mZnNldD0i%0D%0AMSIgc3RvcC1vcGFjaXR5PSIuMSIvPjwvbGluZWFyR3JhZGllbnQ+PHJlY3Qgcng9IjMiIHdpZHRo%0D%0APSI5MCIgaGVpZ2h0PSIyMCIgZmlsbD0iIzU1NSIvPjxyZWN0IHJ4PSIzIiB4PSIzNyIgd2lkdGg9%0D%0AIjUzIiBoZWlnaHQ9IjIwIiBmaWxsPSIjNGMxIi8+PHBhdGggZmlsbD0iIzRjMSIgZD0iTTM3IDBo%0D%0ANHYyMGgtNHoiLz48cmVjdCByeD0iMyIgd2lkdGg9IjkwIiBoZWlnaHQ9IjIwIiBmaWxsPSJ1cmwo%0D%0AI2EpIi8+PGcgZmlsbD0iI2ZmZiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkRl%0D%0AamFWdSBTYW5zLFZlcmRhbmEsR2VuZXZhLHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiPjx0ZXh0%0D%0AIHg9IjE5LjUiIHk9IjE1IiBmaWxsPSIjMDEwMTAxIiBmaWxsLW9wYWNpdHk9Ii4zIj5idWlsZDwv%0D%0AdGV4dD48dGV4dCB4PSIxOS41IiB5PSIxNCI+YnVpbGQ8L3RleHQ+PHRleHQgeD0iNjIuNSIgeT0i%0D%0AMTUiIGZpbGw9IiMwMTAxMDEiIGZpbGwtb3BhY2l0eT0iLjMiPnBhc3Npbmc8L3RleHQ+PHRleHQg%0D%0AeD0iNjIuNSIgeT0iMTQiPnBhc3Npbmc8L3RleHQ+PC9nPjwvc3ZnPg==' alt='build:passing' height='18'>
</a>

<a href='#' style='margin: 0 0.5rem;'>
<img src='data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRw%0D%0AOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMTA4IiBoZWlnaHQ9IjIwIj48bGluZWFy%0D%0AR3JhZGllbnQgaWQ9ImIiIHgyPSIwIiB5Mj0iMTAwJSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNv%0D%0AbG9yPSIjYmJiIiBzdG9wLW9wYWNpdHk9Ii4xIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLW9wYWNp%0D%0AdHk9Ii4xIi8+PC9saW5lYXJHcmFkaWVudD48Y2xpcFBhdGggaWQ9ImEiPjxyZWN0IHdpZHRoPSIx%0D%0AMDgiIGhlaWdodD0iMjAiIHJ4PSIzIiBmaWxsPSIjZmZmIi8+PC9jbGlwUGF0aD48ZyBjbGlwLXBh%0D%0AdGg9InVybCgjYSkiPjxwYXRoIGZpbGw9IiM1NTUiIGQ9Ik0wIDBoNjl2MjBIMHoiLz48cGF0aCBm%0D%0AaWxsPSIjNGMxIiBkPSJNNjkgMGgzOXYyMEg2OXoiLz48cGF0aCBmaWxsPSJ1cmwoI2IpIiBkPSJN%0D%0AMCAwaDEwOHYyMEgweiIvPjwvZz48ZyBmaWxsPSIjZmZmIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBm%0D%0Ab250LWZhbWlseT0iRGVqYVZ1IFNhbnMsVmVyZGFuYSxHZW5ldmEsc2Fucy1zZXJpZiIgZm9udC1z%0D%0AaXplPSIxMTAiPiA8dGV4dCB4PSIzNTUiIHk9IjE1MCIgZmlsbD0iIzAxMDEwMSIgZmlsbC1vcGFj%0D%0AaXR5PSIuMyIgdHJhbnNmb3JtPSJzY2FsZSguMSkiIHRleHRMZW5ndGg9IjU5MCI+bGljZW5zZTwv%0D%0AdGV4dD48dGV4dCB4PSIzNTUiIHk9IjE0MCIgdHJhbnNmb3JtPSJzY2FsZSguMSkiIHRleHRMZW5n%0D%0AdGg9IjU5MCI+bGljZW5zZTwvdGV4dD48dGV4dCB4PSI4NzUiIHk9IjE1MCIgZmlsbD0iIzAxMDEw%0D%0AMSIgZmlsbC1vcGFjaXR5PSIuMyIgdHJhbnNmb3JtPSJzY2FsZSguMSkiIHRleHRMZW5ndGg9IjI5%0D%0AMCI+TUlUPC90ZXh0Pjx0ZXh0IHg9Ijg3NSIgeT0iMTQwIiB0cmFuc2Zvcm09InNjYWxlKC4xKSIg%0D%0AdGV4dExlbmd0aD0iMjkwIj5NSVQ8L3RleHQ+PC9nPiA8L3N2Zz4=' alt='license:MIT' height='18'>
  </img>
</a>

</p>
## concent是什么，（注：以下有的地方简称为cc）
concent是一个专为`react`提供状态管理服务的框架，重新定义`state`和`component`之间的关系，同时也为你的`react`组件提供更多有趣且强大的特性，保持渲染性能最优化，让你专注于业务代码编写😎，让你的`react`工程代码变得更加简约、优雅，并容易维护与扩展。

## ✨concent的特点
* 核心api少且简单，功能强大，上手容易，入侵小，容易调试；
* 提供全局模块化的单一数据源；
* 共享数据可直接注入到state，也可注入props，[点我查看](https://stackblitz.com/edit/concent-state-inject-way?file=index.js)。
* 修改共享数据的方式灵活多样且简单直接，[点我查看](https://stackblitz.com/edit/concent-state-modify-way)；
* 对组件扩展了事件总线、computed、watch、双向绑定等特性，[点我查看](https://stackblitz.com/edit/concent-vue-like-programming)；
* 内置与react16一样的使用方式但却更有趣的hook，[点我查看](https://stackblitz.com/edit/concent-hook?file=index.js)；
* 默认采用反向继承包裹你的组件，让react dom tree层级更少，保持干净和清爽；
* 基于引用定位和状态广播，支持细粒度的状态订阅，渲染效率出众，[点我查看](https://stackblitz.com/edit/concent-why-it-is-high-performance?file=index.js)；
* 支持中间件，可以扩展你的个性化插件处理数据变更，[点我查看](https://stackblitz.com/edit/concent-middleware?file=index.js)；
* 支持react 0.10+任意版本；
___
## 📦 快速开始
确保你本地机器上安装有[nodejs](http://nodejs.cn/download/)。
### 创建一个app
在你的电脑上，选择一个合适的目录并进入，使用[create-react-app](https://github.com/facebookincubator/create-react-app) 创建一个app
```sh
$ npm i -g create-react-app
$ create-react-app cc-app
```
### 安装cc
创建好app后，进入你的app根目录，使用npm安装`concent`
```sh
$ cd cc-app
$ npm i --save concent
```
或者使用yarn安装
```sh
$ yarn add concent
```
### counter示例
将以下代码复制粘贴到`cc-app`目录下的`src/App.js`文件里(注：是完全覆盖掉原来的内容)。
然后执行`npm start`运行起来，在浏览器里开始体验`cc`的神奇效果吧。
> 该示例主要演示了将一个普通的`reactClass`注册成为`ccClass`，多个`ccClass`的实例将共享`store`的数据。
```javascript
import React, {Component} from 'react';
import { register, startup } from 'concent';

startup({
  store:{
    count:1,
  }
});

class Counter extends Component {
  constructor(props, context) {
    super(props, context);
    this.state = { count: 0 }
  }
  inc = () => this.setState({ count: this.state.count + 1 })
  dec = () => this.setState({ count: this.state.count - 1 })
  render(){
    return (
      <div style={{padding:'12px', margin:'6px'}}>
        <span>{this.state.count}</span>
        <button onClick={this.inc}>+</button>
        <button onClick={this.dec}>-</button>
      </div>
    );
  }
}
const CcCounter = register('Counter', {sharedStateKeys:'*'})(Counter);

class App extends Component {
  constructor(props, context) {
    super(props, context);
    this.state = { isShowCounter: true }
  }
  render() {
    return (
      <div>
        <Counter />
        <Counter />
        <CcCounter />
        <CcCounter />
      </div>
    )
  }
}

export default App;
```
___
## 🔨更多精彩示例
### [cc版本的ant-design-pro](https://github.com/fantasticsoul/rcc-antd-pro)
### [有趣的counter](https://stackblitz.com/edit/funny-counter)
### [增强的counter](https://stackblitz.com/edit/dva-example-count-1saxx8)
### [Jsrun playground](http://jsrun.net/fLXKp/play) 
### [Jsrun video](http://jsrun.net/vLXKp/play)
### [示例集合](https://github.com/fantasticsoul/rcc-simple-demo)
___
## 图文介绍
### cc渲染流程
![](https://raw.githubusercontent.com/fantasticsoul/static/master/img/cc/cc-core.png)
### `react类`、`cc类`和`cc实例`三者之间的关系
![](https://raw.githubusercontent.com/fantasticsoul/static/master/img/cc/cc2.png)
### cc组件的`state`和`$$propState`是怎么来的
![](https://raw.githubusercontent.com/fantasticsoul/static/master/img/cc/cc-class-and-ins.png)
### [在cc里用class和function实现counter](https://juejin.im/post/5c8f77bdf265da60ec2812f7)
### [聊一聊cc的变化侦测和hook实现](https://juejin.im/post/5c8d99f4e51d4555816d6335)
### [在cc里玩转无状态组件](https://juejin.im/post/5c838107f265da2dca389593)
### [对话 redux(家族)，后生何以挑战前辈？](https://juejin.im/post/5c8479316fb9a049ba42635c)
### [为什么不用redux](https://www.zhihu.com/question/263928256/answer/274963347)
