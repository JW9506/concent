!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["exports","react","react-dom"],t):t(e.concent={},e.React,e.ReactDOM)}(this,function(e,I,r){"use strict";I=I&&I.hasOwnProperty("default")?I.default:I,r=r&&r.hasOwnProperty("default")?r.default:r;var t,n,o,m={$$default:[]},pe="$$global",V="$$default",q="$$cc",H="$$concent_void_module_624313307",a="$$CONCENT_ROUTER",A="$$CcClass",x="$$CcFrag",ye="$$CcHook",h="$$Cc",B="$$Dispatcher",c="__cc_dispatcher_container_designed_by_zzk_qq_is_624313307__",_e=Symbol("__for_sync_param_ccsync__"),U=10,O=11,N=13,T="dispatch",ve="setState",me="setModuleState",he="forceUpdate",w="invoke",K="sync",C="module",Ce="ref",W="computed",F="watch",Ke={CC_MODULE_NAME_DUPLICATE:1002,CC_MODULE_NOT_FOUND:1012,CC_DISPATCH_STRING_INVALID:1013,CC_DISPATCH_PARAM_INVALID:1014,CC_MODULE_NOT_CONNECTED:1015,CC_CLASS_KEY_DUPLICATE:1100,CC_CLASS_INSTANCE_KEY_DUPLICATE:1200,CC_CLASS_INSTANCE_MORE_THAN_ONE:1205,CC_STORED_KEYS_NEED_CCKEY:1207,CC_REDUCER_NOT_A_FUNCTION:1503},i=((t={})[Ke.CC_MODULE_NAME_DUPLICATE]="module name duplicate!",t[Ke.CC_MODULE_NOT_FOUND]="module not found!",t[Ke.CC_DISPATCH_STRING_INVALID]="when type param is string, it must be one of these format: (fnName)„ÄÅ(moduleName)/(fnName)",t[Ke.CC_DISPATCH_PARAM_INVALID]="dispatch param type is invalid, it must be string or object",t[Ke.CC_MODULE_NOT_CONNECTED]="module not been connected by ref",t[Ke.CC_CLASS_INSTANCE_KEY_DUPLICATE]="props.ccKey duplicate",t[Ke.CC_CLASS_INSTANCE_MORE_THAN_ONE]="ccClass is declared as singleton, trying new another one instance is not allowed! ",t[Ke.CC_STORED_KEYS_NEED_CCKEY]="you must explicitly specify a ccKey for ccInstance when set storedKeys!",t[Ke.CC_CLASS_KEY_DUPLICATE]="ccClassKey duplicate!",t[Ke.CC_REDUCER_NOT_A_FUNCTION]="reducer must be a function!",t),u=Object.freeze({MODULE_GLOBAL:pe,MODULE_DEFAULT:V,MODULE_CC:q,MODULE_VOID:H,MODULE_CC_ROUTER:a,CC_CLASS:A,CC_FRAGMENT:x,CC_HOOK:ye,CC_PREFIX:h,CC_DISPATCHER:B,CC_DISPATCHER_BOX:c,CCSYNC_KEY:_e,SIG_FN_START:U,SIG_FN_END:O,SIG_FN_QUIT:12,SIG_FN_ERR:N,SIG_MODULE_CONFIGURED:14,SIG_STATE_CHANGED:15,RENDER_NO_OP:1,RENDER_BY_KEY:2,RENDER_BY_STATE:3,FOR_ONE_INS_FIRSTLY:1,FOR_ALL_INS_OF_A_MOD:2,EFFECT_AVAILABLE:1,EFFECT_STOPPED:0,DISPATCH:T,SET_STATE:ve,SET_MODULE_STATE:me,FORCE_UPDATE:he,INVOKE:w,SYNC:K,CATE_MODULE:C,CATE_REF:Ce,FN_CU:W,FN_WATCH:F,ERR:Ke,ERR_MESSAGE:i}),s=((n={})[pe]={},n[V]={},n[q]={},n),d=((o={})[pe]={},o[V]={},o[q]={},o),f={},l={},L={_computedValueOri:d,_computedValue:s,_computedRaw:l,_computedDep:f,getRootComputedValue:function(){return s},getRootComputedDep:function(){return f},getRootComputedRaw:function(){return l}},p={},y={},g={_watchRaw:y,_watchDep:p,getRootWatchDep:function(){return p},getRootWatchRaw:function(){return y}},_={alwaysGiveState:!0,isStrict:!1,isDebug:!1,computedCompare:!0,watchCompare:!0,watchImmediate:!1,bindCtxToMethod:!1},v={},S=Symbol("cuk"),E="1",ge="2",Se="is not a plain json object!",$="should be an string array or *!",b=console.error;function D(e){return null!=e&&0<re(e).length}function R(e){return!D(e)}function Ee(e,t){if(void 0===t&&(t=!1),!e)return!1;var n="object"==typeof e;if(n){var r=Array.isArray(e);return t?r:n&&!r}return!1}function M(e,t){var n="";n="string"==typeof e?e:i[e]||"",t&&(n+=t),n||(n="undefined message for code:"+e);var r=Error(n);return r.code=e,r}function j(e,t,n,r,o,a,c){var i;return(i={})[S]=1,i.needCompute=n,i.fn=r,i.newState=o,i.oldState=a,i.fnCtx=c,i.isLazy=e,i.result=t,i}function k(e,t){return e+"$"+t}function P(e){return e?" --verbose-info: "+e:""}function z(e){return void 0===e&&(e="green"),"color:"+e+";border:1px solid "+e}function G(e){return"%c"+e}var Y=function(e){return"------------ CC "+e+" ------------"};function X(e){b(Y("WARNING")),e instanceof Error?(b(e.message),b(e.stack)):b(e)}function J(e){console.log(Y("TIP")),console.log("%c"+e,"color:green;border:1px solid green;")}function Q(e){if(b(Y("WARNING")),b(e),_.isStrict)throw e}function Z(e,t,n){void 0===n&&(n={});var r=e[t];return r||(r=e[t]=n),r}function ee(e,t){return Z(e,t,[])}function te(e){void 0===e&&(e=52);var t=Math.random();return parseInt(t*e)}function ne(t,n,r){if(void 0===n&&(n=[]),Array.isArray(t)){var o=[];n.forEach(function(e){t.includes(e)&&o.push(e)}),t.length=0,o.forEach(function(e){return t.push(e)})}else Object.keys(t).forEach(function(e){n.includes(e)||(r?t[e]=r:delete t[e])})}function re(e){return Object.keys(e)}function oe(e){var t=null;return e&&(e.currentTarget&&e.type?t=e:e.nativeEvent&&e.target&&(e.currentTarget=e.target,t=e)),t}function ae(t,n,e){function r(e){e?e[t]=n:window[t]=n}window?r(e):setTimeout(function(){r(e)},3e3)}function ce(e,t){for(var n in e)if(!(n in t))return!0;for(var r in t)if(e[r]!==t[r])return!0;return!1}function $e(e,t){var n=[];return e.forEach(function(e){t.includes(e)||n.push(e)}),n}function ie(e){return void 0===e&&(e={}),"string"==typeof e?{module:e}:Object.assign({module:V},e)}var ue="";function se(){return ue}function de(){var t=null;return{commit:function(e){t||(t={}),Object.assign(t,e)},clear:function(){return t=null},getFnCommittedState:function(){return t}}}function fe(){var e=!1;return!window||("previewFrame"===window.name||window.__SANDBOX_DATA__||window.BrowserFS)&&(e=!0),e}function le(e){return{payload:null,renderKey:"",delay:-1,module:e,fnName:""}}function we(e){void 0===e&&(e={});var t="function"==typeof e?e():e;if(!Ee(t))throw Error("state "+Se);return t}function be(e,t){var n=t.split(".");return function e(t,n,r,o){var a=n[o];return r===o?t[a]:e(t[a],n,r,++o)}(e,n,n.length-1,0)}function xe(e){return"-"===e?"*":e}var Ue={module:{computed:{},watch:{}},ref:{computed:{},watch:{},effect:{}}};function Oe(e,t,n){var r=t[e];return{retKey:e,fn:r.fn,depKeys:r.depKeys,isLazy:n,sort:r.sort}}var Ne=function(e,t){return e.sort-t.sort};function De(e,t,n,r,o,a,c,i){var u=r[o],s=[];if(!u)return{pickedFns:s,setted:[],changed:[]};var d=u.retKey_fn_,f=u.retKey_lazy_,l=u.stateKey_retKeys_,p=u.fnCount;if(e){var y=re(d),_=re(c),v=_;return"computed"===n?{pickedFns:y.map(function(e){return Oe(e,d,f[e])}).sort(Ne),setted:_,changed:v}:(y.forEach(function(e){var t=d[e];t.immediate&&s.push({retKey:e,fn:t.fn,depKeys:t.depKeys,sort:t.sort})}),s.sort(Ne),{pickedFns:s,setted:_,changed:v})}var m=function(n,r){var o=[],a=[];return re(r).forEach(function(e){var t=r[e];void 0!==t&&(a.push(e),t!==n[e]&&o.push(e))}),{changed:o,setted:a}}(a,c),h=m.setted,C=m.changed;if(0===h.length)return{pickedFns:s,setted:[],changed:[]};var K=h.join(",")+"|"+C.join(",")+"|"+o,g=Ue[t][n],S=i?Z(g,i):g,E=S[K];return E?{pickedFns:E.map(function(e){return Oe(e,d,f[e])}),setted:h,changed:C}:(function(s,o,d,f,a,l,c){if(0===o.length)return;var e=a["*"];if(e){var i=0<d.length;e.forEach(function(e){var t=f[e],n=t.fn,r=t.compare,o=t.depKeys,a=t.sort,c={retKey:e,fn:n,depKeys:o,isLazy:l[e],sort:a};r?i&&s.push(c):s.push(c)})}s.length<c&&function(){var u={},e=o.length,t=function(e){var i=o[e],t=a[i];return t?(t.forEach(function(e){if(!u[e]){var t=f[e],n=t.fn,r=t.compare,o=t.depKeys,a=t.sort,c=!0;r&&!d.includes(i)&&(c=!1),c&&(u[e]=!0,s.push({retKey:e,fn:n,depKeys:o,isLazy:l[e],sort:a}))}}),s.length===c?"break":void 0):"continue"};e:for(var n=0;n<e;n++){var r=t(n);switch(r){case"continue":continue;case"break":break e}}}();s.sort(Ne)}(s,h,C,d,l,f,p),S[K]=s.map(function(e){return e.retKey}),{pickedFns:s,setted:h,changed:C})}function Ie(e,t,n){var r=t[n];return void 0!==r&&(e[n]=r,!0)}function Ae(t,n,e,r){void 0===n&&(n=[]),void 0===e&&(e=!1),void 0===r&&(r=!1);var o={},a=[];if(!Ee(t))return{partialState:e?null:o,isStateEmpty:!0,ignoredStateKeys:a};var c=!0,i=re(t);return i.length<n.length?i.forEach(function(e){n.includes(e)?Ie(o,t,e)&&(c=!1):r&&a.push(e)}):(n.forEach(function(e){Ie(o,t,e)&&(c=!1)}),r&&(a=$e(i,n))),c&&e&&(o=null),{partialState:o,isStateEmpty:c,ignoredStateKeys:a}}function Re(e,n){return new Proxy(e,{get:function(e,t){return n.includes(t)||n.push(t),e[t]},set:function(e,t){return e[t]=e[t],!0}})}function Te(e,t,n,r){var o=e.ctx;if(o.__$$renderStatus===E){var a=o.ccUniqueKey;if(r){var c=o.module;if(m[c].includes(n)){var i=o.__$$nextCompareWaKeys;o.__$$compareWaKeys[n]=o.__$$curWaKeys[n]=v[c+"/"+n][a]=1,i[n]||(i[n]=2,o.__$$nextCompareWaKeyCount++)}}else{var u=o.__$$nextCompareConnWaKeys,s=o.__$$nextCompareConnWaKeyCount;o.__$$compareConnWaKeys[t][n]=o.__$$curConnWaKeys[t][n]=v[t+"/"+n][a]=1;var d=u[t];d[n]||(d[n]=2,s[t]++)}}}var Me=L._computedValueOri,ke=L._computedValue,We=L._computedDep;function Fe(e,t,n,r,o){(e.retKey_stateKeys_[r]||[]).forEach(function(e){Te(t,n,e,o)})}function Le(r,o,a,c){void 0===a&&(a=!0),void 0===c&&(c=!1);var e=c?r.ctx.refComputedOri:Me[o],i=c?r.ctx.refComputedValue:ke[o];return e?new Proxy(e,{get:function(e,t){if(c){var n=r.ctx.computedDep;Object.keys(n).forEach(function(e){Fe(n[e],r,e,t,a)})}else Fe(We[o],r,o,t,a);return i[t]},set:function(e,t,n){return e[t]=n,!0}}):{}}function je(e,t,n,r){if(_.alwaysGiveState)return[n,r];var o=t[0];return 1===t.length&&"*"!==o&&o===e?[n[o],r[o]]:[n,r]}function Pe(e,t,n,r,o,a,c){if(void 0===c&&(c=!0),0!==a.length){var i,u;if(t===Ce){var s=e.computedDep,d=n===W?s:e.watchDep;u=Z(s,r),i=Z(d,r)}else{var f=L._computedDep,l=n===W?f:g._watchDep;u=Z(f,r),i=Z(l,r)}var p=Z(i,"stateKey_retKeys_"),y=Z(i,"retKey_stateKeys_"),_=function(e){var n=ee(y,o);e.forEach(function(e){var t=ee(p,e);Array.isArray(t)&&!t.includes(o)&&t.push(o),n.includes(e)||n.push(e)})};c?_(a):a.forEach(function(e){var t=Z(u,"retKey_stateKeys_");_(t[e]||[])})}}function ze(e,t,n,r,o,a){var c=je(e,t,r,o);return n(c[0],c[1],a)}for(var Ve,qe=function(e,b,x,U,p,t,O,y,N,D,I,A,R){void 0===e&&(e={});for(var T=e.ctx,_=0,M=t,k=!0,v=!1,n=function(){var C=1===++_&&D,e=p(M,C),t=e.pickedFns,K=e.setted,g=e.changed;if(!t.length)return"break";var n=de(),S=n.commit,r=n.getFnCommittedState,o=de(),E=o.commit,$=o.getFnCommittedState,w=o.clear;if(t.forEach(function(e){var t=e.retKey,n=e.fn,r=e.depKeys,o=e.isLazy,a={retKey:t,callInfo:N,isFirstCall:D,commit:S,commitCu:E,setted:K,changed:g,cuVal:R,stateModule:b,refModule:x,oldState:U,committedState:M,refCtx:T},c=C&&"-"===r,i=[];if("computed"===I)if(o&&(delete a.commit,delete a.commitCu),c){var u=[],s=Re(O,u),d=ze(t,r,n,s,s,a);R[t]=j(!1,d),Pe(T,A,I,b,t,u)}else if(o){var f=je(t,r,O,U);R[t]=j(o,null,!0,n,f[0],f[1],a)}else{var l=ze(t,r,n,O,U,a);R[t]=j(!1,l)}else{a.cuVal=function(e,n){var r=ke[e];return new Proxy(Me[e],{get:function(e,t){return n.push(t),r[t]},set:function(){return!0}})}(b,i);var p=O,y=[],_=U;c&&(_=p=Re(O,y)),!1===ze(t,r,n,p,_,a)&&(k=!1),Pe(T,A,I,b,t,y);var v=$();if(v){var m;if("ref"===A)m="computed"===I?T.computedRetKeyFns:T.watchRetKeyFns;else{var h=L.getRootComputedDep()[b]||{};m=h.retKey_fn_||null}m&&re(v).forEach(function(e){m[e]?(R[e]=j(!1,v[e]),Pe(T,A,F,b,t,i,!1),Pe(T,A,W,b,e,i,!1)):X("fnCtx.commitCu commit an invalid retKey["+e+"] for moduleComputed")}),w()}}}),M=r()){var a=function(e,t){void 0===t&&(t=!1),M=e,t&&0===re(e).length?M=null:(Object.assign(O,M),Object.assign(y,M),v=!0)},c=Ae(M,"ref"===A?T.privStateKeys:m[b],!0,!0),i=c.partialState,u=c.ignoredStateKeys;if(i)if(I===F){var s=function(e,t,n){return(t===Ce?e.computedDep[e.module]||{}:L._computedDep[n]||{}).stateKey_retKeys_}(T,A,b);if(s){var d=[],f={};re(i).forEach(function(e){s[e]?d.push(e):f[e]=i[e]}),0<d.length&&X("these state keys["+d.join(",")+"] will been ignored, cause they are also appeared in computed depKeys,\n              cc suggest you move the logic to computed file."),a(f,!0)}else a(i)}else a(i);if(u.length){var l="they are not "+(A===Ce?"private":"module")+", fn is "+A+" "+I;X("these state keys["+u.join(",")+"] are invalid, "+l)}}10<_&&(X("fnCtx.commit may goes endless loop, please check your code"),M=null)};M;){if("break"===n())break}return{shouldCurrentRefUpdate:k,hasDelta:v}},He=L._computedValue,Be=re,Ge={},Ye=function(n,e,t){var r=void 0===t?{}:t,o=r.ref,a=void 0===o?null:o,c=r.callInfo,i=void 0===c?{}:c,u=r.noSave,s=void 0!==u&&u,d=Je(n),f=He[n],l=L.getRootComputedDep(),p=g.getRootWatchDep(),y=a?a.ctx.module:null,_=Object.assign({},d,e),v=Object.assign({},e),m=v;return qe(a,n,y,d,function(e,t){return De(t,C,"computed",l,n,d,e)},m,_,v,i,!1,"computed",C,f),qe(a,n,y,d,function(e,t){return De(t,C,"watch",p,n,d,e)},m,_,v,i,!1,"watch",C,f),s||Xe(n,v),v},Xe=function(t,e,n){void 0===n&&(n=!1);var r=e;if(n){var o=Ae(e,m[t],!0);r=o.partialState}if(r){var a=Je(t),c=Qe(t);Be(r).forEach(function(e){c[e]=a[e],Ze(t,e),a[e]=r[e]})}return r},Je=function(e){return tt[e]},Qe=function(e){return nt[e]},Ze=function(e,t){rt[e][t]++},et=function(){var e;return(e={})[q]={},e[H]={},e[pe]={},e[V]={},e},tt=et(),nt=et(),rt={},ot={getDispatcher:function(){return Ge[B]},isHotReloadMode:function(){return!!ot.isHot||window&&(window.webpackHotUpdate||fe())},runtimeVar:_,isHot:!1,reComputed:!0,isStartup:!1,moduleSingleClass:{},moduleName_stateFn_:{},moduleName_ccClassKeys_:{},moduleName_stateKeys_:m,moduleName_isConfigured_:{},ccClassKey_ccClassContext_:{},globalStateKeys:[],store:{appendState:function(e,t){var n=ee(m,e);re(t).forEach(function(e){n.includes(e)||n.push(e)}),ot.store.setState(e,t)},_state:tt,_prevState:nt,_stateVer:rt,getState:function(e){return e?Je(e):tt},getPrevState:function(e){return e?Qe(e):nt},getStateVer:function(e){return e?rt[e]:rt},setState:function(e,t,n){return Ye(e,t,n)},setGlobalState:function(e){return Ye(pe,e)},saveSharedState:Xe,getGlobalState:function(){return tt[pe]}},reducer:{_reducer:(Ve={},Ve[pe]={},Ve[q]={},Ve),_caller:{},_fnName_fullFnNames_:{},_module_fnNames_:{}},computed:L,watch:g,refStore:{_state:{},setState:function(e,t){var n=ot.refStore._state,r=Object.assign({},n[e],t);n[e]=r}},init:{_init:{}},ccUKey_ref_:Ge,event_handlers_:{},ccUKey_handlerKeys_:{},handlerKey_handler_:{},waKey_uKeyMap_:v,waKey_effectUKeyMap_:{},refs:Ge,info:{packageLoadTime:Date.now(),firstStartupTime:"",latestStartupTime:"",version:"2.3.13",author:"fantasticsoul",emails:["624313307@qq.com","zhongzhengkai@gmail.com"],tag:"yuna"},fragmentNameCount:0,featureStr_classKey_:{},userClassKey_featureStr_:{},errorHandler:null,middlewares:[],plugins:[],pluginNameMap:{}},at=localStorage.length,ct=ot.refStore._state,it=0;it<at;it++){var ut=localStorage.key(it);if(ut.startsWith("CCSS_"))try{ct[ut.substr(5)]=JSON.parse(localStorage.getItem(ut))}catch(e){console.error(e)}}var st=[],dt=function(e){return e.toLowerCase()===q},ft=function(e){return/^[\$\#\&a-zA-Z0-9_-]+$/.test(e)},lt=P,pt=M;function yt(e){if(!ft(e))throw Error("module["+e+"] writing is invalid!");if(dt(e))throw Error("'$$cc' is a built-in module name for concent")}function _t(e,t,n){void 0===t&&(t=!0),void 0===n&&(n="");var r=n||"module["+e+"]",o=ot.store._state;if(yt(e),e!==pe)if(t){if(D(o[e]))throw pt(Ke.CC_MODULE_NAME_DUPLICATE,lt(r))}else if(!o[e])throw pt(Ke.CC_MODULE_NOT_FOUND,lt(r))}function vt(t,e){var n=Array.isArray(e);if(!n&&"*"!==e)throw Error("storedKeys type err, "+$);n&&e.forEach(function(e){if(t.includes(e))throw Error("the item["+e+"] of storedKeys is not a module state key!")})}var mt={},ht=function(e,t,n){if(e.code!==Ke.CC_MODULE_NAME_DUPLICATE||!ot.isHotReloadMode())throw e;var r=function(e){e||(e="");for(var t=e.split("\n"),n=t.length,o="",a=0;a<n;a++)if(t[a].includes(".checkModuleNameAndState")){!function(){var e=t[a+3].split(":"),n=e.length-1,r=[];e.forEach(function(e,t){t!==n&&r.push(e)}),o=r.join(":")}();break}return o}(e.stack),o=n+"|--link--|"+t,a=mt[o];if(a){if(r!==a)throw e}else mt[o]=r},Ct={};function Kt(e){Ct[e]={}}var gt=ot.waKey_uKeyMap_;function St(n,e,t){void 0===t&&(t=!0),Kt(n);var r=n===H?{}:e;try{!function(e,t,n){if(_t(e,n),!Ee(t))throw Error("module["+e+"]'s state "+Se)}(n,r,t)}catch(e){ht(e,n,"state")}var o=ot.store,a=o.getState(),c=o.getStateVer();o.getPrevState()[n]=Object.assign({},a[n]=r),c[n]=re(r).reduce(function(e,t){return gt[n+"/"+t]={},e[t]=1,e},{});var i=Object.keys(r);if(ot.moduleName_stateKeys_[n]=i,n===pe){var u=ot.globalStateKeys;i.forEach(function(e){u.includes(e)||u.push(e)})}}function Et(e,t){void 0===t&&(t=!1);var n=ot.ccUKey_ref_,r=ot.moduleName_ccClassKeys_,o=ot.ccClassKey_ccClassContext_,a=[];if(e){if(!ot.store._state[e])throw Error("module["+e+"] is not declared in store");var c=r[e];if(c&&0!==c.length){var i=c[0],u=o[i];if(!u)throw Error("no ccClassContext found for ccClassKey "+i+"!");a=u.ccKeys}if(e===V&&(a=a.filter(function(e){return!e.startsWith(x)})),0===a.length){if(!1!==t){throw Error("[[pickOneRef]]: no ref found for module["+e+"]!,if this message doesn't matter, you can ignore it")}a=[B]}}else a=[B];var s=n[a[0]];if(!s)throw Error("cc found no ref!");return s}var $t=k,wt=X,bt=function(){return Promise.resolve()};function xt(e,t,n,r,o){void 0===n&&(n="");var a=void 0===o?{}:o,c=a.ccClassKey,i=a.ccKey,u=a.throwError,s=a.refModule,d=void 0===s?"":s;if(void 0===e&&void 0===t)throw Error("params type error");var f,l="",p="";try{if(c&&i){var y=$t(c,i),_=ot.refs[y];if(!_)return wt("no ref found for ccUniqueKey:"+y+"!"),bt();f=_.ctx.dispatch}else{if("string"==typeof e)if(e.includes("/")){var v=e.split("/");l=v[0],p=v[1]}else p=e;var m;if(!(m=l&&"*"!==l?Et(l):d?Et(d):Et()))return wt("no ref found"),bt();f=m.ctx.dispatch}if("*"!==l)return f(e,t,n,r);var h=ot.reducer._fnName_fullFnNames_[p];if(!h)return;var C=[];return h.forEach(function(e){C.push(f(e,t,n,r))}),Promise.all(C)}catch(e){if(u)throw e;return wt(e.message),bt()}}function Ut(e,t,n,r,o){return xt(e,t,n,r,o)}function Ot(a,e){void 0===e&&(e={});var t="module["+a+"] reducer";if(!Ee(e))throw Error(t+" "+Se);_t(a,!1,t+" is invalid");var n=ot.reducer,r=n._reducer,o=n._caller,c=n._fnName_fullFnNames_,i=n._module_fnNames_,u=Object.assign({},e);r[a]=u;var s=Z(o,a),d=ee(i,a);u.setState||(u.setState=function(e){return e}),re(u).forEach(function(e){d.includes(e)||d.push(e);var r=a+"/"+e,t=ee(c,e);t.includes(r)||t.push(r),s[e]=function(e,t,n){return Ut(r,e,t,n)};var o=u[e];if("function"!=typeof o)throw Error("reducer key["+e+"] 's value is not a function");var n=o;o.__fnName&&(u[e]=n=function(e,t,n){return o(e,t,n)}),n.__fnName=e,n.__stateModule=a,n.__ctName=o.__ctName||o.constructor.name})}var Nt=0,Dt=["a","A","b","B","c","C","d","D","e","E","f","F","g","G","h","H","i","I","j","J","k","K","l","L","m","M","n","N","o","O","p","P","q","Q","r","R","s","S","t","T","u","U","v","V","w","W","x","X","y","Y","z","Z"];function It(e){return Nt++,(e||function(e){void 0===e&&(e=6);for(var t="",n=0;n<e;n++)t+=Dt[te()];return t}())+"_"+Nt}var At=ot.moduleName_stateKeys_,Rt=ot.runtimeVar;function Tt(e,t,n,r,o,a,c){var i=t.refCtx,u=t.type;if(e!==Ce||i.__$$isBSe){if(n){var s,d,f,l=typeof n;if("string"==l)s=Ee(r)?((d={})[n]=r,d):((f={})[n]={fn:r,depKeys:o,compare:a,immediate:c},f);else if(Ee(n))s=n;else if("function"==l&&!Ee(s=n(i)))throw Error("type of "+u+" callback result must be an object");s?function(U,O,N){var e=Rt.computedCompare,t=Rt.watchCompare,D=Rt.watchImmediate,I="computed"===O.type?e:t,A=O.module;re(N).forEach(function(c){var e=N[c],t=typeof e,n=e;if("function"==t&&(n={fn:e}),Ee(n)){var r=n,o=r.fn,a=r.depKeys,i=void 0===a?"-":a,u=r.immediate,s=void 0===u?D:u,d=r.compare,f=void 0===d?I:d,l=r.lazy,p=r.sort,y=It("mark");if("*"===i||"-"===i){var _=Wt(O,A,c),v=_.stateKey;Mt(U,O,y,v),kt(U,O,A,v,o,i,s,f,l,p)}else{if(i&&!Array.isArray(i))throw Error("depKeys must an string array or *");if(i&&0!==i.length){var m="",h=c;if(c.includes("/")){var C=c.split("/"),K=C[0],g=C[1];m=K,h=g}Mt(U,O,y,h);var S={};i.forEach(function(e){var t=Wt(O,A,e),n=t.isStateKey,r=t.stateKey,o=t.module;if(m&&o!==m)throw Error("including slash both in retKey["+c+"] and depKey["+e+"] founded, but their module is different");var a=ee(S,o);if(!n)throw Error("depKey["+e+"] invalid, module["+o+"] doesn't include its stateKey["+r+"]");a.push(r)}),re(S).forEach(function(e){kt(U,O,e,h,o,S[e],s,f,l,p)})}else{var E=Wt(O,A,c),$=E.isStateKey,w=E.stateKey,b=E.module,x=[];!i&&$&&(x=[w]),Mt(U,O,y,w),kt(U,O,b,w,o,x,s,f,l,p)}}}else X("retKey["+c+"] item type error")})}(e,t,s):X(e+" "+u+" param type error")}}else X(e+" "+u+" must be been called in setup block")}function Mt(e,t,n,r){if(e===Ce){var o=t.refCtx,a=o.retKey_fnUid_,c=t.type,i=c+"_"+r;if(a[i])throw Error("ccUKey["+o.ccUniqueKey+"], retKey["+r+"] duplicate in ref "+c);a[i]=n}}function kt(e,t,n,r,o,a,c,i,u,s){var d=Z(t.dep,n,{retKey_fn_:{},retKey_lazy_:{},stateKey_retKeys_:{},retKey_stateKeys_:{},fnCount:0}),f=d.retKey_fn_,l=d.stateKey_retKeys_,p=d.retKey_lazy_,y=d.retKey_stateKeys_,_={fn:o,immediate:c,compare:i,depKeys:a,sort:s||t.sort};f[r]?e!==Ce&&(f[r]=_,p[r]=t.isLazyComputed||u):(f[r]=_,p[r]=t.isLazyComputed||u,d.fnCount++),e===Ce&&(t.retKeyFns[r]=f[r]);var v=t.refCtx;if(v&&("computed"===t.type?v.hasComputedFn=!0:v.hasWatchFn=!0),"-"!==a){var m="*"===a?["*"]:a;"*"===a&&(y[r]=At[n]),m.forEach(function(e){var t=ee(l,e);t.includes(r)||t.push(r)})}}function Wt(e,t,n){var r,o=t,a=n;if(n.includes("/")){var c=n.split("/"),i=c[0];i&&(o=i),a=c[1]}if(o===e.module)r=e.stateKeys;else{if(!(r=At[o]))throw M(Ke.CC_MODULE_NOT_FOUND,P("module["+o+"]"));if(!e.connect[o])throw M(Ke.CC_MODULE_NOT_CONNECTED,P("module["+o+"], stateKey["+a+"]"))}return{isStateKey:r.includes(a),stateKey:a,module:o}}function Ft(e,o){var t={};return re(e).forEach(function(r){o[r]=j(),Object.defineProperty(t,r,{get:function(){var e=o[r]||{},t=e.isLazy;if(!t)return e.result;if(t&&e.needCompute){var n=(0,e.fn)(e.newState,e.oldState,e.fnCtx);e.result=n,e.needCompute=!1}return e.result},set:function(e){var t=o[r];e[S]?e.isLazy?(t.isLazy=!0,t.needCompute=!0,t.newState=e.newState,t.oldState=e.oldState,t.fn=e.fn,t.fnCtx=e.fnCtx):(t.isLazy=!1,t.result=e.result):X("computed value can not been changed manually")}})}),t}var Lt=Z,jt=Ee;function Pt(n,e){if(e){var t="module["+n+"] computed";if(!jt(e))throw Error(t+" "+Se);_t(n,!1,t+" is invalid");var r=ot.computed,o=ot.store.getState(),a=r.getRootComputedValue(),c=r.getRootComputedDep();r.getRootComputedRaw()[n]=e;var i=o[n];Tt(C,{sort:0,type:W,module:n,stateKeys:re(i),dep:c},e);var u=ot.getDispatcher(),s=Object.assign({},i),d=Lt(r._computedValueOri,n);a[n]=Ft(e,d);var f=a[n];qe(u,n,u&&u.ctx.module,i,function(e,t){return De(t,C,"computed",c,n,i,e)},i,i,s,le(n),!0,"computed",C,f)}}var zt=Ee,Vt=Z,qt=re;function Ht(n,e,t){if(void 0===t&&(t=!1),e){var r="module["+n+"] watch";if(!zt(e))throw Error(r+" "+Se);_t(n,!1,r+" is invalid");var o=ot.watch.getRootWatchDep(),a=ot.watch.getRootWatchRaw(),c=ot.computed.getRootComputedValue();if(t){var i=a[n];i?Object.assign(i,e):a[n]=e}else a[n]=e;var u=(0,ot.store.getState)(n);Tt(C,{module:n,stateKeys:qt(u),dep:o},e);var s=ot.getDispatcher(),d=Object.assign({},u),f=Vt(c,n);qe(s,n,s&&s.ctx.module,u,function(e,t){return De(t,C,"watch",o,n,u,e)},u,u,d,le(n),!0,"watch",C,f)}}var Bt=[U,O,12,N,14,15],Gt={};function Yt(t,n){Gt[t].forEach(function(e){e({sig:t,payload:n})})}function Xt(e,t){function n(e,t){var n=Gt[e];n?n.push(t):console.warn("invalid sig["+e+"]")}Array.isArray(e)?e.forEach(function(e){n(e,t)}):n(e,t)}Bt.forEach(function(e){return Gt[e]=[]});var Jt=function(e){if(!ot.errorHandler)throw e;ot.errorHandler(e)},Qt=0,Zt={},en={},tn={},nn={};function rn(){return++Qt}function on(e,t,n,r){if(n){var o=r[e];o||(o=r[e]={});var a=o[t];a?Object.assign(a,n):o[t]=n}}function an(e,t,n){on(e,t,n,Zt)}function cn(e,t,n){return an(e,t,n),function(e){var t=function(e){return Zt[e]}(e),n=[];return re(t).forEach(function(e){n.push({module:e,state:t[e]})}),n}(e)}function un(e){delete Zt[e]}var sn={},dn=function(e,t,n){void 0===n&&(n=1e3);var r=sn[t];r&&clearTimeout(r),sn[t]=setTimeout(function(){delete sn[t],e()},n)};function fn(e,n,r,t,o,a,c){void 0===c&&(c=!1);var i=e.ctx;if(!i.hasWatchFn)return!0;var u=Object.assign({},t),s=i.watchDep,d=i.module,f=i.ccUniqueKey,l=i.refComputed,p=Object.assign({},r,t),y=qe(e,n,d,r,function(e,t){return De(t,"ref","watch",s,n,r,e,f)},t,p,u,o,a,"watch",Ce,l),_=y.shouldCurrentRefUpdate;return c&&y.hasDelta&&Object.assign(t,u),_}function ln(e,n,r,t,o,a,c){void 0===a&&(a=!1),void 0===c&&(c=!1);var i=e.ctx,u=Object.assign({},t);if(!i.hasComputedFn)return u;var s=i.computedDep,d=i.module,f=i.refComputed,l=i.ccUniqueKey,p=Object.assign({},r,t);return qe(e,n,d,r,function(e,t){return De(t,Ce,"computed",s,n,r,e,l)},t,p,u,o,a,"computed",Ce,f),c&&Object.assign(t,u),u}var pn=re,yn=ot.ccUKey_ref_,_n=ot.waKey_uKeyMap_,vn=ot.waKey_effectUKeyMap_;function mn(o,e,c,i){var t=pn(e),n=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=[]),e+"/"+t.sort().join(",")+"/"+n+"/"+("*"===r?"*":r.sort().join(","))}(o,t,c,i),r=function(e,t){return Ct[e][t]}(o,n);if(r)return{sharedStateKeys:t,result:r};var a={},u=[],s=[];t.forEach(function(e){var t=o+"/"+e;Object.assign(a,_n[t],vn[t])});function d(e,t){e?u.push(t):s.push(t)}function f(e,t){var n=e.ctx,r=n.ccClassKey,o=n.ccUniqueKey;if(c){var a=n.renderKey===c;"*"===i?a&&d(t,o):i.includes(r)?a&&d(t,o):d(t,o)}else d(t,o)}var l=pn(a),p=!1;l.forEach(function(e){var t=yn[e];if(t){var n=t.ctx,r=!!n.connect[o];n.module===o&&f(t,!0),r&&f(t,!1)}else p=!0});var y={belong:u,connect:s};return p||function(e,t,n){Ct[e][t]=n}(o,n,y),{sharedStateKeys:t,result:y}}var hn=Ee,Cn=X,Kn=D,gn=function(e,t){return e+"/"+Object.keys(t).sort().join("|")},Sn=re,En=1,$n=2,wn=he,bn=ve,xn=me,Un=w,On=K,Nn=15,Dn=1,In=2,An=3,Rn=ot.store,Tn=Rn.setState,Mn=Rn.getPrevState,kn=Rn.saveSharedState,Wn=ot.middlewares,Fn=ot.ccClassKey_ccClassContext_,Ln=ot.refStore,jn=ot.moduleName_stateKeys_;function Pn(e,t,c){var n=void 0===t?{}:t,i=n.module,r=n.skipMiddleware,u=void 0!==r&&r,s=n.payload,o=n.reactCallback,d=n.type,a=n.calledBy,f=void 0===a?bn:a,l=n.fnName,p=void 0===l?"":l,y=n.renderKey,_=void 0===y?"":y,v=n.delay,m=void 0===v?-1:v;if(void 0!==e)if(hn(e)){var h=c.ctx,C=h.module,K=h.ccUniqueKey,g=h.ccKey,S=function(e,t){return e===t?En:$n}(i,C),E={payload:s,renderKey:_,ccKey:g,module:i,fnName:p},$=function(e,t,n){var r=Ae(t,jn[e],!0).partialState;if(r)return Tn(e,r,n);return r}(i,e,{ref:c,callInfo:E,noSave:!0});Object.assign(e,$),zn(c,E,_,f,e,S,o,function(n,r,o){var a={calledBy:f,type:d,payload:s,renderKey:_,delay:m,ccKey:g,ccUniqueKey:K,committedState:r,refModule:C,module:i,fnName:p,sharedState:$||{},modState:function(e,t){a.committedState[e]=t,a.sharedState[e]=t}};!function(e,n,r){var o=!1;if(!0!==e){var a=Wn.length;if(0<a){o=!0;var c=0;!function e(){if(c===a)r(o);else{var t=Wn[c];c++,"function"==typeof t?t(n,e):(Cn("found one middleware is not a function"),e())}}()}else r()}else r(o)}(u,a,function(e){var t=$;e?t=kn(i,a.sharedState,!0):$&&kn(i,$),o&&o(),n===Dn&&!t||Yt(Nn,{committedState:r,sharedState:t,module:i,type:function(e,t){return[wn,bn,xn,Un,On].includes(e)?"ccApi/"+e:"dispatch/"+t}(f,d),ccUniqueKey:K,renderKey:_}),t&&function(e,t,n,r,o,a,c){var i=function(){!function(o,e,a,t,c,n){if(!a)return;var i=ot.ccUKey_ref_,r=e.ctx,u=r.ccUniqueKey,s=t===En,d=mn(c,a,n,Fn[r.ccClassKey].renderKeyClasses),f=d.sharedStateKeys,l=d.result,p=l.connect;l.belong.forEach(function(e){var t=i[e],n=t.ctx.ccUniqueKey;s&&n===u||zn(t,o,null,"broadcastState",a,En)});var y=Mn(c);p.forEach(function(e){var t=i[e];if(!0!==t.__$$isUnmounted){var n=t.ctx;ln(t,c,y,a,o);var r=fn(t,c,y,a,o);n.__$$settedList.push({module:c,keys:f}),r&&n.__$$ccForceUpdate()}})}(e,t,n,r,o,a)};if(0<c){var u=gn(t.ctx.ccUniqueKey,n);dn(i,u,c)}else i()}(E,c,t,S,i,_,m)})})}else Cn("your committed state "+Se)}function zn(e,t,n,r,o,a,c,i){var u=e.state,s=e.ctx;if(!0===e.__$$isUnmounted||a!==En||r!==wn&&!Kn(o))return c&&c(u),i&&i(Dn,o);var d=s.module,f=s.storedKeys,l=s.ccUniqueKey,p=An;if(n&&(p=In,s.renderKey!==n))return i&&i(Dn,o);if(0<f.length){var y=Ae(o,f),_=y.partialState;if(!y.isStateEmpty){if(!0===s.persistStoredKeys){var v=Ae(u,f),m=Object.assign({},v.partialState,_);localStorage.setItem("CCSS_"+l,JSON.stringify(m))}Ln.setState(l,_)}}function h(){s.__$$settedList.push({module:d,keys:Sn(C)}),s.__$$ccSetState(C,c,K)}var C=ln(e,d,u,o,t),K=fn(e,d,u,C,t,!1,!0);i?i(p,C,h):h()}function Vn(e,t,n,r,o){void 0===r&&(r=-1);try{Et(e).ctx.changeState(t,{ccKey:"[[top api:setState]]",module:e,renderKey:n,delay:r,skipMiddleware:o})}catch(e){Q(e)}}var qn=X,Hn=Ee,Bn=re,Gn=ot.store,Yn=Gn.getState,Xn=Gn.setState,Jn=ot.reducer._reducer,Qn=ot.computed._computedValue,Zn=M,er=P;function tr(e,t){void 0===t&&(t=!0);try{return _t(e,!1,"module["+e+"] is not configured in store"),!0}catch(e){return function(e,t){if(void 0===t&&(t=!0),t)throw e;or(e)}(e,t),!1}}function nr(o,a){return function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e?a(e):o.apply(void 0,n)}}function rr(e,t,n,r){var o;return!0===e?(function(e){tn[e]=!0}(o=rn()),r[o]=1):r[o=t||rn()]||(r[o]=1),{_chainId:o,_oriChainId:n||o}}function or(e,t){e&&(t?t(e):(qn(e),ot.errorHandler&&ot.errorHandler(e)))}function ar(e,t,n){return function(r,o,a,c){return new Promise(function(e,t){var n=Object.assign(a,{__innerCb:nr(e,t)});r(o,n,c)}).catch(Jt)}(dr,e,t,n)}function cr(e,t,n){return ar(e,{callerRef:t.callerRef,context:!0,module:t.module,calledBy:t.calledBy,fnName:e.name,delay:t.delay,renderKey:t.renderKey,chainId:t.chainId,oriChainId:t.oriChainId,chainId_depth_:t.chainId_depth_,isSilent:t.isSilent},n)}function ir(a,c){return function(e,t,n){var r=a.ctx;if(c){var o=Object.assign({},r.state,e);c.state=o}n?(r.renderCount+=1,r.reactSetState(e,t)):(Object.assign(a.state,e),r.state=a.state)}}function ur(n){return function(e){var t=n.ctx;t.renderCount+=1,t.reactForceUpdate(e)}}function sr(h,e){var t=void 0===e?{}:e,C=t.chainId,K=t.oriChainId,g=t.isLazy,n=t.delay,S=void 0===n?-1:n,r=t.isSilent,E=void 0!==r&&r,o=t.chainId_depth_,$=void 0===o?{}:o;return function(e,t,n,r){var o=g,a=E,c="",i=null!=r?r:S;if(Hn(n)){var u=n.lazy,s=n.silent,d=n.renderKey,f=n.delay;void 0!==u&&(o=u),void 0!==s&&(a=s),void 0!==d&&(c=d),void 0!==f&&(i=f)}else c=n;var l,p,y=rr(o,C,K,$),_=typeof e,v={callerRef:h,calledBy:w,module:h.ctx.module,isSilent:a,chainId:y._chainId,oriChainId:y._oriChainId,chainId_depth_:$,delay:i,renderKey:c},m=Error("param type error, correct usage: invoke(userFn:function, ...args:any[]) or invoke(option:[module:string, fn:function], ...args:any[])");if("function"==_)return e.__fnName&&(e.name=e.__fnName),cr(e,v,t);if("object"!=_)throw m;if(p=Array.isArray(e)?(l=e[1],e[0]):(l=e.fn,e.module),"function"!=typeof l)throw m;return p&&(v.module=p),cr(l,v,t)}}function dr(l,e,p){var y=e.callerRef,_=y.ctx.module,t=e.module,v=void 0===t?_:t,n=e.context,m=void 0!==n&&n,h=e.__innerCb,C=e.type,K=e.calledBy,g=e.fnName,r=e.delay,S=void 0===r?-1:r,E=e.renderKey,$=e.chainId,w=e.oriChainId,b=e.chainId_depth_,x=e.isSilent;!function(e,t,n,r){var o=n;tr(e,!1)?(e!==t&&n&&(qn(function(e,t){return"param module["+e+"] must equal current ref's module["+t+"] when pass param reactCallback, or it will never been triggered! "}(e,t)),o=null),r(null,o)):r(Error("inputModule:"+e+" invalid"),null)}(v,_,e.cb,function(e,r){if(e)return or(e,h);var o,t=Yn(v),n={};if(o=$===w&&1===b[$],m){b[$]=b[$]+1;var a=fr(y,!1,x,v,E,S,$,w,b),c=fr(y,!1,!0,v,E,S,$,w,b),i=fr(y,!0,x,v,E,S,$,w,b),u=sr(y,{delay:S,chainId:$,oriChainId:w,chainId_depth_:b}),s=sr(y,{isLazy:!0,delay:S,oriChainId:w,chainId_depth_:b}),d=sr(y,{isLazy:!1,delay:S,isSilent:!0,oriChainId:w,chainId_depth_:b}),f=function(e){return nn[e]}($)||{};n={module:v,callerModule:_,committedStateMap:f,committedState:f[v]||{},invoke:u,lazyInvoke:s,silentInvoke:d,invokeLazy:s,invokeSilent:d,dispatch:a,lazyDispatch:i,silentDispatch:c,dispatchLazy:i,dispatchSilent:c,rootState:Yn(),globalState:Yn(pe),moduleState:t,moduleComputed:Qn[v]||{},setState:function(e){return a("setState",e,{silent:x,renderKey:E,delay:S})},refCtx:y.ctx}}!1===x&&Yt(U,{isSourceCall:o,calledBy:K,module:v,chainId:$,fn:l}),new Promise(function(e){return e(l(p,t,n))}).then(function(e){b[$]=b[$]-1;var t=1===b[$];!function(e,t,n){on(e,t,n,nn)}($,v,e);var n=[];!1===x&&(Yt(O,{isSourceCall:o,calledBy:K,module:v,chainId:$,fn:l}),!function(e){return!0===tn[e]}($)?n=[{module:v,state:e}]:t?function(e){return!0===en[e]}($)||(n=cn($,v,e),un($)):an($,v,e)),n.forEach(function(e){e.state&&Pn(e.state,{renderKey:E,module:e.module,reactCallback:r,type:C,calledBy:K,fnName:g,delay:S,payload:p},y)}),o&&(un($),function(e){delete nn[e]}($)),h&&h(null,e)}).catch(function(e){Yt(N,{isSourceCall:o,calledBy:K,module:v,chainId:$,fn:l}),or(e,h)})})}function fr(b,x,U,O,N,D,I,A,R){return void 0===N&&(N=""),void 0===D&&(D=-1),void 0===R&&(R={}),function(e,n,t,r){void 0===e&&(e={});var o=x,a=U,c="",i=r||D;if(Hn(t)){c=N;var u=t.lazy,s=t.silent,d=t.renderKey,f=t.delay;void 0!==u&&(o=u),void 0!==s&&(a=s),void 0!==d&&(c=d),void 0!==f&&(i=f)}else c=t||N;function l(){return sr(b,{chainId:v,oriChainId:m,isLazy:o,chainId_depth_:R})(e,n,c,i)}var p,y,_=rr(o,I,A,R),v=_._chainId,m=_._oriChainId,h=typeof e,C=O;if(h&&"object"==h){if(Array.isArray(h))return l();var K=e.module;K&&(C=K),p=e.type,y=e.cb}else{if("string"!=h&&"function"!=h)return Promise.reject(Zn(Ke.CC_DISPATCH_PARAM_INVALID));var g=e;if("function"==h){var S=e.__fnName;if(!S)return l();g=S,1==R[m]&&(C=e.__stateModule)}var E=g.split("").filter(function(e){return"/"===e}).length;if(0===E)p=g;else{if(1!==E)return Promise.reject(Zn(Ke.CC_DISPATCH_STRING_INVALID,er(g)));var $=g.split("/"),w=$[0];w&&(C=w),p=$[1]}}return"*"===C?xt("*/"+p,n,{silent:a,lazy:o,renderKey:c},i,{refModule:b.ctx.module}):new Promise(function(e,t){!function(e){var t=void 0===e?{}:e,n=t.callerRef,r=t.module,o=t.renderKey,a=t.isSilent,c=t.type,i=t.payload,u=t.cb,s=t.__innerCb,d=t.delay,f=void 0===d?-1:d,l=t.chainId,p=t.oriChainId,y=t.chainId_depth_,_=Jn[r];if(!_)return s(Error("no reducerMap found for module:["+r+"]"));var v=_[c];if(!v)return s(Error("no reducer fn found for ["+r+"/"+c+"], is these fn you want:"+Object.keys(_)));dr(v,{callerRef:n,module:r,type:c,cb:u,context:!0,__innerCb:s,calledBy:T,delay:f,renderKey:o,isSilent:a,chainId:l,oriChainId:p,chainId_depth_:y},i)}({callerRef:b,module:C,type:p,payload:n,cb:y,__innerCb:nr(e,t),delay:i,renderKey:c,isSilent:a,chainId:v,oriChainId:m,chainId_depth_:R})}).catch(Jt)}}function lr(a){return function(t){try{Vn(a,t)}catch(e){var n=Yn(a);if(!n)return qn("invalid module "+a);var r=Ae(t,Bn(n),!1,!0),o=r.ignoredStateKeys;r.isStateEmpty||Xn(a,r.partialState),0<o.length&&qn("invalid keys:"+o.join(",")+", their value is undefined or they are not declared in module"+a),J("no ccInstance found for module["+a+"] currently, cc will just store it, lately ccInstance will pick this state to render")}}}var pr=function(o){return function(e,t){var n=o.ctx,r=Object.assign({},o.state,e);n.type===ye?(o.state=n.state=r,n.__boundSetState(r),t&&t(r)):(n.state=r,o.__$$isMounted?o.state=r:Object.assign(o.state,e),n.__boundSetState(r,t))}},yr=function(r){return function(e){var t=r.ctx;if(t.type===ye){var n=Object.assign({},r.state);t.__boundSetState(n),e&&e(n)}else t.__boundForceUpdate(e)}},_r=Ee,vr=we;function mr(t,e){if(ot.isStartup){if(!_r(e))throw Error("param config "+Se);if(t===pe)throw Error("configuring global module is not allowed");var n=e.reducer,r=e.computed,o=e.watch,a=e.init,c=e.isClassSingle,i=vr(e.state);if(n&&!_r(n))throw Error("config.reducer "+Se);if(St(t,i,!0),Ot(t,n),r&&Pt(t,r),o&&Ht(t,o),ot.moduleSingleClass[t]=!0===c,a){if("function"!=typeof a)throw Error("init value must be a function!");Promise.resolve().then(a).then(function(e){lr(t)(e)})}ot.moduleName_isConfigured_[t]=!0,Yt(14,t)}else st.push({module:t,config:e})}function hr(r,o){var a={};return re(r).forEach(function(e){function t(){return n.apply(void 0,arguments)}var n=r[e];t.__fnName=e,t.__stateModule=o,a[e]=t}),a}function Cr(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}function Kr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var gr=re,Sr=Ee,Er=ot.store._state;var $r=R,wr=M,br=ot.featureStr_classKey_,xr=ot.userClassKey_featureStr_,Ur=ot.ccClassKey_ccClassContext_,Or=0;var Nr=ot.moduleName_stateKeys_,Dr=ot.moduleName_ccClassKeys_,Ir=ot.moduleSingleClass,Ar=ot.ccClassKey_ccClassContext_,Rr=ot.computed._computedValue,Tr=function(e,t){var n=!1,r=!1;if(!Array.isArray(e))return{duplicate:n,notArray:!0,keyElementNotString:r};if(!Array.isArray(t))return{duplicate:n,notArray:!0,keyElementNotString:r};var o=e.length,a=t.length;e:for(var c=0;c<o;c++){var i=e[c];if("string"!=typeof i){r=!0;break e}for(var u=0;u<a;u++){var s=t[u];if("string"!=typeof s){r=!0;break e}if(s===i){n=!0;break e}}}return{duplicate:n,notArray:!1,keyElementNotString:r}},Mr=P;function kr(e,t,n,r,o,a,c,i,u){void 0===e&&(e=V),void 0===a&&(a=[]),!0===i&&function(){if(!0!==ot.isStartup)throw Error("you must startup cc by call startup method before register ReactClass to cc!")}();var s="cc"===u;_t(e,!1,"module["+e+"] is not configured in store"),vt(Nr[e],a);var d=c;Array.isArray(c)?(d={},c.forEach(function(e){return d[e]="-"})):c[pe]||(c[pe]="-");var f,l=function(e,t,n){if(t===B)return[];if(!n)return[];if("*"===n)return Nr[e];var r=Tr(n,[]);if(r.notArray||r.keyElementNotString)throw Error("watchedKeys "+$+" "+Mr("ccClassKey:"+t));return n}(e,t,o),p=function(o,e,t,a){if(!Sr(o))throw Error("CcFragment or CcClass's prop connect type error, it "+Se);function c(e){return i+" module["+e+"]'s value must be * or array of string"}var i="CcFragment or CcClass's prop connect is invalid,",n=gr(o);n.sort();var u=[],s={};if(n.forEach(function(t){var n=Er[t],r=a+"_"+t+"/";if(void 0===n)throw Error(i+" module["+t+"] not found in cc store ");var e=o[t];if("string"==typeof e){if("*"!==e&&"-"!==e)throw Error(c(t));u.push(r+"*"),gr(n).forEach(function(e){return s[t+"/"+e]=e})}else{if(!Array.isArray(e))throw Error(c(t));e.forEach(function(e){if(!n.hasOwnProperty(e))throw Error(i+" module["+t+"]'s key["+e+"] not declared in cc store ");r+=e+",",s[t+"/"+e]=e}),u.push(r)}}),u.push("|"),"*"===e)u.push(a+"_$"+t+"/*");else{e.sort();var r=t+"/"+e.join(",");u.push(r)}return{featureStr:u.join("@"),connectedModuleKeyMapping:s,connectedModuleNames:n}}(d,l),y=p.connectedModuleKeyMapping,_=p.connectedModuleNames,v=function(e,t,n,r,o,a,c){if(void 0===c&&(c=""),!c){if(t===V&&$r(n)&&0===r.length)return o+"0";var i=o+":"+a,u=br[i];return u||(br[i]=u=""+o+ ++Or)}if(c.startsWith(h))throw Error("user can not specify a classKey["+c+"] starts with $$Cc");if(!e&&c.toLowerCase()==B.toLowerCase())throw Error(B+" is cc built-in ccClassKey name, if you want to customize your dispatcher, \n      you can set autoCreateDispatcher=false in StartupOption, and use createDispatcher then.");if(Ur[c]){if(xr[c]!==a)throw wr(Ke.CC_CLASS_KEY_DUPLICATE,"ccClassKey:["+c+"] duplicate")}else xr[c]=a;return c}(s,e,d,l,r,p.featureStr,t);if(n){if(!Array.isArray(n)&&"*"!==n)throw Error("renderKeyClasses type err, it is must be an array or string *");f=n}else f=[v];return function(e,t,n,r,o,a,c){var i=Ar[e];i||(i=function(e,t,n,r,o){return{module:e,ccClassKey:t,renderKeyClasses:n,originalWatchedKeys:o,watchedKeys:r,ccKeys:[],connectedState:{},connectedModuleKeyMapping:null,connectedModule:{}}}(n,e,t,o,r),Ar[e]=i);var u={},s={};if(a){var d=ot.store._state,f=i.connectedState;c.forEach(function(e){f[e]=d[e],s[e]=Rr[e],u[e]=1}),i.connectedModuleKeyMapping=a,i.connectedModule=u,i.connectedComputed=s}}(v,f,e,o,l,y,_),function(e,t){var n=ee(Dr,e);if(!0===Ir[e]&&1<=n.length)throw Error("module["+e+"] is declared as single, only on ccClassKey can been registered to it, and now a ccClassKey["+n[0]+"] has been registered!");n.includes(t)||n.push(t)}(e,v),{_module:e,_connect:d,_watchedKeys:l,_ccClassKey:v}}var Wr=ot.event_handlers_,Fr=ot.handlerKey_handler_,Lr=ot.ccUKey_handlerKeys_,jr=ot.ccUKey_ref_,Pr=function(e,t,n){return e+"$"+t+"$"+n},zr=ee,Vr=X;function qr(e,t,n,r,o){void 0===o&&(o=null);var a=Wr[e];if(a){var c=a;return r?c=a.filter(function(e){return e.ccUniqueKey===r}):n?c=a.filter(function(e){return e.ccClassKey===n}):t&&(c=a.filter(function(e){return e.module===t})),void 0!==o&&(c=c.filter(function(e){return e.identity===o})),c}return[]}function Hr(e){var o={},r=[];e.forEach(function(e){var t=e.ccUniqueKey,n=e.event;delete Fr[e.handlerKey],o[t]=1,r.includes(n)||r.push(n)}),r.forEach(function(e){var r=Wr[e];r&&(r.forEach(function(e,t){var n=e.ccUniqueKey;1===o[n]&&(r[t]=null,delete Lr[n])}),Wr[e]=r.filter(function(e){return null!==e}))})}function Br(e,t,n,r,o,a){var c=zr(Wr,r);if("function"!=typeof a)return Vr("event "+r+"'s handler is not a function!");var i=Pr(n,r,o),u=zr(Lr,n),s=c.findIndex(function(e){return e.handlerKey===i}),d={event:r,module:e,ccClassKey:t,ccUniqueKey:n,identity:o,handlerKey:i,fn:a};-1<s?c[s]=d:(c.push(d),u.push(i)),Fr[i]=d}function Gr(e){for(var t=arguments.length,a=Array(1<t?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];var r,o,c,i,u=null,s=null;"string"==typeof e?r=e:(r=e.name,u=e.identity,o=e.module,c=e.ccClassKey,i=e.ccUniqueKey,s=e.canPerform),qr(r,o,c,i,u).forEach(function(e){var t=e.handlerKey,n=jr[e.ccUniqueKey];if(n&&t){if(n.__$$isUnmounted)return;var r=Fr[t];if(r){if(s&&!s(n))return;var o=r.fn;n.__$$isMounted?o.apply(void 0,a):n.ctx.__$$onEvents.push({fn:o,args:a})}}})}function Yr(e,t){Hr(qr(e,t.module,t.ccClassKey,t.ccUniqueKey,t.identity))}function Xr(e){var t=Lr[e];if(t){var n=[];t.forEach(function(e){return n.push(Fr[e])}),Hr(n)}}function Jr(e){if(e&&"object"==typeof e){var t;if(Array.isArray(e))t={name:e[0],identity:e[1]};else t=Object.assign({},e);return t}return{name:e}}var Qr=Object.freeze({bindEventHandlerToCcContext:Br,findEventHandlersToPerform:Gr,findEventHandlersToOff:Yr,offEventHandlersByCcUniqueKey:Xr,getEventItem:Jr});function Zr(n,e,r,o){return new Proxy(e,{get:function(e,t){return Te(n,r,t,o),e[t]},set:function(e,t,n){return e[t]=n,!0}})}var eo=1;function to(c,i){return void 0===i&&(i=!1),function(e,t,n,r,o){var a=o||eo++;Tt(Ce,{type:"computed",isLazyComputed:i,refCtx:c,sort:a,stateKeys:c.stateKeys,retKeyFns:c.computedRetKeyFns,module:c.module,connect:c.connect,dep:c.computedDep},e,t,n,r)}}var no=X,ro=k;function oo(e){return e?e.props||e:{}}var ao=ot.store.getState;var co=function(e,t,n){var r=n.module,o=n.state,a=!1,c="",i="",u="",s=null,d=-1,f=!1,l=e[_e],p=e.type,y=!1;if(void 0!==l){var _,v,m;if(d=e.delay,i=e.rkey,a="int"===p,f="bool"===p,(c=l).includes("/")){var h=c.split("/");_=h[1],v=c,m=h[0]}else v=r+"/"+(_=c),m=r;var C=ao(m);u="bool"===p?!be(m!==r?C:o,_):function(e){var t=oe(e);return t?t.currentTarget.value:e}(t);var K=e.val;if(void 0===K);else if("function"==typeof K){var g=K(u,_,{module:m,moduleState:C,fullKeyPath:v,state:o,refCtx:n});if(null!=g)if("as"===p)u=g;else{var S=typeof g;"boolean"==S?y=!g:"object"==S?(y=!0,s=g):X("syncKey["+l+"] cb result type error.")}else"as"===p&&(y=!0)}else u=K}else{var E=oe(t);if(!E)return null;var $=E.currentTarget;u=$.value;var w=$.dataset;if(a="int"===p||void 0!==w.ccint,!(c=w.ccsync))return null;i=w.ccrkey;var b=w.ccdelay;if(b)try{d=parseInt(b)}catch(e){}}return{currentTarget:{value:u,extraState:s,noAutoExtract:y,dataset:{ccsync:c,ccint:a,ccdelay:d,ccrkey:i}},isToggleBool:f}};var io=function(e,t,n,r,o){var a=t;!0!==n||Number.isNaN(a=parseInt(t))&&(X(t+" can not convert to int but you set ccint as true!ÔºÅ"),a=t);var c=null,i=[];if(e.includes("/")){var u=e.split("/"),s=u[1];c=u[0],i=s.includes(".")?s.split("."):[s]}else i=e.includes(".")?e.split("."):[e];if(1===i.length){var d,f,l=i[0];return!0!==o?{module:c,state:(d={},d[l]=a,d)}:{module:c,state:(f={},f[l]=!r[l],f)}}var p,y=i[0],_=i.slice(1),v=r[y];return function e(t,n,r,o,a,c){void 0===c&&(c=!1);var i=n[o];if(r===o)if(!0===c){var u=t[i];"boolean"!=typeof u?X("key["+i+"]'s value type is not boolean"):t[i]=!u}else t[i]=a;else e(t[i],n,r,++o,a,c)}(v,_,_.length-1,0,a,o),{module:c,state:(p={},p[y]=v,p)}},uo=ot.store.getState;function so(e,t,n){var r=t.ctx,o=r.module,a=co(e,n,r);if(a){var c=a.currentTarget,i=c.dataset,u=c.value,s=c.extraState,d=c.noAutoExtract;n&&n.stopPropagation&&n.stopPropagation();var f=i.ccsync,l=i.ccint,p=i.ccdelay,y=i.ccrkey;if(f.startsWith("/")&&(i.ccsync=""+o+f),f.includes("/")){var _=f.split("/")[0];_t(_,!1);var v=r.ccKey,m=r.ccUniqueKey;if(d)return void(s&&Pn(s,{calledBy:K,ccKey:v,ccUniqueKey:m,module:_,renderKey:y,delay:p},t));var h=_!==o?uo(_):t.state;Pn(io(f,u,l,h,a.isToggleBool).state,{calledBy:K,ccKey:v,ccUniqueKey:m,module:_,renderKey:y,delay:p},t)}else{if(d)return void(s&&t.setState(s,null,y,p));var C=io(f,u,l,t.state,a.isToggleBool);t.setState(C.state,null,y,p)}}}var fo=ot.reducer,lo=fo._module_fnNames_,po=fo._caller,yo=ot.refStore,_o=ot.ccClassKey_ccClassContext_,vo=ot.moduleName_stateKeys_,mo=ot.store.getState,ho=ot.moduleName_ccClassKeys_,Co=ot.waKey_uKeyMap_,Ko=ot.waKey_effectUKeyMap_,go=re,So=M,Eo=P,$o=ee,wo=Z,bo=X,xo=R,Uo=0;var Oo=function(){},No=function(e){return"type of defineEffect "+e+" param must be"},Do=function(e){return"-"===e.watchedKeys?go(e.__$$renderStatus===E?e.__$$compareWaKeys:e.__$$curWaKeys):e.watchedKeys},Io=function(t,e){function n(e){return go(t.__$$renderStatus===E?t.__$$compareConnWaKeys[e]:t.__$$curConnWaKeys[e])}function r(e){if(c)return n(e);var t=o[e];return"*"===t?vo[e]:"-"===t?n(e):t}var o=t.connect,a=t.connectedModules,c=Array.isArray(o);if(e)return r(e);var i={};return a.forEach(function(e){return i[e]=r(e)}),i};function Ao(n,r,e){("*"===e?vo[r]:e).forEach(function(e){var t=Co[r+"/"+e];t?t[n]=1:bo("invalid watchedKey["+e+"] of module["+r+"]")})}function Ro(c,e,t){var n;void 0===t&&(t=5);var r=e.isSingle,o=e.ccClassKey,a=e.ccKey,i=void 0===a?"":a,u=e.module,s=e.type,d=e.state,f=e.storedKeys,l=void 0===f?[]:f,p=e.persistStoredKeys,y=void 0!==p&&p,_=e.watchedKeys,v=e.connect,m=void 0===v?{}:v,h=e.tag,C=void 0===h?"":h,K=e.ccOption,g=void 0===K?{}:K,S=u,E=c.ctx,$=xo(E),w=c.setState,b=c.forceUpdate;!$&&E.ccUniqueKey?(w=E.__boundSetState,b=E.__boundForceUpdate):s!==ye&&(w=c.setState.bind(c),b=c.forceUpdate.bind(c));var x={};x.persistStoredKeys=void 0===g.persistStoredKeys?y:g.persistStoredKeys,x.tag=g.tag||C;var U=function(e,t,n,r){var o;if(e)n&&no("now the ccClass is singleton, you needn't supply ccKey to instance props, cc will ignore the ccKey["+n+"]"),o=t;else if(n)o=ro(t,n);else{var a=It(r);o=ro(t,a)}return o}(r,o,i,x.tag);if(x.renderKey=g.renderKey||U,x.storedKeys=function(e,t,n,r){var o=n||r;return o?"*"===o?Object.keys(e).filter(function(e){return!t.includes(e)}):(vt(t,o),o):[]}(d,vo[S],g.storedKeys,l),i&&!o)throw Error("missing ccClassKey while init a cc ins with ccKey["+i+"]");if(0<x.storedKeys.length&&!i)throw So(Ke.CC_STORED_KEYS_NEED_CCKEY,Eo("ccClassKey["+o+"]"));var O=mo(u),N=yo._state[U]||{},D=Object.assign({},d,N,O),I=go(c.state=D),A=_o[o].connectedState,R=go(m),T={},M=Zr(c,O,u,!0),k={};R.forEach(function(e){return k[e]=Le(c,e,!1)});var W=Le(c,u),F=Le(c,pe),L=Zr(c,mo(pe),pe,!1),j=$e(go(d),vo[S]),P=$o(ho,u);P.includes(o)||P.push(o);function z(e,t){Pn(e,t,c)}function V(e,t,n,r,o,a){z(t,{calledBy:n,module:e,renderKey:o,delay:a,reactCallback:r})}function q(e,t,n,r,o){V(e,t,me,n,r,o)}function H(e,t,n,r,o){"string"==typeof e?q(e,t,n,r,o):V(S,e,ve,t,n,r)}function B(e,t,n){V(S,c.state,he,e,t,n)}var G=[],Y=[],X={effectItems:G,eid_effectReturnCb_:{},effectPropsItems:Y,eid_effectPropsReturnCb_:{}},J={},Q=oo(c.props),Z=((n={type:s,isSingle:r,module:u,ccClassKey:o,ccKey:i,ccUniqueKey:U,renderCount:1,initTime:Date.now(),watchedKeys:_,privStateKeys:j,connect:m,connectedModules:R,__$$onEvents:[],__$$hasModuleState:0<vo[u].length,__$$renderStatus:ge,__$$curWaKeys:{},__$$compareWaKeys:{},__$$compareWaKeyCount:0,__$$nextCompareWaKeys:{},__$$nextCompareWaKeyCount:0,__$$curConnWaKeys:{},__$$compareConnWaKeys:{},__$$compareConnWaKeyCount:{},__$$nextCompareConnWaKeys:{},__$$nextCompareConnWaKeyCount:{},persistStoredKeys:x.persistStoredKeys,storedKeys:x.storedKeys,renderKey:x.renderKey,tag:x.tag,prevProps:Q,props:Q,mapped:{},prevState:D,state:D,moduleState:M,mstate:O,globalState:L,connectedState:T,extra:{},staticExtra:{},refComputed:{},refComputedValue:{},refComputedOri:{},moduleComputed:W,globalComputed:F,connectedComputed:k,moduleReducer:{},connectedReducer:{},reducer:{}}).mapped={},n.stateKeys=I,n.computedDep={},n.computedRetKeyFns={},n.watchDep={},n.watchRetKeyFns={},n.execute=null,n.effectMeta=X,n.retKey_fnUid_={},n.reactSetState=Oo,n.__boundSetState=w,n.reactForceUpdate=Oo,n.__boundForceUpdate=b,n.setState=H,n.setModuleState=q,n.forceUpdate=B,n.changeState=z,n.refs=J,n.useRef=function(t){return function(e){return J[t]={current:e}}},n.__$$ccSetState=ir(c),n.__$$ccForceUpdate=ur(c),n.__$$settedList=[],n.__$$prevMoStateVer={},n);c.setState=H,c.forceUpdate=B,Z.initState=function(e){return c.__$$isMounted?bo("ctx.initState can only been called before first render period!"):Ee(d)?(c.state=Object.assign({},d,e,N,M),void(Z.prevState=Z.state=c.state)):bo("state "+Se)};var ee=fr(c,!1,!1,S);if(Z.dispatch=ee,1<t&&(Z.lazyDispatch=fr(c,!0,!1,S),Z.silentDispatch=fr(c,!1,!0,S),Z.dispatchLazy=Z.lazyDispatch,Z.dispatchSilent=Z.silentDispatch,Z.invoke=sr(c),Z.lazyInvoke=sr(c,{isLazy:!0}),Z.silentInvoke=sr(c,{isLazy:!1,isSilent:!0}),Z.invokeLazy=Z.lazyInvoke,Z.invokeSilent=Z.silentInvoke,Z.setGlobalState=function(e,t,n,r){V(pe,e,ve,t,n,r)}),2<t){var te=function(e,t,n,r,o){var a;if("string"==typeof e)return so.bind(null,((a={})[_e]=e,a.type=o,a.val=t,a.delay=r,a.rkey=n,a),c);so({type:"val"},c,e)};Z.sync=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=-1),te(e,t,n,r,"val")},Z.syncBool=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=-1),te(e,t,n,r,"bool")},Z.syncInt=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=-1),te(e,t,n,r,"int")},Z.syncAs=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=-1),te(e,t,n,r,"as")},Z.set=function(e,t,n,r){var o;void 0===n&&(n=""),void 0===r&&(r=-1),so(((o={})[_e]=e,o.type="val",o.val=t,o.delay=r,o.rkey=n,o),c)},Z.setBool=function(e,t,n){var r;void 0===t&&(t=""),void 0===n&&(n=-1),so(((r={})[_e]=e,r.type="bool",r.delay=n,r.rkey=t,r),c)}}if(3<t&&(Z.emit=function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Gr.apply(Qr,[Jr(e)].concat(n))},Z.off=function(e,t){var n=void 0===t?{}:t,r=n.module,o=n.ccClassKey,a=n.ccUniqueKey,c=void 0===a?U:a,i=Jr(e);Yr(i.name,{module:r,ccClassKey:o,ccUniqueKey:c,identity:i.identity})},Z.on=function(e,t){var n=Jr(e),r=n.identity;Br(S,o,U,n.name,void 0===r?null:r,t)}),4<t){Z.execute=function(e){return Z.execute=e},Z.watch=function(a){return function(e,t,n,r,o){Tt(Ce,{type:"watch",refCtx:a,stateKeys:a.stateKeys,retKeyFns:a.watchRetKeyFns,module:a.module,connect:a.connect,dep:a.watchDep},e,t,n,r,o)}}(Z),Z.computed=to(Z),Z.lazyComputed=to(Z,!0);var ne=function(u,s){return function(e,t,n,r){if(void 0===n&&(n=!0),void 0===r&&(r=!0),"function"!=typeof e)throw Error(No("first")+" function");var o=t,a=s?n:r;if(null!=t&&!Array.isArray(t))throw Error(No("second")+" one of them(array, null, undefined)");var c=null;!s&&o&&(c=[],o.forEach(function(e){var t;t=e.includes("/")?e:S+"/"+e,c.push(t),wo(Ko,t)[U]=1}));var i={fn:e,isProp:s,depKeys:o,moDepKeys:c,eId:Symbol("__autoGen_"+ ++Uo+"__"),compare:n,immediate:a};u.push(i)}};Z.effect=ne(G,!1),Z.effectProps=ne(Y,!0)}var re=Z.moduleReducer,oe=Z.connectedReducer,ae=Z.__$$curConnWaKeys,ce=Z.__$$compareConnWaKeys,ie=Z.__$$compareConnWaKeyCount,ue=Z.__$$nextCompareConnWaKeys,se=Z.__$$nextCompareConnWaKeyCount,de=R.slice();de.includes(u)?bo("module["+u+"] is in belongTo and connect both, it will cause redundant render."):de.push(u);var fe=!1;if(de.forEach(function(o){var e;e=o===u?re:wo(oe,o);var t=m[o];if(t){var n=A[o];"-"===t?(fe=!0,ae[o]={},ce[o]={},ie[o]=0,ue[o]={},se[o]=0,n=Zr(c,n,o)):Ao(U,o,t),T[o]=n}(lo[o]||[]).forEach(function(r){e[r]=function(e,t,n){return ee(o+"/"+r,e,t,n)}})}),Z.reducer=po,"-"===_?(c.state=Zr(c,D,u,fe=!0),Z.state=c.state):Ao(U,u,_),Z.__$$autoWatch=fe,Z.getWatchedKeys=function(){return Do(c.ctx||Z)},Z.getConnectWatchedKeys=function(e){return Io(c.ctx||Z,e)},$)c.ctx=Z;else{var le=c.ctx;Object.assign(c.ctx,Z,{__$$curWaKeys:le.__$$curWaKeys,__$$compareWaKeys:le.__$$compareWaKeys,__$$compareWaKeyCount:le.__$$compareWaKeyCount,__$$nextCompareWaKeys:le.__$$nextCompareWaKeys,__$$nextCompareWaKeyCount:le.__$$nextCompareWaKeyCount,__$$curConnWaKeys:le.__$$curConnWaKeys,__$$compareConnWaKeys:le.__$$compareConnWaKeys,__$$compareConnWaKeyCount:le.__$$compareConnWaKeyCount,__$$nextCompareConnWaKeys:le.__$$nextCompareConnWaKeys,__$$nextCompareConnWaKeyCount:le.__$$nextCompareConnWaKeyCount})}}var To=ot.store.getState;var Mo=re,ko=ot.runtimeVar;function Wo(n,e,t){var r=n.ctx;if(n.__$$isUnmounted=!1,r.__$$isBSe=!(n.__$$isMounted=!1),e){if("function"!=typeof e)throw Error("type of setup must be function");var o=e(r)||{};if(!Ee(o))throw Error("type of setup return result must be an plain json object");(!0===t||!0===ko.bindCtxToMethod&&!1!==t)&&Mo(o).forEach(function(e){var t=o[e];"function"==typeof t&&(o[e]=t.bind(n,r))}),r.settings=o}r.__$$isBSe=!1,r.refComputedValue=Ft(r.computedRetKeyFns,r.refComputedOri),r.refComputed=Le(n,null,!0,!0),function(r){var e=r.ctx,t=e.hasComputedFn,n=e.hasWatchFn,o=e.connect,a=e.module,c=le(a),i=re(o),u=e.state;t&&(ln(r,a,u,u,c,!0,!0),i.forEach(function(e){var t=To(e),n=le(e);ln(r,e,t,t,n,!0,!0)})),n&&(fn(r,a,u,u,c,!0,!0),i.forEach(function(e){var t=To(e),n=le(e);fn(r,e,t,t,n,!0,!0)}))}(n)}var Fo=ot.moduleName_stateKeys_,Lo=ot.store,jo=Lo.getPrevState,Po=Lo.getState,zo=Lo.getStateVer,Vo=function(e,t){return X("effect: key["+e+"] is invalid, its "+t+" has not been declared in' store!")};function qo(e,t){function n(a,c,i){return function(e){var t=e.fn,n=e.eId;if(!i||!1!==e.immediate){var r=a[n];r&&r(u);var o=t(u,c);a[n]=o}}}var u=e.ctx,r=u.effectMeta,o=r.effectItems,a=r.eid_effectReturnCb_,c=r.effectPropsItems,i=r.eid_effectPropsReturnCb_,m=u.__$$prevMoStateVer,h=u.__$$settedList,C=u.module;if(t)o.forEach(n(a,!0,!0)),c.forEach(n(i,!0,!0));else{var K=u.prevState,g=e.state,S=[];o.forEach(function(e){var t=e.moDepKeys,n=e.compare,r=e.fn,o=e.eId;if(t){var a=t.length;if(0===a)return;for(var c=function(e){return e.reduce(function(t,e){var n=e.module;return e.keys.forEach(function(e){return t[n+"/"+e]=1}),t},{})}(h),i=!1,u=0;u<a;u++){var s=t[u];if(n){var d=void 0,f=void 0,l=s.split("/"),p=l[0],y=l[1];if(p!==C){var _=jo(p),v=zo(p);if(m[y]===v[y])continue;if(m[y]=v[y],!_){Vo(s,"module["+p+"]");continue}if(!Fo[p].includes(y)){Vo(s,"unmoduledKey["+y+"]");continue}d=Po(p),f=_}else d=g,f=K;if(f[y]!==d[y]){i=!0;break}}else if(c[s]){i=!0;break}}i&&S.push({fn:r,eId:o})}else S.push({fn:r,eId:o})}),S.forEach(n(a,!1,!1));var s=u.prevProps,d=u.props,f=[];c.forEach(function(e){var t=e.depKeys,n=e.fn,r=e.eId;if(t){var o=t.length;if(0===o)return;for(var a=!1,c=0;c<o;c++){var i=t[c];if(s[i]!==d[i]){a=!0;break}}a&&f.push({fn:n,eId:r})}else f.push({fn:n,eId:r})}),f.forEach(n(i,!1,!1)),h.length=0}}var Ho=X,Bo=M,Go=P,Yo=G,Xo=z,Jo=ot.runtimeVar,Qo=ot.ccClassKey_ccClassContext_,Zo=ot.ccUKey_ref_,ea={};function ta(e,t,n,r){function o(){Zo[e]=t,n.push(e)}!function(e){void 0===ea[e]?ea[e]=1:ea[e]+=1}(e),r?setTimeout(o,r):o()}function na(e,t,n,r,o){var a=Qo[n],c=a.ccKeys;Jo.isDebug&&console.log(Yo("register ccKey "+o+" to CC_CONTEXT"),Xo());var i=ot.isHotReloadMode();if(c.includes(o)){var u=function(){throw Bo(Ke.CC_CLASS_INSTANCE_KEY_DUPLICATE,Go("ccClass:"+n+",ccKey:"+o))};if(i){var s=function(e){return void 0===ea[e]?0:ea[e]}(o);if(t&&0<s)throw Bo(Ke.CC_CLASS_INSTANCE_MORE_THAN_ONE,Go("ccClass:"+n));1<s&&u(),Ho("\n        found ccKey["+r+"] duplicated in hot reload mode, please make sure your ccKey is unique manually,\n        "+Go("ccClassKey:"+n+" ccKey:"+r+" ccUniqueKey:"+o)+"\n      "),ta(o,e,c,600)}else u()}else ta(o,e,c);return a}var ra=ot.waKey_uKeyMap_;function oa(t,e,n,r){var o=!1,a=re(t);a.forEach(function(e){2===t[e]&&(o=!0,delete ra[n+"/"+e][r])}),e<a.length&&(o=!0),o&&Kt(n)}function aa(e){var t=e.ctx;if(t.__$$renderStatus=ge,t.__$$autoWatch){var n=t.connectedModules,r=t.connect,o=t.ccUniqueKey,a=t.__$$compareConnWaKeys,c=t.__$$compareConnWaKeyCount;oa(t.__$$compareWaKeys,t.__$$compareWaKeyCount,t.module,o),n.forEach(function(e){"-"===r[e]&&oa(a[e],c[e],e,o)})}}function ca(e){aa(e),e.__$$isMounted=!0,e.__$$isUnmounted=!1;var t=e.ctx,n=t.__$$onEvents;na(e,t.isSingle,t.ccClassKey,t.ccKey,t.ccUniqueKey),0<n.length&&(n.forEach(function(e){return e.fn.apply(void 0,e.args)}),n.length=0),qo(e,!0)}function ia(e){aa(e),qo(e),e.ctx.prevState=e.state}var ua=ot.ccUKey_ref_,sa=ot.ccUKey_handlerKeys_,da=ot.runtimeVar,fa=ot.ccClassKey_ccClassContext_,la=ot.handlerKey_handler_;function pa(e,t){da.isDebug&&console.log(G(t+" unset ref"),z("purple")),delete ua[t];var n=fa[e].ccKeys,r=n.indexOf(t);r<0||n.splice(r,1),function(e){void 0===ea[e]?ea[e]=0:ea[e]-=1}(t);var o=sa[t];o&&o.forEach(function(e){delete la[e]})}var ya=re;function _a(n,r){function e(e){var t=n[e];"function"==typeof t&&t(r)}Object.getOwnPropertySymbols(n).forEach(e),ya(n).forEach(e)}function va(e){e.__$$isUnmounted=!0;var t=e.ctx,n=t.ccUniqueKey,r=t.ccClassKey;if(e.__$$isMounted){var o=t.effectMeta,a=o.eid_effectPropsReturnCb_;_a(o.eid_effectReturnCb_,t),_a(a,t),Xr(n)}pa(r,n)}function ma(e){var t=e.ctx;if(t.__$$renderStatus=E,1!==t.renderCount&&t.__$$autoWatch){t.__$$hasModuleState&&(Object.assign(e.state,t.mstate),e.state=Zr(e,e.state,t.module,!0),t.state=e.state,t.__$$curWaKeys={},t.__$$compareWaKeys=t.__$$nextCompareWaKeys,t.__$$compareWaKeyCount=t.__$$nextCompareWaKeyCount,t.__$$nextCompareWaKeys={},t.__$$nextCompareWaKeyCount=0);var n=t.connect;t.connectedModules.forEach(function(e){"-"===n[e]&&(t.__$$curConnWaKeys[e]={},t.__$$compareConnWaKeys[e]=t.__$$nextCompareConnWaKeys[e],t.__$$compareConnWaKeyCount[e]=t.__$$nextCompareConnWaKeyCount[e],t.__$$nextCompareConnWaKeys[e]={},t.__$$nextCompareConnWaKeyCount[e]=0)})}}var ha=function(e){return"CC("+e+")"},Ca=xe,Ka=ce,ga=we,Sa=ot.runtimeVar,Ea=z,$a=G,wa=function(e){return Error("can not defined setup both in register options and class body --verbose:"+e)};function ba(e,t){var n=void 0===e?{}:e,r=n.module,o=void 0===r?V:r,a=n.state,u=void 0===a?{}:a,c=n.watchedKeys,s=void 0===c?"-":c,i=n.storedKeys,d=void 0===i?[]:i,f=n.setup,l=void 0===f?null:f,p=n.persistStoredKeys,y=n.connect,_=void 0===y?{}:y,v=n.tag,m=n.lite,h=n.isPropsProxy,C=void 0!==h&&h,K=n.isSingle,g=void 0!==K&&K,S=n.renderKeyClasses,E=n.__checkStartUp,$=void 0===E||E,w=n.compareProps,b=void 0===w||w,x=n.__calledBy;void 0===t&&(t="");try{var U=kr(o,t,S,A,Ca(s),d,_,$,x),O=U._module,N=U._ccClassKey,D=U._connect;return function(n){if(n.prototype&&n.prototype.$$attach)throw Error("register a cc class is prohibited!");var e=!1===C?n:I.Component,i=e.$$setup,t=function(c){function e(e,t){var n;try{n=c.call(this,e,t)||this;var r=ga(u),o=Object.assign(n.state||{},r);n.$$attach=n.$$attach.bind(Kr(n));var a=Object.assign({},e,{isSingle:g,module:O,tag:v,state:o,type:A,watchedKeys:s,ccClassKey:N,connect:D,storedKeys:d,persistStoredKeys:p});if(Ro(Kr(n),a,m),n.ctx.reactSetState=pr(Kr(n)),n.ctx.reactForceUpdate=yr(Kr(n)),l&&(n.$$setup||i))throw wa("ccUniqueKey "+n.ctx.ccUniqueKey);C||(n.$$setup&&(n.$$setup=n.$$setup.bind(Kr(n))),Wo(Kr(n),l||n.$$setup||i,!1))}catch(e){Jt(e)}return n}Cr(e,c);var t=e.prototype;return t.shouldComponentUpdate=function(e,t){var n=this.ctx.childRef;if(n&&n.shouldComponentUpdate)return n.shouldComponentUpdate(e,t);if(c.prototype.shouldComponentUpdate)return c.prototype.shouldComponentUpdate.call(this,e,t);var r=!!b&&Ka(this.props,e);return this.state!==t||r},t.$$attach=function(e){var t=this.ctx;if(((t.childRef=e).ctx=t).reactSetState=e.setState.bind(e),t.reactForceUpdate=e.forceUpdate.bind(e),e.setState=t.setState,e.forceUpdate=t.forceUpdate,t.__$$ccSetState=ir(e,this),t.__$$ccForceUpdate=ur(e),e.state||(e.state={}),Object.assign(e.state,this.state),ma(e),e.$$setup&&(e.$$setup=e.$$setup.bind(e)),l&&(e.$$setup||i))throw wa("ccUniqueKey "+t.ccUniqueKey);Wo(e,l||e.$$setup||i,!1)},t.componentDidMount=function(){c.prototype.componentDidMount&&c.prototype.componentDidMount.call(this),ca(this)},t.componentDidUpdate=function(){c.prototype.componentDidUpdate&&c.prototype.componentDidUpdate.call(this),ia(this)},t.componentWillUnmount=function(){c.prototype.componentWillUnmount&&c.prototype.componentWillUnmount.call(this),va(this)},t.render=function(){return this.ctx.prevProps=this.ctx.props,this.ctx.props=this.props,Sa.isDebug&&console.log($a("@@@ render "+ha(N)),Ea()),!1===C?(ma(this),c.prototype.render.call(this)):I.createElement(n,{ctx:this.ctx,$$attach:this.$$attach})},e}(e);return t.displayName=N===B?"CcDispatcher":ha(N),t}}catch(e){Jt(e)}}function xa(e){var t=function(e){function t(){return e.apply(this,arguments)||this}return Cr(t,e),t.prototype.render=function(){return this.props.children||I.createElement("span",{style:{display:"none"}})},t}(I.Component);if(ot.refs[B]){if(!ot.isHotReloadMode())throw Error("CcDispatcher can only be initialize one time");J("hot reload mode, CC_DISPATCHER existed")}var n=e||t;return ba({isSingle:!0,__checkStartUp:!1,__calledBy:"cc"},B)(n)}var Ua=Ee,Oa=re;function Na(e,t){if(!Ua(e))throw Error(t+" "+Se)}function Da(e){if(!Ua(e))throw Error("StartupOption.moduleSingleClass "+Se);!function(t,n){Object.keys(n).forEach(function(e){t[e]=n[e]})}(ot.moduleSingleClass,e)}function Ia(e){if(0<e.length){var o=ot.plugins;o.length=0,Bt.forEach(function(e){return Gt[e].length=0});var a={};e.forEach(function(e){if(o.push(e),!e.install)throw Error("a plugin must export install handler!");var t=e.install(Xt),n=Error("plugin.install must return result:{name:string, options?:object}");if(!t)throw n;var r=t.name;if(!r)throw n;if(a[r])throw Error("pluginName["+r+"] duplicate");a[r]=1}),ot.pluginNameMap=a}}var Aa=function(e){var t=document.querySelector("#"+c);if(!t){(t=document.createElement("div")).id=c;var n=t.style;n.position="fixed",n.left=0,n.top=0,n.display="none",n.zIndex=-888666,document.body.appendChild(t)}r.render(I.createElement(e),t)},Ra=!1;function Ta(e,r){void 0===e&&(e=!1),ne(ot.event_handlers_),ne(ot.ccUKey_handlerKeys_);var o=ot.ccClassKey_ccClassContext_,t=ot.ccUKey_ref_;if(Object.keys(o).forEach(function(e){var t=o[e],n=[];0<r.length&&t.ccKeys.forEach(function(e){r.includes(e)&&n.push(e)}),ne(t.ccKeys,n)}),ne(ot.handlerKey_handler_),ne(t,[B].concat(r)),e){var n=ot.computed,a=ot.watch,c=n._computedValue,i=a._watchDep;re(ot.store._state).forEach(function(e){e!==q&&(c[e]&&(ot.computed._computedDep[e]={retKey_fn_:{},retKey_lazy_:{},stateKey_retKeys_:{},retKey_stateKeys_:{},fnCount:0},Pt(e,n._computedRaw[e])),i[e]&&(i[e]={retKey_fn_:{},retKey_lazy_:{},stateKey_retKeys_:{},retKey_stateKeys_:{},fnCount:0},Ht(e,a._watchRaw[e])))})}}function Ma(){var n=ot.ccUKey_ref_,r=[];return re(n).forEach(function(e){var t=n[e];t&&t.ctx.type===x&&!0!==t.props.__$$regDumb&&!0===t.__$$isMounted&&0==t.__$$isUnmounted&&r.push(e)}),r}function ka(){ne(ot.globalStateKeys);var e=re(ot.moduleName_isConfigured_).concat([V,q,pe,a]);ne(ot.reducer._reducer,e),ne(ot.store._state,e,{}),ne(ot.computed._computedDep,e),ne(ot.computed._computedValue,e),ne(ot.watch._watchDep,e),ne(ot.middlewares),ne(ot.waKey_uKeyMap_),Ue={module:{computed:{},watch:{}},ref:{computed:{},watch:{},effect:{}}};var t=Ma();return Ta(!1,t),t}function Wa(e){void 0===e&&(e=!1),ot.info.latestStartupTime=Date.now();var t=[];return ot.isStartup?ot.isHotReloadMode()?e?(console.warn("attention: make sure [[clearContextIfHot]] been called before app rendered!"),Ra=!0,t=ka()):(Ra?Ra=!1:(function(){if(!ot.refs[B]){var e=xa();Aa(e)}}(),t=Ma(),Ta(ot.reComputed,t)),t):(console.warn("clear failed because of not running under hot reload mode!"),t):(Ra=!0,t)}var Fa=ie,La=we;function ja(e){var t=e.props,n=Fa(t.register),r=n.module,o=n.renderKeyClasses,a=n.tag,c=n.lite,i=n.compareProps,u=void 0===i||i,s=n.setup,d=n.bindCtxToMethod,f=n.watchedKeys,l=void 0===f?"-":f,p=n.connect,y=void 0===p?{}:p,_=n.isSingle,v=n.storedKeys,m=void 0===v?[]:v,h=La(n.state),C=t.ccClassKey,K=t.ccKey,g=t.ccOption,S=void 0===g?{}:g,E=l,$=C,w=y;if(!0!==t.__$$regDumb){var b=kr(r,C,o,x,xe(l),m,y,!0);E=l,$=b._ccClassKey,w=b._connect}Ro(e,{isSingle:_,ccKey:K,connect:w,state:h,module:r,storedKeys:m,watchedKeys:E,tag:a,ccClassKey:$,ccOption:S,type:x},c),e.ctx.reactSetState=pr(e),e.ctx.reactForceUpdate=yr(e),e.__$$compareProps=u,Wo(e,s,d)}var Pa=J,za=ae,Va="";function qa(e,t){var n=void 0===e?{}:e,r=n.store,o=void 0===r?{}:r,a=n.reducer,c=void 0===a?{}:a,i=n.init,u=void 0===i?null:i,s=n.computed,d=void 0===s?{}:s,f=n.watch,l=void 0===f?{}:f,p=n.moduleSingleClass,y=void 0===p?{}:p,_=void 0===t?{}:t,v=_.plugins,m=void 0===v?[]:v,h=_.middlewares,C=void 0===h?[]:h,K=_.isStrict,g=void 0!==K&&K,S=_.isDebug,E=void 0!==S&&S,$=_.errorHandler,w=void 0===$?null:$,b=_.isHot,x=_.bindCtxToMethod,U=void 0!==x&&x,O=_.computedCompare,N=void 0===O||O,D=_.watchCompare,I=void 0===D||D,A=_.watchImmediate,R=void 0!==A&&A,T=_.alwaysGiveState,M=void 0===T||T,k=_.reComputed,W=void 0===k||k;try{throw Error()}catch(e){var F=function(e){function t(e,t){for(var n=0;n<o;n++)if(r[n].includes(e)){a=r[n+t];break}}var n=ot.info,r=e.stack.split("\n"),o=r.length,a="";function c(){return Wa(ot.isHot=!0)}t("startup",2),a||t("runConcent",0);var i=Date.now(),u=[],s=!0;if(Va)if(Va!==a){var d="invalid run api call!(it can only be called once, changing 'call run' line location in HMR will cause this error also, \n    try refresh browser to reload your app to avoid this tip)";if(i-n.latestStartupTime<1e3)throw Error(d);fe()?(u=c(),Va=a):(Q(d),s=!1)}else u=c();else Va=a,n.firstStartupTime=i,n.latestStartupTime=i;return{canStartup:s,ccFragKeys:u}}(e),L=F.ccFragKeys;if(!F.canStartup)return;try{console.log("%c window.name:"+window.name,"color:green;border:1px solid green"),Pa("cc version "+ot.info.version),void 0!==b&&(ot.isHot=b),ot.reComputed=W,ot.errorHandler=w;var j=ot.runtimeVar;if(j.alwaysGiveState=M,j.isStrict=g,j.isDebug=E,j.computedCompare=N,j.watchCompare=I,j.watchImmediate=R,j.bindCtxToMethod=U,!ot.refs[B]){var P=xa();Aa(P)}Da(y),function(e){Na(e,"state"),delete e[H],delete e[q],void 0===e[pe]&&(e[pe]={}),void 0===e[V]&&(e[V]={});for(var t=Oa(e),n=t.length,r=0;r<n;r++){var o=t[r];St(o,e[o])}}(o),function(t){Na(t,"reducer"),void 0===t[V]&&(t[V]={}),void 0===t[pe]&&(t[pe]={}),Oa(t).forEach(function(e){return Ot(e,t[e])})}(c),function(t){Na(t,"computed"),Oa(t).forEach(function(e){return Pt(e,t[e])})}(d),function(t){Na(t,"watch"),Object.keys(t).forEach(function(e){return Ht(e,t[e])})}(l),function(n){if(n){if(!Ua(n))throw Error("init "+Se);Oa(n).forEach(function(t){_t(t,!1);var e=n[t];e&&Promise.resolve().then(e).then(function(e){lr(t)(e)})}),ot.init._init=n}}(u),function(e){if(0<e.length){var t=ot.middlewares;t.length=0,e.forEach(function(e){return t.push(e)})}}(C);var z=function(e){za("CC_CONTEXT",ot,e),za("ccc",ot,e),za("cccc",ot.computed._computedValue,e),za("sss",ot.store._state,e)};window.mcc?setTimeout(function(){z(window.mcc[se()])},1200):z(),ot.isStartup=!0,Ia(m),L.forEach(function(e){var t=ot.ccUKey_ref_[e];va(t),ja(t),ca(t)})}catch(e){if(!w)throw e;w(e)}}}function Ha(e){throw Error("[[run]]: param error, "+e+" "+Se)}var Ba=Ee,Ga=re,Ya=R,Xa=we;function Ja(e,t){var n=ie(e);return delete n.__checkStartUp,delete n.__calledBy,ba(n,t)}var Qa=ce,Za=I.createElement("span",{style:{display:"none"}}),ec=function(r){function e(e,t){var n;return ja(Kr(n=r.call(this,e,t)||this)),n}Cr(e,r);var t=e.prototype;return t.componentDidMount=function(){ca(this)},t.shouldComponentUpdate=function(e,t){var n=!!this.__$$compareProps&&Qa(oo(e),oo(this.props));return this.state!==t||n},t.componentDidUpdate=function(){ia(this)},t.componentWillUnmount=function(){r.prototype.componentWillUnmount&&r.prototype.componentWillUnmount.call(this),va(this)},t.render=function(){var e=this.props;this.ctx.prevProps=this.ctx.props,this.ctx.props=oo(e);var t=e.render,n=t||e.children;if("function"==typeof n){ma(this);var r=e.register,o=void 0===r?{}:r,a=this.ctx;return!0!==e.__$$regDumb&&o.mapProps?(a.mapped=o.mapProps(a)||{},n(a.mapped)||Za):n(a)||Za}if(I.isValidElement(n))throw Error("CcFragment's children can not b a react dom ");return n},e}(I.Component);function tc(e,t){var n=ie(e),r=n.renderKeyClasses,o=n.module,a=n.watchedKeys,c=void 0===a?"-":a,i=n.storedKeys,u=n.render,s=n.connect,d=void 0===s?{}:s,f=xe(c),l=kr(o,t,r,x,f,i,d,!0),p=l._ccClassKey,y=l._connect;function _(t){return function(e){return n.props=e,function(t,e){var n=e.mapProps,r=e.props,o=void 0===r?{}:r,a={__$$regDumb:!0,props:o,ccOption:o.ccOption,ccClassKey:e.ccClassKey,render:function(e){return n?(e.mapped=n(e),I.createElement(t,e.mapped)):I.createElement(t,e)},ccKey:o.ccKey,register:e};return I.createElement(ec,a)}(t,n)}}return n.module=l._module,n.watchedKeys=c,n.ccClassKey=p,n.connect=y,u?_(u):function(e){return _(e)}}var nc=ot.ccUKey_ref_,rc=1;function oc(e,t,n){this.setState=t,this.forceUpdate=t,this.state=e,this.isFirstRendered=!0,this.props=n}function ac(e,t,n,r,o,a,c,i,u,s){var d=n||we(r),f=o.bindCtxToMethod,l=o.watchedKeys,p=void 0===l?"-":l,y=o.storedKeys,_=void 0===y?[]:y,v=o.connect,m=void 0===v?{}:v,h=o.setup,C=o.lite;rc+=1;var K=kr(o.module,s,o.renderKeyClasses,ye,xe(p),_,m,!0),g=K._module,S=K._ccClassKey,E=K._connect,$=e||new oc(a,c,i),w=Object.assign({},o,{module:g,watchedKeys:p,state:d,type:ye,ccClassKey:S,connect:E,ccOption:i.ccOption});$.props=i,Ro($,w,C),$.ctx.reactSetState=pr($),$.ctx.reactForceUpdate=yr($);var b=$.ctx;return b.props=i,b.extra=u,Wo($,h,f),t.current=$.ctx.ccUniqueKey,b.useRef=function(e){var t=I.useRef(null);return b.refs[e]=t},$}function cc(e,t){e.__boundSetState=t,e.__boundForceUpdate=t}var ic="react version is LTE 16.8";function uc(e,t){var n=ie(e),r=n.state,o=void 0===r?{}:r,a=n.props,c=void 0===a?{}:a,i=n.mapProps,u=n.layoutEffect,s=void 0!==u&&u,d=n.extra,f=void 0===d?{}:d,l=I.useState;if(!l)throw Error(ic);function p(e){return ac(e,g,m,o,n,C,K,c,f,t)}var y,_=rc,v=l(_)[0]===_,m=v?we(o):0,h=l(m),C=h[0],K=h[1],g=I.useRef(null);if(v)y=p();else if(y=nc[g.current]){var S=y.ctx;S.prevProps=S.props,y.props=S.props=c,S.extra=f}else y=p();var E=y.ctx,$=s?I.useLayoutEffect:I.useEffect;if($(function(){y.isFirstRendered||ia(y),cc(E,K)}),$(function(){return!1===y.isFirstRendered?p(y):y.isFirstRendered=!1,cc(E,K),ca(y),function(){va(y)}},[]),i){var w=i(E);if(!Ee(w))throw Error("mapProps ret "+Se);E.mapped=w}return ma(y),E}function sc(){throw Error("api doc: cc.setState(module:string, state:object, renderKey:string, delayMs?:number, skipMiddleware?:boolean, throwError?:boolean)")}function dc(e){return ot.store.getState(e)}var fc=ot.computed._computedValue;var lc=ot.ccUKey_ref_,pc=ot.ccClassKey_ccClassContext_;function yc(){var n=[],r=ot.ccUKey_ref_;return re(r).forEach(function(e){var t=r[e];t&&!t.__$$isUnmounted&&n.push(t)}),n}function _c(e,t,n){var r=void 0===n?{}:n,o=r.state,a=r.reducer,c=r.computed,i=r.watch,u=r.init;if(!ot.isStartup)throw Error("cc is not startup yet");yt(e),_t(t,!1);var s=ot.moduleName_stateFn_[t];if(!s)throw Error("target module["+t+"] state must be a function when use cloneModule");var d=s();Object.assign(d,we(o));var f=hr(ot.reducer._reducer[t]||{},e);a&&Object.assign(f,hr(a,e));var l=ot.computed._computedRaw[t]||{};c&&Object.assign(l,c);var p=ot.watch._watchRaw[t]||{};i&&Object.assign(p,i);var y=ot.init._init[t];u&&(y=u);var _={state:d,reducer:f,computed:l,watch:p};y&&(_.init=y),mr(e,_)}function vc(t,e){function r(e,t){var n=t.state,r=t.reducer,o=void 0===r?{}:r,a=t.watch,c=t.computed,i=t.init,u=t.isClassSingle;if(s.store[e])throw Error("run api error: module"+e+" duplicate");s.store[e]=Xa(n),"function"==typeof n&&(ot.moduleName_stateFn_[e]=n),s.reducer[e]=o,a&&(s.watch[e]=a),c&&(s.computed[e]=c),i&&(s.init[e]=i),s.moduleSingleClass[e]=!0===u}void 0===t&&(t={}),void 0===e&&(e={}),Ba(t)||Ha("store"),Ba(e)||Ha("options");var s={store:{},reducer:{},watch:{},computed:{},init:{},moduleSingleClass:{}};Ga(t).forEach(function(e){return r(e,t[e])}),st.forEach(function(e){var t=e.module,n=e.config;J("configure pending module["+t+"]"),r(t,n)}),st.length=0,Ya(s.init)&&(s.init=null),qa(s,e)}function mc(e,t){return Ja({connect:e},t)}function hc(e,t){return tc({connect:e},t)}function Cc(e,o){var a=ie(e);function t(n){var e=a.memo,t=void 0===e||e;function r(){return function(e){a.props=e;var t=uc(a,o);return I.createElement(n,a.mapProps?t.mapped:t)}}return delete a.memo,t&&I.memo?I.memo(r()):r()}"function"==typeof a.state&&(a.state=a.state());var n=a.render;return n?t(n):function(e){return t(e)}}function Kc(e,t,n,r,o){void 0===o&&(o=!1);try{Et().ctx.setGlobalState(e,t,n,r)}catch(e){if(o)throw e;X(e.message)}}function gc(e,t,n,r,o,a){void 0===r&&(r=-1),void 0===a&&(a=!1),void 0===e&&void 0===t&&sc(),"string"!=typeof e&&sc(),Vn(e,t,n,r,o)}function Sc(e,t,n,r){Et().ctx.set(e,t,n,r)}function Ec(e,t){if(!e.includes("/"))throw Error("keyPath must start with module");var n=e.split("/"),r=dc(n[0]);return io(e,t,!1,r,!1).state}function $c(e){return Tc[e].connectedState||{}}function wc(e){return e?fc[e]:fc}function bc(e){if(void 0===e)throw Error("api doc: cc.emit(event:string|{name:string, identity?:string, ctx?:boolean}, ...args)");try{for(var t,n=Et(),r=arguments.length,o=Array(1<r?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];(t=n.ctx).emit.apply(t,[e].concat(o))}catch(e){X(e)}}function xc(e,t){try{Et().ctx.off(e,t)}catch(e){if(t.throwError)throw e;X(e.message)}}function Uc(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];(function(e){var n=[],t=pc[e];return t&&t.ccKeys.forEach(function(e){var t=lc[e];t&&n.push(t)}),n})(e).forEach(function(e){var t;e.__$$isUnmounted||e.ctx.execute&&(t=e.ctx).execute.apply(t,n)})}function Oc(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];yc().forEach(function(e){var t;e.ctx.execute&&(t=e.ctx).execute.apply(t,n)})}function Nc(e,t,n,r){return{fn:e,depKeys:t,compare:n,sort:r||Jc++}}function Dc(e,t,n,r){return{fn:e,depKeys:t,compare:n,lazy:!0,sort:r||Jc++}}function Ic(e,t,n){return void 0===t&&(t=!0),{fn:function(){return e},depKeys:[],compare:t,sort:n||Jc++}}function Ac(e,t,n,r,o){return{fn:e,depKeys:t,compare:n,immediate:r,sort:o||Jc++}}function Rc(e,t,n,r){return{fn:e,depKeys:t,compare:n,immediate:!0,sort:r||Jc++}}var Tc=ot.ccClassKey_ccClassContext_,Mc=Ja,kc=tc,Wc=mr,Fc=dc,Lc=ot.store.getGlobalState,jc=Ut,Pc=ot,zc=xa,Vc=yc,qc=ot.reducer._caller,Hc=Wa,Bc=ec,Gc=u,Yc=ot.store.appendState,Xc=uc,Jc=1,Qc={cloneModule:_c,emit:bc,off:xc,connect:mc,connectDumb:hc,register:Mc,registerDumb:kc,registerHookComp:Cc,configure:Wc,dispatch:jc,run:vc,setGlobalState:Kc,setState:gc,set:Sc,setValue:Ec,getGlobalState:Lc,getState:Fc,getComputed:wc,getConnectedState:$c,ccContext:Pc,createDispatcher:zc,execute:Uc,executeAll:Oc,getRefs:Vc,reducer:qc,clearContextIfHot:Hc,CcFragment:Bc,cst:Gc,appendState:Yc,useConcent:Xc,bindCcToMcc:Zc,defComputed:Nc,defLazyComputed:Dc,defComputedVal:Ic,defWatch:Ac,defWatchImmediate:Rc};function Zc(e){if(!ti)throw Error("current env is not multi concent ins mode");if(ti[e])throw Error("ccNamespace["+e+"] already existed in window.mcc");!function(e){ue=e}(e),ae(e,Qc,ti)}function ei(){var e=ue?window.mcc[ue]:window.cc;if(e&&e.ccContext&&e.ccContext.info){var t=e.ccContext.info.version,n=Pc.info.version;if(t!==n)throw Error("a existed version concent "+t+" is different with current about to import concent "+n+", \n        it may caused by some of your concent-eco-module with older version concent, please reinstall them (concent-*** module)")}}var ti=window.mcc;ti?setTimeout(function(){if(!se())throw Error("detect window.mcc, but user forget call bindCcToMcc in bundle entry");ei()},1e3):(ei(),ae("cc",Qc)),e.cloneModule=_c,e.run=vc,e.connect=mc,e.connectDumb=hc,e.register=Mc,e.registerDumb=kc,e.registerHookComp=Cc,e.configure=Wc,e.setGlobalState=Kc,e.setState=gc,e.set=Sc,e.setValue=Ec,e.getState=Fc,e.getGlobalState=Lc,e.getConnectedState=$c,e.getComputed=wc,e.emit=bc,e.off=xc,e.dispatch=jc,e.ccContext=Pc,e.createDispatcher=zc,e.execute=Uc,e.executeAll=Oc,e.getRefs=Vc,e.reducer=qc,e.clearContextIfHot=Hc,e.CcFragment=Bc,e.cst=Gc,e.appendState=Yc,e.useConcent=Xc,e.defComputed=Nc,e.defLazyComputed=Dc,e.defComputedVal=Ic,e.defWatch=Ac,e.defWatchImmediate=Rc,e.bindCcToMcc=Zc,e.default=Qc,Object.defineProperty(e,"__esModule",{value:!0})});
