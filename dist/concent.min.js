!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["exports","react","react-dom"],t):t(e.concent={},e.React,e.ReactDOM)}(this,function(e,D,r){"use strict";D=D&&D.hasOwnProperty("default")?D.default:D,r=r&&r.hasOwnProperty("default")?r.default:r;var t,n,o,k={},ye="$$global",q="$$default",H="$$cc",V="$$concent_void_module_624313307",a="$$CONCENT_ROUTER",A="$$CcClass",x="$$CcFrag",_e="$$CcHook",m="$$Cc",B="$$Dispatcher",c="__cc_dispatcher_container_designed_by_zzk_qq_is_624313307__",ve=Symbol("__for_sync_param_ccsync__"),U=10,N=11,O=13,M="dispatch",me="setState",he="setModuleState",Ce="forceUpdate",w="invoke",K="sync",h="module",Ke="ref",W="watch",ge={CC_MODULE_NAME_DUPLICATE:1002,CC_MODULE_NOT_FOUND:1012,CC_DISPATCH_STRING_INVALID:1013,CC_DISPATCH_PARAM_INVALID:1014,CC_MODULE_NOT_CONNECTED:1015,CC_CLASS_KEY_DUPLICATE:1100,CC_CLASS_INSTANCE_KEY_DUPLICATE:1200,CC_CLASS_INSTANCE_MORE_THAN_ONE:1205,CC_STORED_KEYS_NEED_CCKEY:1207,CC_REDUCER_NOT_A_FUNCTION:1503},i=((t={})[ge.CC_MODULE_NAME_DUPLICATE]="module name duplicate!",t[ge.CC_MODULE_NOT_FOUND]="module not found!",t[ge.CC_DISPATCH_STRING_INVALID]="when type param is string, it must be one of these format: (fnName)„ÄÅ(moduleName)/(fnName)",t[ge.CC_DISPATCH_PARAM_INVALID]="dispatch param type is invalid, it must be string or object",t[ge.CC_MODULE_NOT_CONNECTED]="module not been connected by ref",t[ge.CC_CLASS_INSTANCE_KEY_DUPLICATE]="props.ccKey duplicate",t[ge.CC_CLASS_INSTANCE_MORE_THAN_ONE]="ccClass is declared as singleton, trying new another one instance is not allowed! ",t[ge.CC_STORED_KEYS_NEED_CCKEY]="you must explicitly specify a ccKey for ccInstance when set storedKeys!",t[ge.CC_CLASS_KEY_DUPLICATE]="ccClassKey duplicate!",t[ge.CC_REDUCER_NOT_A_FUNCTION]="reducer must be a function!",t),u=Object.freeze({MODULE_GLOBAL:ye,MODULE_DEFAULT:q,MODULE_CC:H,MODULE_VOID:V,MODULE_CC_ROUTER:a,CC_CLASS:A,CC_FRAGMENT:x,CC_HOOK:_e,CC_PREFIX:m,CC_DISPATCHER:B,CC_DISPATCHER_BOX:c,CCSYNC_KEY:ve,SIG_FN_START:U,SIG_FN_END:N,SIG_FN_QUIT:12,SIG_FN_ERR:O,SIG_MODULE_CONFIGURED:14,SIG_STATE_CHANGED:15,RENDER_NO_OP:1,RENDER_BY_KEY:2,RENDER_BY_STATE:3,FOR_ONE_INS_FIRSTLY:1,FOR_ALL_INS_OF_A_MOD:2,EFFECT_AVAILABLE:1,EFFECT_STOPPED:0,DISPATCH:M,SET_STATE:me,SET_MODULE_STATE:he,FORCE_UPDATE:Ce,INVOKE:w,SYNC:K,CATE_MODULE:h,CATE_REF:Ke,FN_CU:"computed",FN_WATCH:W,ERR:ge,ERR_MESSAGE:i}),s=((n={})[ye]={},n[q]={},n[H]={},n),d=((o={})[ye]={},o[q]={},o[H]={},o),f={},l={},F={_computedValueOri:d,_computedValue:s,_computedRaw:l,_computedDep:f,getRootComputedValue:function(){return s},getRootComputedDep:function(){return f},getRootComputedRaw:function(){return l}},p={},y={},C={_watchRaw:y,_watchDep:p,getRootWatchDep:function(){return p},getRootWatchRaw:function(){return y}},_={alwaysGiveState:!0,isStrict:!1,isDebug:!1,computedCompare:!0,watchCompare:!0,watchImmediate:!1,bindCtxToMethod:!1},v=Symbol("cuk"),g="1",Se="2",Ee="is not a plain json object!",S="should be an string array or *!",E=console.error;function $(e){return null!=e&&0<te(e).length}function b(e){return!$(e)}function $e(e,t){if(void 0===t&&(t=!1),!e)return!1;var n="object"==typeof e;if(n){var r=Array.isArray(e);return t?r:n&&!r}return!1}function I(e,t){var n="";n="string"==typeof e?e:i[e]||"",t&&(n+=t),n||(n="undefined message for code:"+e);var r=Error(n);return r.code=e,r}function L(e,t,n,r,o,a,c){var i;return(i={})[v]=1,i.needCompute=n,i.fn=r,i.newState=o,i.oldState=a,i.fnCtx=c,i.isLazy=e,i.result=t,i}function R(e,t){return e+"$"+t}function T(e){return e?" --verbose-info: "+e:""}function j(e){return void 0===e&&(e="green"),"color:"+e+";border:1px solid "+e}function P(e){return"%c"+e}var z=function(e){return"------------ CC "+e+" ------------"};function G(e){E(z("WARNING")),e instanceof Error?(E(e.message),E(e.stack)):E(e)}function Y(e){console.log(z("TIP")),console.log("%c"+e,"color:green;border:1px solid green;")}function X(e){if(E(z("WARNING")),E(e),_.isStrict)throw e}function J(e,t,n){void 0===n&&(n={});var r=e[t];return r||(r=e[t]=n),r}function Q(e,t){var n=e[t];return n||(n=e[t]=[]),n}function Z(e){void 0===e&&(e=52);var t=Math.random();return parseInt(t*e)}function ee(t,n,r){if(void 0===n&&(n=[]),Array.isArray(t)){var o=[];n.forEach(function(e){t.includes(e)&&o.push(e)}),t.length=0,o.forEach(function(e){return t.push(e)})}else Object.keys(t).forEach(function(e){n.includes(e)||(r?t[e]=r:delete t[e])})}function te(e){return Object.keys(e)}function ne(e){var t=null;return e&&(e.currentTarget&&e.type?t=e:e.nativeEvent&&e.target&&(e.currentTarget=e.target,t=e)),t}function re(t,n,e){function r(e){e?e[t]=n:window[t]=n}window?r(e):setTimeout(function(){r(e)},3e3)}function oe(e,t){for(var n in e)if(!(n in t))return!0;for(var r in t)if(e[r]!==t[r])return!0;return!1}function we(e,t){var n=[];return e.forEach(function(e){t.includes(e)||n.push(e)}),n}function ae(e){return void 0===e&&(e={}),"string"==typeof e?{module:e}:Object.assign({module:q},e)}var ce="";function ie(){return ce}function ue(){var t=null;return{commit:function(e){t||(t={}),Object.assign(t,e)},getFnCommittedState:function(){return t}}}function se(){var e=!1;return!window||("previewFrame"===window.name||window.__SANDBOX_DATA__||window.BrowserFS)&&(e=!0),e}function de(e){return{payload:null,renderKey:"",delay:-1,module:e,fnName:""}}function fe(e){void 0===e&&(e={});var t="function"==typeof e?e():e;if(!$e(t))throw Error("state "+Ee);return t}function le(e,t){var n=t.split(".");return function e(t,n,r,o){var a=n[o];return r===o?t[a]:e(t[a],n,r,++o)}(e,n,n.length-1,0)}function pe(e){return"-"===e?"*":e}var be={module:{computed:{},watch:{}},ref:{computed:{},watch:{},effect:{}}};function xe(e,t,n){var r=t[e];return{retKey:e,fn:r.fn,depKeys:r.depKeys,isLazy:n}}function Ue(e,t,n,r,o,a,c,i){var u=r[o],s=[];if(!u)return{pickedFns:s,setted:[],changed:[]};var d=u.retKey_fn_,f=u.retKey_lazy_,l=u.stateKey_retKeys_,p=u.fnCount;if(e){var y=te(d),_=te(c),v=_;return"computed"===n?{pickedFns:y.map(function(e){return xe(e,d,f[e])}),setted:_,changed:v}:(y.forEach(function(e){var t=d[e];t.immediate&&s.push({retKey:e,fn:t.fn,depKeys:t.depKeys})}),{pickedFns:s,setted:_,changed:v})}var m=function(n,r){var o=[],a=[];return te(r).forEach(function(e){var t=r[e];void 0!==t&&(a.push(e),t!==n[e]&&o.push(e))}),{changed:o,setted:a}}(a,c),h=m.setted,C=m.changed;if(0===h.length)return{pickedFns:s,setted:[],changed:[]};var K=h.join(",")+"|"+C.join(",")+"|"+o,g=be[t][n],S=i?J(g,i):g,E=S[K];return E?{pickedFns:E.map(function(e){return xe(e,d,f[e])}),setted:h,changed:C}:(function(u,o,s,d,a,f,l){if(0===o.length)return;var e=a["*"];if(e){var c=0<s.length;e.forEach(function(e){var t=d[e],n=t.fn,r=t.compare,o=t.depKeys,a={retKey:e,fn:n,depKeys:o,isLazy:f[e]};r?c&&u.push(a):u.push(a)})}u.length<l&&function(){var i={},e=o.length,t=function(e){var c=o[e],t=a[c];return t?(t.forEach(function(e){if(!i[e]){var t=d[e],n=t.fn,r=t.compare,o=t.depKeys,a=!0;r&&!s.includes(c)&&(a=!1),a&&(i[e]=!0,u.push({retKey:e,fn:n,depKeys:o,isLazy:f[e]}))}}),u.length===l?"break":void 0):"continue"};e:for(var n=0;n<e;n++){var r=t(n);switch(r){case"continue":continue;case"break":break e}}}()}(s,h,C,d,l,f,p),S[K]=s.map(function(e){return e.retKey}),{pickedFns:s,setted:h,changed:C})}function Ne(e,t,n){var r=t[n];return void 0!==r&&(e[n]=r,!0)}function Oe(t,n,e,r){void 0===n&&(n=[]),void 0===e&&(e=!1),void 0===r&&(r=!1);var o={},a=[];if(!$e(t))return{partialState:e?null:o,isStateEmpty:!0,ignoredStateKeys:a};var c=!0,i=te(t);return i.length<n.length?i.forEach(function(e){n.includes(e)?Ne(o,t,e)&&(c=!1):r&&a.push(e)}):(n.forEach(function(e){Ne(o,t,e)&&(c=!1)}),r&&(a=we(i,n))),c&&e&&(o=null),{partialState:o,isStateEmpty:c,ignoredStateKeys:a}}function Ie(e,t,n,r){if(_.alwaysGiveState)return[n,r];var o=t[0];return 1===t.length&&"*"!==o&&o===e?[n[o],r[o]]:[n,r]}function De(e,t,n,r,o,a){var c=Ie(e,t,r,o);return n(c[0],c[1],a)}for(var Ae,Re=function(g,S,E,$,w,e,b,x,U,N,O,I,D){for(var A=0,R=e,M=!0,T=!1,t=function(){var e=w(R,1===++A&&N),t=e.pickedFns,u=e.setted,s=e.changed;if(!t.length)return"break";var n=ue(),d=n.commit,r=n.getFnCommittedState,o=ue(),f=o.commit,a=o.getFnCommittedState;if(t.forEach(function(e){var t=e.retKey,n=e.fn,r=e.depKeys,o=e.isLazy,a={retKey:t,callInfo:U,isFirstCall:N,commit:d,commitCu:f,setted:u,changed:s,stateModule:S,refModule:E,oldState:$,committedState:R,refCtx:g};if("computed"===O)if(o){delete a.commit,delete a.commitCu;var c=Ie(t,r,b,$);D[t]=L(o,null,!0,n,c[0],c[1],a)}else{var i=De(t,r,n,b,$,a);D[t]=L(!1,i)}else!1===De(t,r,n,b,$,a)&&(M=!1)}),R=r()){var c=function(e,t){void 0===t&&(t=!1),R=e,t&&0===te(e).length?R=null:(Object.assign(b,R),Object.assign(x,R),T=!0)},i=Oe(R,"ref"===I?g.privStateKeys:k[S],!0,!0),l=i.partialState,p=i.ignoredStateKeys;if(l)if(O===W){var y=(I===Ke?g.computedDep[g.module]||{}:F._computedDep[S]||{}).stateKey_retKeys_;if(y){var _=[],v={};te(l).forEach(function(e){y[e]?_.push(e):v[e]=l[e]}),0<_.length&&G("these state keys["+_.join(",")+"] will been ignored, cause they are also appeared in computed depKeys,\n              cc suggest you move the logic to computed file."),c(v,!0)}else c(l)}else c(l);if(p.length){var m="they are not "+(I===Ke?"private":"module")+", fn is "+I+" "+O;G("these state keys["+p.join(",")+"] are invalid, "+m)}}var h=a();if(h){var C;if("ref"===I)C="computed"===O?g.computedRetKeyFns:g.watchRetKeyFns;else{var K=F.getRootComputedDep()[S]||{};C=K.retKey_fn_||null}C&&te(h).forEach(function(e){C[e]?D[e]=L(!1,h[e]):G("fnCtx.commitCu commit an invalid retKey["+e+"] for moduleComputed")})}if(10<A)throw Error("fnCtx.commit may goes endless loop, please check your code")};R;){if("break"===t())break}return{shouldCurrentRefUpdate:M,hasDelta:T}},Me=F._computedValue,Te=te,ke={},We=function(n,e,t){var r=void 0===t?{}:t,o=r.refCtx,a=void 0===o?null:o,c=r.callInfo,i=void 0===c?{}:c,u=Fe(n),s=Le(n),d=Me[n],f=F.getRootComputedDep(),l=C.getRootWatchDep(),p=a?a.module:null,y=Object.assign({},u,e),_=Object.assign({},e),v=_;return Re(a,n,p,u,function(e,t){return Ue(t,h,"computed",f,n,u,e)},v,y,_,i,!1,"computed",h,d),Re(a,n,p,u,function(e,t){return Ue(t,h,"watch",l,n,u,e)},v,y,_,i,!1,"watch",h,d),Te(_).forEach(function(e){s[e]=u[e],je(n,e),u[e]=_[e]}),_},Fe=function(e){return ze[e]},Le=function(e){return qe[e]},je=function(e,t){He[e][t]++},Pe=function(){var e;return(e={})[H]={},e[V]={},e[ye]={},e[q]={},e},ze=Pe(),qe=Pe(),He={},Ve={getDispatcher:function(){return ke[B]},isHotReloadMode:function(){return!!Ve.isHot||window&&(window.webpackHotUpdate||se())},runtimeVar:_,isHot:!1,reComputed:!0,isStartup:!1,moduleSingleClass:{},moduleName_stateFn_:{},moduleName_ccClassKeys_:{},moduleName_stateKeys_:k,moduleName_isConfigured_:{},ccClassKey_ccClassContext_:{},globalStateKeys:[],store:{appendState:function(e,t){var n=Q(k,e);te(t).forEach(function(e){n.includes(e)||n.push(e)}),Ve.store.setState(e,t)},_state:ze,_prevState:qe,_stateVer:He,getState:function(e){return e?Fe(e):ze},getPrevState:function(e){return e?Le(e):qe},getStateVer:function(e){return e?He[e]:He},setState:function(e,t,n){return We(e,t,n)},setGlobalState:function(e){return We(ye,e)},getGlobalState:function(){return ze[ye]}},reducer:{_reducer:(Ae={},Ae[ye]={},Ae[H]={},Ae),_caller:{},_fnName_fullFnNames_:{},_module_fnNames_:{}},computed:F,watch:C,refStore:{_state:{},setState:function(e,t){var n=Ve.refStore._state,r=Object.assign({},n[e],t);n[e]=r}},init:{_init:{}},ccUKey_ref_:ke,event_handlers_:{},ccUKey_handlerKeys_:{},handlerKey_handler_:{},waKey_uKeyMap_:{},refs:ke,info:{packageLoadTime:Date.now(),firstStartupTime:"",latestStartupTime:"",version:"2.2.7",author:"fantasticsoul",emails:["624313307@qq.com","zhongzhengkai@gmail.com"],tag:"yuna"},fragmentNameCount:0,featureStr_classKey_:{},userClassKey_featureStr_:{},errorHandler:null,middlewares:[],plugins:[],pluginNameMap:{}},Be=localStorage.length,Ge=Ve.refStore._state,Ye=0;Ye<Be;Ye++){var Xe=localStorage.key(Ye);if(Xe.startsWith("CCSS_"))try{Ge[Xe.substr(5)]=JSON.parse(localStorage.getItem(Xe))}catch(e){console.error(e)}}var Je=[],Qe=function(e){return e.toLowerCase()===H},Ze=function(e){return/^[\$\#\&a-zA-Z0-9_-]+$/.test(e)},et=T,tt=I;function nt(e){if(!Ze(e))throw Error("module["+e+"] writing is invalid!");if(Qe(e))throw Error("'$$cc' is a built-in module name for concent")}function rt(e,t,n){void 0===t&&(t=!0),void 0===n&&(n="");var r=n||"module["+e+"]",o=Ve.store._state;if(nt(e),e!==ye)if(t){if($(o[e]))throw tt(ge.CC_MODULE_NAME_DUPLICATE,et(r))}else if(!o[e])throw tt(ge.CC_MODULE_NOT_FOUND,et(r))}function ot(t,e){var n=Array.isArray(e);if(!n&&"*"!==e)throw Error("storedKeys type err, "+S);n&&e.forEach(function(e){if(t.includes(e))throw Error("the item["+e+"] of storedKeys is not a module state key!")})}var at={},ct=function(e,t,n){if(e.code!==ge.CC_MODULE_NAME_DUPLICATE||!Ve.isHotReloadMode())throw e;var r=function(e){e||(e="");for(var t=e.split("\n"),n=t.length,o="",a=0;a<n;a++)if(t[a].includes(".checkModuleNameAndState")){!function(){var e=t[a+3].split(":"),n=e.length-1,r=[];e.forEach(function(e,t){t!==n&&r.push(e)}),o=r.join(":")}();break}return o}(e.stack),o=n+"|--link--|"+t,a=at[o];if(a){if(r!==a)throw e}else at[o]=r},it={};function ut(e){it[e]={}}var st=Ve.waKey_uKeyMap_;function dt(n,e,t){void 0===t&&(t=!0),ut(n);var r=n===V?{}:e;try{!function(e,t,n){if(rt(e,n),!$e(t))throw Error("module["+e+"]'s state "+Ee)}(n,r,t)}catch(e){ct(e,n,"state")}var o=Ve.store,a=o.getState(),c=o.getStateVer();o.getPrevState()[n]=Object.assign({},a[n]=r),c[n]=te(r).reduce(function(e,t){return st[n+"/"+t]={},e[t]=1,e},{});var i=Object.keys(r);if(Ve.moduleName_stateKeys_[n]=i,n===ye){var u=Ve.globalStateKeys;i.forEach(function(e){u.includes(e)||u.push(e)})}}function ft(e,t){void 0===t&&(t=!1);var n=Ve.ccUKey_ref_,r=Ve.moduleName_ccClassKeys_,o=Ve.ccClassKey_ccClassContext_,a=[];if(e){if(!Ve.store._state[e])throw Error("module["+e+"] is not declared in store");var c=r[e];if(c&&0!==c.length){var i=c[0],u=o[i];if(!u)throw Error("no ccClassContext found for ccClassKey "+i+"!");a=u.ccKeys}if(e===q&&(a=a.filter(function(e){return!e.startsWith(x)})),0===a.length){if(!1!==t){throw Error("[[pickOneRef]]: no ref found for module["+e+"]!,if this message doesn't matter, you can ignore it")}a=[B]}}else a=[B];var s=n[a[0]];if(!s)throw Error("cc found no ref!");return s}var lt=R,pt=G,yt=function(){return Promise.resolve()};function _t(e,t,n,r,o){void 0===n&&(n="");var a=void 0===o?{}:o,c=a.ccClassKey,i=a.ccKey,u=a.throwError,s=a.refModule,d=void 0===s?"":s;if(void 0===e&&void 0===t)throw Error("params type error");var f,l="",p="";try{if(c&&i){var y=lt(c,i),_=Ve.refs[y];if(!_)return pt("no ref found for ccUniqueKey:"+y+"!"),yt();f=_.ctx.dispatch}else{if("string"==typeof e)if(e.includes("/")){var v=e.split("/");l=v[0],p=v[1]}else p=e;var m;if(!(m=l&&"*"!==l?ft(l):d?ft(d):ft()))return pt("no ref found"),yt();f=m.ctx.dispatch}if("*"!==l)return f(e,t,n,r);var h=Ve.reducer._fnName_fullFnNames_[p];if(!h)return;var C=[];return h.forEach(function(e){C.push(f(e,t,n,r))}),Promise.all(C)}catch(e){if(u)throw e;return pt(e.message),yt()}}function vt(e,t,n,r,o){return _t(e,t,n,r,o)}function mt(a,e){void 0===e&&(e={});var t="module["+a+"] reducer";if(!$e(e))throw Error(t+" "+Ee);rt(a,!1,t+" is invalid");var n=Ve.reducer,r=n._reducer,o=n._caller,c=n._fnName_fullFnNames_,i=n._module_fnNames_,u=Object.assign({},e);r[a]=u;var s=J(o,a),d=Q(i,a);u.setState||(u.setState=function(e){return e}),te(u).forEach(function(e){d.includes(e)||d.push(e);var r=a+"/"+e,t=Q(c,e);t.includes(r)||t.push(r),s[e]=function(e,t,n){return vt(r,e,t,n)};var o=u[e];if("function"!=typeof o)throw Error("reducer key["+e+"] 's value is not a function");var n=o;o.__fnName&&(u[e]=n=function(e,t,n){return o(e,t,n)}),n.__fnName=e,n.__stateModule=a,n.__ctName=o.__ctName||o.constructor.name})}var ht=0,Ct=["a","A","b","B","c","C","d","D","e","E","f","F","g","G","h","H","i","I","j","J","k","K","l","L","m","M","n","N","o","O","p","P","q","Q","r","R","s","S","t","T","u","U","v","V","w","W","x","X","y","Y","z","Z"];function Kt(e){return ht++,(e||function(e){void 0===e&&(e=6);for(var t="",n=0;n<e;n++)t+=Ct[Z()];return t}())+"_"+ht}var gt=Ve.moduleName_stateKeys_,St=Ve.runtimeVar;function Et(e,t,n,r,o,a,c){var i=t.refCtx,u=t.type;if(e!==Ke||i.__$$isBSe){if(n){var s,d,f,l=typeof n;if("string"==l)s=$e(r)?((d={})[n]=r,d):((f={})[n]={fn:r,depKeys:o,compare:a,immediate:c},f);else if($e(n))s=n;else if("function"==l&&!$e(s=n(i)))throw Error("type of "+u+" callback result must be an object");s?function(x,U,N){var e=St.computedCompare,t=St.watchCompare,O=St.watchImmediate,I="computed"===U.type?e:t,D=U.module;te(N).forEach(function(c){var e=N[c],t=typeof e,n=e;if("function"==t&&(n={fn:e}),$e(n)){var r=n,o=r.fn,a=r.depKeys,i=r.immediate,u=void 0===i?O:i,s=r.compare,d=void 0===s?I:s,f=r.lazy,l=Kt("mark");if("*"===a){var p=bt(U,D,c),y=p.isStateKey,_=p.stateKey;if(!y)throw Error("retKey["+c+"] is not a state key of module["+D+"]");$t(x,U,l,_),wt(x,U,D,_,o,a,u,d,f)}else{if(a&&!Array.isArray(a))throw Error("depKeys must an string array or *");if(a&&0!==a.length){var v="",m=c;if(c.includes("/")){var h=c.split("/"),C=h[0],K=h[1];v=C,m=K}$t(x,U,l,m);var g={};a.forEach(function(e){var t=bt(U,D,e),n=t.isStateKey,r=t.stateKey,o=t.module;if(v&&o!==v)throw Error("including slash both in retKey["+c+"] and depKey["+e+"] founded, but their module is different");var a=Q(g,o);if(!n)throw Error("depKey["+e+"] invalid, module["+o+"] doesn't include its stateKey["+r+"]");a.push(r)}),te(g).forEach(function(e){wt(x,U,e,m,o,g[e],u,d,f)})}else{var S=bt(U,D,c),E=S.isStateKey,$=S.stateKey,w=S.module,b=[];!a&&E&&(b=[$]),$t(x,U,l,$),wt(x,U,w,$,o,b,u,d,f)}}}else G("retKey["+c+"] item type error")})}(e,t,s):G(e+" "+u+" param type error")}}else G(e+" "+u+" must be been called in setup block")}function $t(e,t,n,r){if(e===Ke){var o=t.refCtx,a=o.retKey_fnUid_,c=t.type,i=c+"_"+r;if(a[i])throw Error("ccUKey["+o.ccUniqueKey+"], retKey["+r+"] duplicate in ref "+c);a[i]=n}}function wt(e,t,n,r,o,a,c,i,u){var s=J(t.dep,n,{retKey_fn_:{},retKey_lazy_:{},stateKey_retKeys_:{},fnCount:0}),d=s.retKey_fn_,f=s.stateKey_retKeys_,l=s.retKey_lazy_,p={fn:o,immediate:c,compare:i,depKeys:a};d[r]?e!==Ke&&(d[r]=p,l[r]=t.isLazyComputed||u):(d[r]=p,l[r]=t.isLazyComputed||u,s.fnCount++);var y=a;"*"===a&&(y=["*"]),e===Ke&&(t.retKeyFns[r]=d[r]);var _=t.refCtx;_&&("computed"===t.type?_.hasComputedFn=!0:_.hasWatchFn=!0),y.forEach(function(e){var t=Q(f,e);t.includes(r)||t.push(r)})}function bt(e,t,n){var r,o=t,a=n;if(n.includes("/")){var c=n.split("/"),i=c[0];i&&(o=i),a=c[1]}if(o===e.module)r=e.stateKeys;else{if(!(r=gt[o]))throw I(ge.CC_MODULE_NOT_FOUND,T("module["+o+"]"));if(!e.connect[o])throw I(ge.CC_MODULE_NOT_CONNECTED,T("module["+o+"], stateKey["+a+"]"))}return{isStateKey:r.includes(a),stateKey:a,module:o}}function xt(e,o){var t={};return te(e).forEach(function(r){o[r]=L(),Object.defineProperty(t,r,{get:function(){var e=o[r]||{},t=e.isLazy;if(!t)return e.result;if(t&&e.needCompute){var n=(0,e.fn)(e.newState,e.oldState,e.fnCtx);e.result=n,e.needCompute=!1}return e.result},set:function(e){var t=o[r];e[v]?e.isLazy?(t.isLazy=!0,t.needCompute=!0,t.newState=e.newState,t.oldState=e.oldState,t.fn=e.fn,t.fnCtx=e.fnCtx):(t.isLazy=!1,t.result=e.result):G("computed value can not been changed manually")}})}),t}var Ut=J,Nt=$e;function Ot(n,e){if(e){var t="module["+n+"] computed";if(!Nt(e))throw Error(t+" "+Ee);rt(n,!1,t+" is invalid");var r=Ve.computed,o=Ve.store.getState(),a=r.getRootComputedValue(),c=r.getRootComputedDep();r.getRootComputedRaw()[n]=e;var i=o[n];Et(h,{module:n,stateKeys:te(i),dep:c},e);var u=Ve.getDispatcher(),s=Object.assign({},i),d=Ut(r._computedValueOri,n);a[n]=xt(e,d);var f=a[n];Re(u&&u.ctx,n,u&&u.ctx.module,i,function(e,t){return Ue(t,h,"computed",c,n,i,e)},i,i,s,de(n),!0,"computed",h,f)}}var It=$e,Dt=J,At=te;function Rt(n,e,t){if(void 0===t&&(t=!1),e){var r="module["+n+"] watch";if(!It(e))throw Error(r+" "+Ee);rt(n,!1,r+" is invalid");var o=Ve.watch.getRootWatchDep(),a=Ve.watch.getRootWatchRaw(),c=Ve.computed.getRootComputedValue();if(t){var i=a[n];i?Object.assign(i,e):a[n]=e}else a[n]=e;var u=(0,Ve.store.getState)(n);Et(h,{module:n,stateKeys:At(u),dep:o},e);var s=Ve.getDispatcher(),d=Object.assign({},u),f=Dt(c,n);Re(s&&s.ctx,n,s&&s.ctx.module,u,function(e,t){return Ue(t,h,"watch",o,n,u,e)},u,u,d,de(n),!0,"watch",h,f)}}var Mt=[U,N,12,O,14,15],Tt={};function kt(t,n){Tt[t].forEach(function(e){e({sig:t,payload:n})})}function Wt(e,t){function n(e,t){var n=Tt[e];n?n.push(t):console.warn("invalid sig["+e+"]")}Array.isArray(e)?e.forEach(function(e){n(e,t)}):n(e,t)}Mt.forEach(function(e){return Tt[e]=[]});var Ft=function(e){if(!Ve.errorHandler)throw e;Ve.errorHandler(e)},Lt=0,jt={},Pt={},zt={},qt={};function Ht(){return++Lt}function Vt(e,t,n,r){if(n){var o=r[e];o||(o=r[e]={});var a=o[t];a?Object.assign(a,n):o[t]=n}}function Bt(e,t,n){Vt(e,t,n,jt)}function Gt(e,t,n){return Bt(e,t,n),function(e){var t=function(e){return jt[e]}(e),n=[];return te(t).forEach(function(e){n.push({module:e,state:t[e]})}),n}(e)}function Yt(e){delete jt[e]}var Xt={},Jt=function(e,t,n){void 0===n&&(n=1e3);var r=Xt[t];r&&clearTimeout(r),Xt[t]=setTimeout(function(){delete Xt[t],e()},n)};function Qt(e,n,r,t,o,a,c){if(void 0===c&&(c=!1),!e.hasWatchFn)return!0;var i=Object.assign({},t),u=e.watchDep,s=e.module,d=e.ccUniqueKey,f=e.refComputed,l=Object.assign({},r,t),p=Re(e,n,s,r,function(e,t){return Ue(t,"ref","watch",u,n,r,e,d)},t,l,i,o,a,"watch",Ke,f),y=p.shouldCurrentRefUpdate;return c&&p.hasDelta&&Object.assign(t,i),y}function Zt(e,n,r,t,o,a,c){void 0===a&&(a=!1),void 0===c&&(c=!1);var i=Object.assign({},t);if(!e.hasComputedFn)return i;var u=e.computedDep,s=e.module,d=e.refComputed,f=e.ccUniqueKey,l=Object.assign({},r,t);return Re(e,n,s,r,function(e,t){return Ue(t,Ke,"computed",u,n,r,e,f)},t,l,i,o,a,"computed",Ke,d),c&&Object.assign(t,i),i}var en=te,tn=Ve.ccUKey_ref_,nn=Ve.waKey_uKeyMap_;function rn(o,e,a,c){var t=en(e),n=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=[]),e+"/"+t.sort().join(",")+"/"+n+"/"+("*"===r?"*":r.sort().join(","))}(o,t,a,c),r=function(e,t){return it[e][t]}(o,n);if(r)return{sharedStateKeys:t,result:r};var i={};t.forEach(function(e){Object.assign(i,nn[o+"/"+e])});function u(e,t){e?f.push(t):l.push(t)}function s(e,t){var n=e.ctx,r=n.ccClassKey;if(a){var o=n.renderKey===a;"*"===c?o&&u(t,e):c.includes(r)?o&&u(t,e):u(t,e)}else u(t,e)}var d=en(i),f=[],l=[];d.forEach(function(e){var t=tn[e];if(t){var n=t.ctx,r=!!n.connect[o];n.module===o&&s(t,!0),r&&s(t,!1)}});var p={belong:f,connect:l};return function(e,t,n){it[e][t]=n}(o,n,p),{sharedStateKeys:t,result:p}}var on=$e,an=G,cn=$,un=function(e,t){return e+"/"+Object.keys(t).sort().join("|")},sn=te,dn=1,fn=2,ln=Ce,pn=me,yn=he,_n=w,vn=K,mn=15,hn=1,Cn=2,Kn=3,gn=Ve.store,Sn=gn.setState,En=gn.getPrevState,$n=Ve.middlewares,wn=Ve.ccClassKey_ccClassContext_,bn=Ve.refStore,xn=Ve.moduleName_stateKeys_;function Un(e,t,n){var r=void 0===t?{}:t,o=r.module,a=r.skipMiddleware,c=void 0!==a&&a,i=r.payload,u=r.reactCallback,s=r.type,d=r.calledBy,f=void 0===d?pn:d,l=r.fnName,p=void 0===l?"":l,y=r.renderKey,_=void 0===y?"":y,v=r.delay,m=void 0===v?-1:v;if(void 0!==e)if(on(e)){var h=n.ctx,C=h.module,K=h.ccUniqueKey,g=h.ccKey,S=function(e,t){return e===t?dn:fn}(o,C),E={payload:i,renderKey:_,ccKey:g,module:o,fnName:p},$=function(e,t,n){var r=Oe(t,xn[e],!0).partialState;if(r){var o=Sn(e,r,n);return Object.assign(r,o),r}return r}(o,e,{refCtx:S===dn?n.ctx:null,callInfo:E});Object.assign(e,$),Nn(n,E,_,f,e,S,u,function(e,t){e===hn&&!$||kt(mn,{committedState:t,sharedState:$,module:o,type:function(e,t){return[ln,pn,yn,_n,vn].includes(e)?"ccApi/"+e:"dispatch/"+t}(f,s),ccUniqueKey:K,renderKey:_}),$&&function(e,t,n,r,o,a,c){var i=function(){!function(r,e,o,t,a,n){if(!o)return;var c=e.ctx,i=c.ccUniqueKey,u=t===dn,s=rn(a,o,n,wn[c.ccClassKey].renderKeyClasses),d=s.sharedStateKeys,f=s.result,l=f.connect;f.belong.forEach(function(e){u&&e.ccUniqueKey===i||Nn(e,r,null,"broadcastState",o,dn)});var p=En(a);l.forEach(function(e){if(!0!==e.__$$isUnmounted){var t=e.ctx;Zt(t,a,p,o,r);var n=Qt(t,a,p,o,r);t.__$$settedList.push({module:a,keys:d}),n&&(t.__$$reInjectConnObState(a),t.__$$ccForceUpdate())}})}(e,t,n,r,o,a)};if(0<c){var u=un(t.ctx.ccUniqueKey,n);Jt(i,u,c)}else i()}(E,n,$,S,o,_,m)},c,{calledBy:f,type:s,payload:i,renderKey:_,delay:m,ccKey:g,ccUniqueKey:K,committedState:e,refModule:C,module:o,fnName:p,sharedState:$})}else an("your committed state "+Ee)}function Nn(e,t,n,r,o,a,c,i,u,s){var d=e.state,f=e.ctx;if(!0===e.__$$isUnmounted||a!==dn||r!==ln&&!cn(o))return c&&c(d),i&&i(hn,o);var l=f.module,p=f.storedKeys,y=f.ccUniqueKey,_=Kn;if(n&&(_=Cn,f.renderKey!==n))return i&&i(hn,o);if(0<p.length){var v=Oe(o,p),m=v.partialState;if(!v.isStateEmpty){if(!0===f.persistStoredKeys){var h=Oe(d,p),C=Object.assign({},h.partialState,m);localStorage.setItem("CCSS_"+y,JSON.stringify(C))}bn.setState(y,m)}}function K(){f.__$$settedList.push({module:l,keys:sn(g)}),f.__$$ccSetState(g,c,S)}var g=Zt(f,l,d,o,t),S=Qt(f,l,d,g,t,!1,!0);i?(s.state=g,function(e,n,r){if(!0!==e){var o=$n.length;if(0<o){var a=0;!function e(){if(a===o)r();else{var t=$n[a];a++,"function"==typeof t?t(n,e):(an("found one middleware is not a function"),e())}}()}else r()}else r()}(u,s,function(){K(),i(_,g)})):K()}function On(e,t,n,r,o){void 0===r&&(r=-1);try{ft(e).ctx.changeState(t,{ccKey:"[[top api:setState]]",module:e,renderKey:n,delay:r,skipMiddleware:o})}catch(e){X(e)}}var In=G,Dn=$e,An=te,Rn=Ve.store,Mn=Rn.getState,Tn=Rn.setState,kn=Ve.reducer._reducer,Wn=Ve.computed._computedValue,Fn=I,Ln=T;function jn(e,t){void 0===t&&(t=!0);try{return rt(e,!1,"module["+e+"] is not configured in store"),!0}catch(e){return function(e,t){if(void 0===t&&(t=!0),t)throw e;qn(e)}(e,t),!1}}function Pn(o,a){return function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e?a(e):o.apply(void 0,n)}}function zn(e,t,n,r){var o;return!0===e?(function(e){zt[e]=!0}(o=Ht()),r[o]=1):r[o=t||Ht()]||(r[o]=1),{_chainId:o,_oriChainId:n||o}}function qn(e,t){e&&(t?t(e):(In(e),Ve.errorHandler&&Ve.errorHandler(e)))}function Hn(e,t,n){return function(r,o,a,c){return new Promise(function(e,t){var n=Object.assign(a,{__innerCb:Pn(e,t)});r(o,n,c)}).catch(Ft)}(Xn,e,t,n)}function Vn(e,t,n){return Hn(e,{callerRef:t.callerRef,context:!0,module:t.module,calledBy:t.calledBy,fnName:e.name,delay:t.delay,renderKey:t.renderKey,chainId:t.chainId,oriChainId:t.oriChainId,chainId_depth_:t.chainId_depth_,isSilent:t.isSilent},n)}function Bn(a,c){return function(e,t,n){var r=a.ctx;if(c){var o=Object.assign({},r.state,e);c.state=o}n?(r.renderCount+=1,r.reactSetState(e,t)):(Object.assign(a.state,e),r.state=a.state)}}function Gn(n){return function(e){var t=n.ctx;t.renderCount+=1,t.reactForceUpdate(e)}}function Yn(h,e){var t=void 0===e?{}:e,C=t.chainId,K=t.oriChainId,g=t.isLazy,n=t.delay,S=void 0===n?-1:n,r=t.isSilent,E=void 0!==r&&r,o=t.chainId_depth_,$=void 0===o?{}:o;return function(e,t,n,r){var o=g,a=E,c="",i=null!=r?r:S;if(Dn(n)){var u=n.lazy,s=n.silent,d=n.renderKey,f=n.delay;void 0!==u&&(o=u),void 0!==s&&(a=s),void 0!==d&&(c=d),void 0!==f&&(i=f)}else c=n;var l,p,y=zn(o,C,K,$),_=typeof e,v={callerRef:h,calledBy:w,module:h.ctx.module,isSilent:a,chainId:y._chainId,oriChainId:y._oriChainId,chainId_depth_:$,delay:i,renderKey:c},m=Error("param type error, correct usage: invoke(userFn:function, ...args:any[]) or invoke(option:[module:string, fn:function], ...args:any[])");if("function"==_)return e.__fnName&&(e.name=e.__fnName),Vn(e,v,t);if("object"!=_)throw m;if(p=Array.isArray(e)?(l=e[1],e[0]):(l=e.fn,e.module),"function"!=typeof l)throw m;return p&&(v.module=p),Vn(l,v,t)}}function Xn(l,e,p){var y=e.callerRef,_=y.ctx.module,t=e.module,v=void 0===t?_:t,n=e.context,m=void 0!==n&&n,h=e.__innerCb,C=e.type,K=e.calledBy,g=e.fnName,r=e.delay,S=void 0===r?-1:r,E=e.renderKey,$=e.chainId,w=e.oriChainId,b=e.chainId_depth_,x=e.isSilent;!function(e,t,n,r){var o=n;jn(e,!1)?(e!==t&&n&&(In(function(e,t){return"param module["+e+"] must equal current ref's module["+t+"] when pass param reactCallback, or it will never been triggered! "}(e,t)),o=null),r(null,o)):r(Error("inputModule:"+e+" invalid"),null)}(v,_,e.cb,function(e,r){if(e)return qn(e,h);var o,t=Mn(v),n={};if(o=$===w&&1===b[$],m){b[$]=b[$]+1;var a=Jn(y,!1,x,v,E,S,$,w,b),c=Jn(y,!1,!0,v,E,S,$,w,b),i=Jn(y,!0,x,v,E,S,$,w,b),u=Yn(y,{delay:S,chainId:$,oriChainId:w,chainId_depth_:b}),s=Yn(y,{isLazy:!0,delay:S,oriChainId:w,chainId_depth_:b}),d=Yn(y,{isLazy:!1,delay:S,isSilent:!0,oriChainId:w,chainId_depth_:b}),f=function(e){return qt[e]}($)||{};n={module:v,callerModule:_,committedStateMap:f,committedState:f[v]||{},invoke:u,lazyInvoke:s,silentInvoke:d,invokeLazy:s,invokeSilent:d,dispatch:a,lazyDispatch:i,silentDispatch:c,dispatchLazy:i,dispatchSilent:c,rootState:Mn(),globalState:Mn(ye),moduleState:t,moduleComputed:Wn[v]||{},setState:function(e){return a("setState",e,{silent:x,renderKey:E,delay:S})},refCtx:y.ctx}}!1===x&&kt(U,{isSourceCall:o,calledBy:K,module:v,chainId:$,fn:l}),new Promise(function(e){return e(l(p,t,n))}).then(function(e){b[$]=b[$]-1;var t=1===b[$];!function(e,t,n){Vt(e,t,n,qt)}($,v,e);var n=[];!1===x&&(kt(N,{isSourceCall:o,calledBy:K,module:v,chainId:$,fn:l}),!function(e){return!0===zt[e]}($)?n=[{module:v,state:e}]:t?function(e){return!0===Pt[e]}($)||(n=Gt($,v,e),Yt($)):Bt($,v,e)),n.forEach(function(e){e.state&&Un(e.state,{renderKey:E,module:e.module,reactCallback:r,type:C,calledBy:K,fnName:g,delay:S,payload:p},y)}),o&&(Yt($),function(e){delete qt[e]}($)),h&&h(null,e)}).catch(function(e){kt(O,{isSourceCall:o,calledBy:K,module:v,chainId:$,fn:l}),qn(e,h)})})}function Jn(b,x,U,N,O,I,D,A,R){return void 0===O&&(O=""),void 0===I&&(I=-1),void 0===R&&(R={}),function(e,n,t,r){void 0===e&&(e={});var o=x,a=U,c="",i=r||I;if(Dn(t)){c=O;var u=t.lazy,s=t.silent,d=t.renderKey,f=t.delay;void 0!==u&&(o=u),void 0!==s&&(a=s),void 0!==d&&(c=d),void 0!==f&&(i=f)}else c=t||O;function l(){return Yn(b,{chainId:v,oriChainId:m,isLazy:o,chainId_depth_:R})(e,n,c,i)}var p,y,_=zn(o,D,A,R),v=_._chainId,m=_._oriChainId,h=typeof e,C=N;if(h&&"object"==h){if(Array.isArray(h))return l();var K=e.module;K&&(C=K),p=e.type,y=e.cb}else{if("string"!=h&&"function"!=h)return Promise.reject(Fn(ge.CC_DISPATCH_PARAM_INVALID));var g=e;if("function"==h){var S=e.__fnName;if(!S)return l();g=S,1==R[m]&&(C=e.__stateModule)}var E=g.split("").filter(function(e){return"/"===e}).length;if(0===E)p=g;else{if(1!==E)return Promise.reject(Fn(ge.CC_DISPATCH_STRING_INVALID,Ln(g)));var $=g.split("/"),w=$[0];w&&(C=w),p=$[1]}}return"*"===C?_t("*/"+p,n,{silent:a,lazy:o,renderKey:c},i,{refModule:b.ctx.module}):new Promise(function(e,t){!function(e){var t=void 0===e?{}:e,n=t.callerRef,r=t.module,o=t.renderKey,a=t.isSilent,c=t.type,i=t.payload,u=t.cb,s=t.__innerCb,d=t.delay,f=void 0===d?-1:d,l=t.chainId,p=t.oriChainId,y=t.chainId_depth_,_=kn[r];if(!_)return s(Error("no reducerMap found for module:["+r+"]"));var v=_[c];if(!v)return s(Error("no reducer fn found for ["+r+"/"+c+"], is these fn you want:"+Object.keys(_)));Xn(v,{callerRef:n,module:r,type:c,cb:u,context:!0,__innerCb:s,calledBy:M,delay:f,renderKey:o,isSilent:a,chainId:l,oriChainId:p,chainId_depth_:y},i)}({callerRef:b,module:C,type:p,payload:n,cb:y,__innerCb:Pn(e,t),delay:i,renderKey:c,isSilent:a,chainId:v,oriChainId:m,chainId_depth_:R})}).catch(Ft)}}function Qn(a){return function(t){try{On(a,t)}catch(e){var n=Mn(a);if(!n)return In("invalid module "+a);var r=Oe(t,An(n),!1,!0),o=r.ignoredStateKeys;r.isStateEmpty||Tn(a,r.partialState),0<o.length&&In("invalid keys:"+o.join(",")+", their value is undefined or they are not declared in module"+a),Y("no ccInstance found for module["+a+"] currently, cc will just store it, lately ccInstance will pick this state to render")}}}var Zn=function(o){return function(e,t){var n=o.ctx,r=Object.assign({},o.state,e);n.type===_e?(o.state=n.state=r,n.__boundSetState(r),t&&t(r)):(n.state=r,o.__$$isMounted?o.state=r:Object.assign(o.state,e),n.__boundSetState(r,t))}},er=function(r){return function(e){var t=r.ctx;if(t.type===_e){var n=Object.assign({},r.state);t.__boundSetState(n),e&&e(n)}else t.__boundForceUpdate(e)}},tr=$e,nr=fe;function rr(t,e){if(Ve.isStartup){if(!tr(e))throw Error("param config "+Ee);if(t===ye)throw Error("configuring global module is not allowed");var n=e.reducer,r=e.computed,o=e.watch,a=e.init,c=e.isClassSingle,i=nr(e.state);if(n&&!tr(n))throw Error("config.reducer "+Ee);if(dt(t,i,!0),mt(t,n),r&&Ot(t,r),o&&Rt(t,o),Ve.moduleSingleClass[t]=!0===c,a){if("function"!=typeof a)throw Error("init value must be a function!");Promise.resolve().then(a).then(function(e){Qn(t)(e)})}Ve.moduleName_isConfigured_[t]=!0,kt(14,t)}else Je.push({module:t,config:e})}function or(r,o){var a={};return te(r).forEach(function(e){function t(){return n.apply(void 0,arguments)}var n=r[e];t.__fnName=e,t.__stateModule=o,a[e]=t}),a}function ar(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}function cr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var ir=te,ur=$e,sr=Ve.store._state;var dr=b,fr=I,lr=Ve.featureStr_classKey_,pr=Ve.userClassKey_featureStr_,yr=Ve.ccClassKey_ccClassContext_,_r=0;var vr=Ve.moduleName_stateKeys_,mr=Ve.moduleName_ccClassKeys_,hr=Ve.moduleSingleClass,Cr=Ve.ccClassKey_ccClassContext_,Kr=Ve.computed._computedValue,gr=function(e,t){var n=!1,r=!1;if(!Array.isArray(e))return{duplicate:n,notArray:!0,keyElementNotString:r};if(!Array.isArray(t))return{duplicate:n,notArray:!0,keyElementNotString:r};var o=e.length,a=t.length;e:for(var c=0;c<o;c++){var i=e[c];if("string"!=typeof i){r=!0;break e}for(var u=0;u<a;u++){var s=t[u];if("string"!=typeof s){r=!0;break e}if(s===i){n=!0;break e}}}return{duplicate:n,notArray:!1,keyElementNotString:r}},Sr=T;function Er(e,t,n,r,o,a,c,i,u){void 0===e&&(e=q),void 0===a&&(a=[]),!0===i&&function(){if(!0!==Ve.isStartup)throw Error("you must startup cc by call startup method before register ReactClass to cc!")}();var s="cc"===u;rt(e,!1,"module["+e+"] is not configured in store"),ot(vr[e],a);var d=c;Array.isArray(c)?(d={},c.forEach(function(e){return d[e]="-"})):c[ye]||(c[ye]="-");var f,l=function(e,t,n){if(!n)return[];if("*"===n)return vr[e];var r=gr(n,[]);if(r.notArray||r.keyElementNotString)throw Error("watchedKeys "+S+" "+Sr("ccClassKey:"+t));return n}(e,t,o),p=function(o,e,t,a){if(!ur(o))throw Error("CcFragment or CcClass's prop connect type error, it "+Ee);function c(e){return i+" module["+e+"]'s value must be * or array of string"}var i="CcFragment or CcClass's prop connect is invalid,",n=ir(o);n.sort();var u=[],s={};if(n.forEach(function(t){var n=sr[t],r=a+"_"+t+"/";if(void 0===n)throw Error(i+" module["+t+"] not found in cc store ");var e=o[t];if("string"==typeof e){if("*"!==e&&"-"!==e)throw Error(c(t));u.push(r+"*"),ir(n).forEach(function(e){return s[t+"/"+e]=e})}else{if(!Array.isArray(e))throw Error(c(t));e.forEach(function(e){if(!n.hasOwnProperty(e))throw Error(i+" module["+t+"]'s key["+e+"] not declared in cc store ");r+=e+",",s[t+"/"+e]=e}),u.push(r)}}),u.push("|"),"*"===e)u.push(a+"_$"+t+"/*");else{e.sort();var r=t+"/"+e.join(",");u.push(r)}return{featureStr:u.join("@"),connectedModuleKeyMapping:s,connectedModuleNames:n}}(d,l),y=p.connectedModuleKeyMapping,_=p.connectedModuleNames,v=function(e,t,n,r,o,a,c){if(void 0===c&&(c=""),!c){if(t===q&&dr(n)&&0===r.length)return o+"0";var i=o+":"+a,u=lr[i];return u||(lr[i]=u=""+o+ ++_r)}if(c.startsWith(m))throw Error("user can not specify a classKey["+c+"] starts with $$Cc");if(!e&&c.toLowerCase()==B.toLowerCase())throw Error(B+" is cc built-in ccClassKey name, if you want to customize your dispatcher, \n      you can set autoCreateDispatcher=false in StartupOption, and use createDispatcher then.");if(yr[c]){if(pr[c]!==a)throw fr(ge.CC_CLASS_KEY_DUPLICATE,"ccClassKey:["+c+"] duplicate")}else pr[c]=a;return c}(s,e,d,l,r,p.featureStr,t);if(n){if(!Array.isArray(n)&&"*"!==n)throw Error("renderKeyClasses type err, it is must be an array or string *");f=n}else f=[v];return function(e,t,n,r,o,a,c){var i=Cr[e];i||(i=function(e,t,n,r,o){return{module:e,ccClassKey:t,renderKeyClasses:n,originalWatchedKeys:o,watchedKeys:r,ccKeys:[],connectedState:{},connectedModuleKeyMapping:null,connectedModule:{}}}(n,e,t,o,r),Cr[e]=i);var u={},s={};if(a){var d=Ve.store._state,f=i.connectedState;c.forEach(function(e){f[e]=d[e],s[e]=Kr[e],u[e]=1}),i.connectedModuleKeyMapping=a,i.connectedModule=u,i.connectedComputed=s}}(v,f,e,o,l,y,_),function(e,t){var n=Q(mr,e);if(!0===hr[e]&&1<=n.length)throw Error("module["+e+"] is declared as single, only on ccClassKey can been registered to it, and now a ccClassKey["+n[0]+"] has been registered!");n.includes(t)||n.push(t)}(e,v),{_module:e,_connect:d,_watchedKeys:l,_ccClassKey:v}}var $r=Ve.event_handlers_,wr=Ve.handlerKey_handler_,br=Ve.ccUKey_handlerKeys_,xr=Ve.ccUKey_ref_,Ur=function(e,t,n){return e+"$"+t+"$"+n},Nr=Q,Or=G;function Ir(e,t,n,r,o){void 0===o&&(o=null);var a=$r[e];if(a){var c=a;return r?c=a.filter(function(e){return e.ccUniqueKey===r}):n?c=a.filter(function(e){return e.ccClassKey===n}):t&&(c=a.filter(function(e){return e.module===t})),void 0!==o&&(c=c.filter(function(e){return e.identity===o})),c}return[]}function Dr(e){var o={},r=[];e.forEach(function(e){var t=e.ccUniqueKey,n=e.event;delete wr[e.handlerKey],o[t]=1,r.includes(n)||r.push(n)}),r.forEach(function(e){var r=$r[e];r&&(r.forEach(function(e,t){var n=e.ccUniqueKey;1===o[n]&&(r[t]=null,delete br[n])}),$r[e]=r.filter(function(e){return null!==e}))})}function Ar(e,t,n,r,o,a){var c=Nr($r,r);if("function"!=typeof a)return Or("event "+r+"'s handler is not a function!");var i=Ur(n,r,o),u=Nr(br,n),s=c.findIndex(function(e){return e.handlerKey===i}),d={event:r,module:e,ccClassKey:t,ccUniqueKey:n,identity:o,handlerKey:i,fn:a};-1<s?c[s]=d:(c.push(d),u.push(i)),wr[i]=d}function Rr(e){for(var t=arguments.length,a=Array(1<t?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];var r,o,c,i,u=null,s=null;"string"==typeof e?r=e:(r=e.name,u=e.identity,o=e.module,c=e.ccClassKey,i=e.ccUniqueKey,s=e.canPerform),Ir(r,o,c,i,u).forEach(function(e){var t=e.handlerKey,n=xr[e.ccUniqueKey];if(n&&t){if(n.__$$isUnmounted)return;var r=wr[t];if(r){if(s&&!s(n))return;var o=r.fn;n.__$$isMounted?o.apply(void 0,a):n.ctx.__$$onEvents.push({fn:o,args:a})}}})}function Mr(e,t){Dr(Ir(e,t.module,t.ccClassKey,t.ccUniqueKey,t.identity))}function Tr(e){var t=br[e];if(t){var n=[];t.forEach(function(e){return n.push(wr[e])}),Dr(n)}}function kr(e){if(e&&"object"==typeof e){var t;if(Array.isArray(e))t={name:e[0],identity:e[1]};else t=Object.assign({},e);return t}return{name:e}}var Wr=Object.freeze({bindEventHandlerToCcContext:Ar,findEventHandlersToPerform:Rr,findEventHandlersToOff:Mr,offEventHandlersByCcUniqueKey:Tr,getEventItem:kr}),Fr=Ve.waKey_uKeyMap_,Lr=Ve.moduleName_stateKeys_;function jr(s,e,d){return new Proxy(e,{get:function(e,t){var n=s.ctx;if(n.__$$renderStatus===g){var r=n.ccUniqueKey;if(d){var o=n.__$$nextCompareConnWaKeys,a=n.__$$nextCompareConnWaKeyCount;n.__$$compareConnWaKeys[d][t]=n.__$$curConnWaKeys[d][t]=Fr[d+"/"+t][r]=1;var c=o[d];c[t]||(c[t]=2,a[d]++)}else{var i=n.module;if(Lr[i].includes(t)){var u=n.__$$nextCompareWaKeys;n.__$$compareWaKeys[t]=n.__$$curWaKeys[t]=Fr[i+"/"+t][r]=1,u[t]||(u[t]=2,n.__$$nextCompareWaKeyCount++)}}}return e[t]},set:function(e,t){return e[t]=e[t],!0}})}function Pr(o,a){return void 0===a&&(a=!1),function(e,t,n,r){Et(Ke,{type:"computed",isLazyComputed:a,refCtx:o,stateKeys:o.stateKeys,retKeyFns:o.computedRetKeyFns,module:o.module,connect:o.connect,dep:o.computedDep},e,t,n,r)}}var zr=G,qr=R;function Hr(e){return e?e.props||e:{}}var Vr=Ve.store.getState;var Br=function(e,t,n){var r=n.module,o=n.state,a=!1,c="",i="",u="",s=null,d=-1,f=!1,l=e[ve],p=e.type,y=!1;if(void 0!==l){var _,v,m;if(d=e.delay,i=e.rkey,a="int"===p,f="bool"===p,(c=l).includes("/")){var h=c.split("/");_=h[1],v=c,m=h[0]}else v=r+"/"+(_=c),m=r;var C=Vr(m);u="bool"===p?!le(m!==r?C:o,_):function(e){var t=ne(e);return t?t.currentTarget.value:e}(t);var K=e.val;if(void 0===K);else if("function"==typeof K){var g=K(u,_,{module:m,moduleState:C,fullKeyPath:v,state:o,refCtx:n});if(null!=g)if("as"===p)u=g;else{var S=typeof g;"boolean"==S?y=!g:"object"==S?(y=!0,s=g):G("syncKey["+l+"] cb result type error.")}else"as"===p&&(y=!0)}else u=K}else{var E=ne(t);if(!E)return null;var $=E.currentTarget;u=$.value;var w=$.dataset;if(a="int"===p||void 0!==w.ccint,!(c=w.ccsync))return null;i=w.ccrkey;var b=w.ccdelay;if(b)try{d=parseInt(b)}catch(e){}}return{currentTarget:{value:u,extraState:s,noAutoExtract:y,dataset:{ccsync:c,ccint:a,ccdelay:d,ccrkey:i}},isToggleBool:f}};var Gr=function(e,t,n,r,o){var a=t;!0!==n||Number.isNaN(a=parseInt(t))&&(G(t+" can not convert to int but you set ccint as true!ÔºÅ"),a=t);var c=null,i=[];if(e.includes("/")){var u=e.split("/"),s=u[1];c=u[0],i=s.includes(".")?s.split("."):[s]}else i=e.includes(".")?e.split("."):[e];if(1===i.length){var d,f,l=i[0];return!0!==o?{module:c,state:(d={},d[l]=a,d)}:{module:c,state:(f={},f[l]=!r[l],f)}}var p,y=i[0],_=i.slice(1),v=r[y];return function e(t,n,r,o,a,c){void 0===c&&(c=!1);var i=n[o];if(r===o)if(!0===c){var u=t[i];"boolean"!=typeof u?G("key["+i+"]'s value type is not boolean"):t[i]=!u}else t[i]=a;else e(t[i],n,r,++o,a,c)}(v,_,_.length-1,0,a,o),{module:c,state:(p={},p[y]=v,p)}},Yr=Ve.store.getState;function Xr(e,t,n){var r=t.ctx,o=r.module,a=Br(e,n,r);if(a){var c=a.currentTarget,i=c.dataset,u=c.value,s=c.extraState,d=c.noAutoExtract;n&&n.stopPropagation&&n.stopPropagation();var f=i.ccsync,l=i.ccint,p=i.ccdelay,y=i.ccrkey;if(f.startsWith("/")&&(i.ccsync=""+o+f),f.includes("/")){var _=f.split("/")[0];rt(_,!1);var v=r.ccKey,m=r.ccUniqueKey;if(d)return void(s&&Un(s,{calledBy:K,ccKey:v,ccUniqueKey:m,module:_,renderKey:y,delay:p},t));var h=_!==o?Yr(_):t.state;Un(Gr(f,u,l,h,a.isToggleBool).state,{calledBy:K,ccKey:v,ccUniqueKey:m,module:_,renderKey:y,delay:p},t)}else{if(d)return void(s&&t.setState(s,null,y,p));var C=Gr(f,u,l,t.state,a.isToggleBool);t.setState(C.state,null,y,p)}}}var Jr=Ve.reducer,Qr=Jr._module_fnNames_,Zr=Jr._caller,eo=Ve.refStore,to=Ve.ccClassKey_ccClassContext_,no=Ve.moduleName_stateKeys_,ro=Ve.store.getState,oo=Ve.moduleName_ccClassKeys_,ao=Ve.computed._computedValue,co=Ve.waKey_uKeyMap_,io=te,uo=I,so=T,fo=Q,lo=J,po=G,yo=b,_o=0;var vo=function(){},mo=function(e){return"type of defineEffect "+e+" param must be"},ho=function(e){return"-"===e.watchedKeys?io(e.__$$renderStatus===g?e.__$$compareWaKeys:e.__$$curWaKeys):e.watchedKeys},Co=function(t,e){function n(e){return io(t.__$$renderStatus===g?t.__$$compareConnWaKeys[e]:t.__$$curConnWaKeys[e])}function r(e){if(c)return n(e);var t=o[e];return"*"===t?no[e]:"-"===t?n(e):t}var o=t.connect,a=t.connectedModules,c=Array.isArray(o);if(e)return r(e);var i={};return a.forEach(function(e){return i[e]=r(e)}),i};function Ko(n,r,e){("*"===e?no[r]:e).forEach(function(e){var t=co[r+"/"+e];t?t[n]=1:po("invalid watchedKey["+e+"] of module["+r+"]")})}function go(c,e,t){var n;void 0===t&&(t=5);var r=e.isSingle,o=e.ccClassKey,a=e.ccKey,i=void 0===a?"":a,u=e.module,s=e.type,d=e.state,f=e.storedKeys,l=void 0===f?[]:f,p=e.persistStoredKeys,y=void 0!==p&&p,_=e.watchedKeys,v=e.connect,m=void 0===v?{}:v,h=e.tag,C=void 0===h?"":h,K=e.ccOption,g=void 0===K?{}:K,S=u,E=c.ctx,$=c.setState,w=c.forceUpdate;!yo(E)&&E.ccUniqueKey?($=E.__boundSetState,w=E.__boundForceUpdate):s!==_e&&($=c.setState.bind(c),w=c.forceUpdate.bind(c));var b={};b.persistStoredKeys=void 0===g.persistStoredKeys?y:g.persistStoredKeys,b.tag=g.tag||C;var x=function(e,t,n,r){var o;if(e)n&&zr("now the ccClass is singleton, you needn't supply ccKey to instance props, cc will ignore the ccKey["+n+"]"),o=t;else if(n)o=qr(t,n);else{var a=Kt(r);o=qr(t,a)}return o}(r,o,i,b.tag);if(b.renderKey=g.renderKey||x,b.storedKeys=function(e,t,n,r){var o=n||r;return o?"*"===o?Object.keys(e).filter(function(e){return!t.includes(e)}):(ot(t,o),o):[]}(d,no[S],g.storedKeys,l),i&&!o)throw Error("missing ccClassKey while init a cc ins with ccKey["+i+"]");if(0<b.storedKeys.length&&!i)throw uo(ge.CC_STORED_KEYS_NEED_CCKEY,so("ccClassKey["+o+"]"));var U=to[o],N=U.connectedState,O=io(m),I=U.connectedComputed||{},D={},A={},R=ro(u),M=ao[u]||{},T=ao[ye]||{},k=ro(ye),W=we(io(d),no[S]),F=eo._state[x]||{},L=Object.assign({},d,F,R),j=io(c.state=L),P=fo(oo,u);P.includes(o)||P.push(o);function z(e,t){Un(e,t,c)}function q(e,t,n,r,o,a){z(t,{calledBy:n,module:e,renderKey:o,delay:a,reactCallback:r})}function H(e,t,n,r,o){q(e,t,he,n,r,o)}function V(e,t,n,r,o){"string"==typeof e?H(e,t,n,r,o):q(S,e,me,t,n,r)}function B(e,t,n){q(S,c.state,Ce,e,t,n)}var G=[],Y=[],X={effectItems:G,eid_effectReturnCb_:{},effectPropsItems:Y,eid_effectPropsReturnCb_:{}},J={},Q={},Z=Hr(c.props),ee=((n={type:s,isSingle:r,module:u,ccClassKey:o,ccKey:i,ccUniqueKey:x,renderCount:1,initTime:Date.now(),watchedKeys:_,privStateKeys:W,connect:m,connectedModules:O,__$$onEvents:[],__$$hasModuleState:0<no[u].length,__$$renderStatus:Se,__$$curWaKeys:{},__$$compareWaKeys:{},__$$compareWaKeyCount:0,__$$nextCompareWaKeys:{},__$$nextCompareWaKeyCount:0,__$$curConnWaKeys:{},__$$compareConnWaKeys:{},__$$compareConnWaKeyCount:{},__$$nextCompareConnWaKeys:{},__$$nextCompareConnWaKeyCount:{},persistStoredKeys:b.persistStoredKeys,storedKeys:b.storedKeys,renderKey:b.renderKey,tag:b.tag,prevProps:Z,props:Z,mapped:{},prevState:L,state:L,moduleState:R,mstate:R,globalState:k,gstate:k,connectedState:D,cstate:A,extra:{},staticExtra:{},refComputed:{},refComputedOri:{},moduleComputed:M,globalComputed:T,connectedComputed:I,moduleReducer:{},connectedReducer:{},reducer:{}}).mapped={},n.stateKeys=j,n.computedDep={},n.computedRetKeyFns={},n.watchDep={},n.watchRetKeyFns={},n.execute=null,n.auxMap=J,n.effectMeta=X,n.retKey_fnUid_={},n.reactSetState=vo,n.__boundSetState=$,n.reactForceUpdate=vo,n.__boundForceUpdate=w,n.setState=V,n.setModuleState=H,n.forceUpdate=B,n.changeState=z,n.refs=Q,n.useRef=function(t){return function(e){return Q[t]={current:e}}},n.__$$ccSetState=Bn(c),n.__$$ccForceUpdate=Gn(c),n.__$$settedList=[],n.__$$prevMoStateVer={},n);c.setState=V,c.forceUpdate=B,ee.initState=function(e){return c.__$$isMounted?po("ctx.initState can only been called before first render period!"):$e(d)?(c.state=Object.assign({},d,e,F,R),void(ee.prevState=ee.state=c.state)):po("state "+Ee)};var te=Jn(c,!1,!1,S);if(ee.dispatch=te,1<t&&(ee.lazyDispatch=Jn(c,!0,!1,S),ee.silentDispatch=Jn(c,!1,!0,S),ee.dispatchLazy=ee.lazyDispatch,ee.dispatchSilent=ee.silentDispatch,ee.invoke=Yn(c),ee.lazyInvoke=Yn(c,{isLazy:!0}),ee.silentInvoke=Yn(c,{isLazy:!1,isSilent:!0}),ee.invokeLazy=ee.lazyInvoke,ee.invokeSilent=ee.silentInvoke,ee.setGlobalState=function(e,t,n,r){q(ye,e,me,t,n,r)}),2<t){var ne=function(e,t,n,r,o){var a;if("string"==typeof e)return Xr.bind(null,((a={})[ve]=e,a.type=o,a.val=t,a.delay=r,a.rkey=n,a),c);Xr({type:"val"},c,e)};ee.sync=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=-1),ne(e,t,n,r,"val")},ee.syncBool=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=-1),ne(e,t,n,r,"bool")},ee.syncInt=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=-1),ne(e,t,n,r,"int")},ee.syncAs=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=-1),ne(e,t,n,r,"as")},ee.set=function(e,t,n,r){var o;void 0===n&&(n=""),void 0===r&&(r=-1),Xr(((o={})[ve]=e,o.type="val",o.val=t,o.delay=r,o.rkey=n,o),c)},ee.setBool=function(e,t,n){var r;void 0===t&&(t=""),void 0===n&&(n=-1),Xr(((r={})[ve]=e,r.type="bool",r.delay=n,r.rkey=t,r),c)}}if(3<t&&(ee.emit=function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Rr.apply(Wr,[kr(e)].concat(n))},ee.off=function(e,t){var n=void 0===t?{}:t,r=n.module,o=n.ccClassKey,a=n.ccUniqueKey,c=void 0===a?x:a,i=kr(e);Mr(i.name,{module:r,ccClassKey:o,ccUniqueKey:c,identity:i.identity})},ee.on=function(e,t){var n=kr(e),r=n.identity;Ar(S,o,x,n.name,void 0===r?null:r,t)}),4<t){ee.execute=function(e){return ee.execute=e},ee.aux=function(e,t){return function(e,t,n){var r=t,o="";if(Array.isArray(t)){var a=t[0];r=a+"/"+t[1],o=a}else{if("string"!=typeof t)return po("auxKey["+t+"] invalid");o=t.split("/")[0]}if(!Ve.pluginNameMap[o])return po("pluginName["+o+"] invalid");e[r]?po("auxMethod["+r+"] dup!"):e[r]=n}(J,e,t)},ee.watch=function(a){return function(e,t,n,r,o){Et(Ke,{type:"watch",refCtx:a,stateKeys:a.stateKeys,retKeyFns:a.watchRetKeyFns,module:a.module,connect:a.connect,dep:a.watchDep},e,t,n,r,o)}}(ee),ee.computed=Pr(ee),ee.lazyComputed=Pr(ee,!0);var re=function(u,s){return function(e,t,n,r){if(void 0===n&&(n=!0),void 0===r&&(r=!0),"function"!=typeof e)throw Error(mo("first")+" function");var o=t,a=s?n:r;if(null!=t&&!Array.isArray(t))throw Error(mo("second")+" one of them(array, null, undefined)");var c=null;!s&&o&&(c=[],o.forEach(function(e){e.includes("/")?c.push(e):c.push(S+"/"+e)}));var i={fn:e,isProp:s,depKeys:o,moDepKeys:c,eId:Symbol("__autoGen_"+ ++_o+"__"),compare:n,immediate:a};u.push(i)}};ee.effect=re(G,!1),ee.effectProps=re(Y,!0)}var oe=ee.moduleReducer,ae=ee.connectedReducer,ce=ee.__$$curConnWaKeys,ie=ee.__$$compareConnWaKeys,ue=ee.__$$compareConnWaKeyCount,se=ee.__$$nextCompareConnWaKeys,de=ee.__$$nextCompareConnWaKeyCount,fe=O.slice();fe.includes(u)?po("module["+u+"] is in belongTo and connect both, it will cause redundant render."):fe.push(u);var le=!1;if(fe.forEach(function(o){var e;e=o===u?oe:lo(ae,o);var t=m[o];if(t){var n=N[o];A[o]=n,"-"===t?(le=!0,ce[o]={},ie[o]={},ue[o]=0,se[o]={},de[o]=0,n=jr(c,n,o)):Ko(x,o,t),D[o]=n}(Qr[o]||[]).forEach(function(r){e[r]=function(e,t,n){return te(o+"/"+r,e,t,n)}})}),ee.reducer=Zr,"-"===_?(le=!0,c.state=jr(c,L),ee.state=c.state):Ko(x,u,_),ee.__$$autoWatch=le,ee.__$$reInjectConnObState=function(e){var t=ee.connectedState;Array.isArray(m)?t[e]=jr(c,N[e],e):"-"===m[e]&&(t[e]=jr(c,N[e],e));ee.globalState=t[ye]},ee.getWatchedKeys=function(){return ho(c.ctx||ee)},ee.getConnectWatchedKeys=function(e){return Co(c.ctx||ee,e)},E){var pe=c.ctx;Object.assign(c.ctx,ee,{__$$curWaKeys:pe.__$$curWaKeys,__$$compareWaKeys:pe.__$$compareWaKeys,__$$compareWaKeyCount:pe.__$$compareWaKeyCount,__$$nextCompareWaKeys:pe.__$$nextCompareWaKeys,__$$nextCompareWaKeyCount:pe.__$$nextCompareWaKeyCount,__$$curConnWaKeys:pe.__$$curConnWaKeys,__$$compareConnWaKeys:pe.__$$compareConnWaKeys,__$$compareConnWaKeyCount:pe.__$$compareConnWaKeyCount,__$$nextCompareConnWaKeys:pe.__$$nextCompareConnWaKeys,__$$nextCompareConnWaKeyCount:pe.__$$nextCompareConnWaKeyCount})}else c.ctx=ee}var So=Ve.store.getState;var Eo=te,$o=Ve.runtimeVar;function wo(n,e,t){var r=n.ctx;if(n.__$$isUnmounted=!1,r.__$$isBSe=!(n.__$$isMounted=!1),e){if("function"!=typeof e)throw Error("type of setup must be function");var o=e(r)||{};if(!$e(o))throw Error("type of setup return result must be an plain json object");(!0===t||!0===$o.bindCtxToMethod&&!1!==t)&&Eo(o).forEach(function(e){var t=o[e];"function"==typeof t&&(o[e]=t.bind(n,r))}),r.settings=o}r.__$$isBSe=!1,r.refComputed=xt(r.computedRetKeyFns,r.refComputedOri),function(e){var r=e.ctx,t=r.hasComputedFn,n=r.hasWatchFn,o=r.connect,a=r.module,c=de(a),i=te(o),u=r.state;t&&(Zt(r,a,u,u,c,!0,!0),i.forEach(function(e){var t=So(e),n=de(e);Zt(r,e,t,t,n,!0,!0)})),n&&(Qt(r,a,u,u,c,!0,!0),i.forEach(function(e){var t=So(e),n=de(e);Qt(r,e,t,t,n,!0,!0)}))}(n)}var bo=Ve.moduleName_stateKeys_,xo=Ve.store,Uo=xo.getPrevState,No=xo.getState,Oo=xo.getStateVer,Io=function(e,t){return G("effect: key["+e+"] is invalid, its "+t+" has not been declared in' store!")};function Do(e,t){function n(a,c,i){return function(e){var t=e.fn,n=e.eId;if(!i||!1!==e.immediate){var r=a[n];r&&r(u);var o=t(u,c);a[n]=o}}}var u=e.ctx,r=u.effectMeta,o=r.effectItems,a=r.eid_effectReturnCb_,c=r.effectPropsItems,i=r.eid_effectPropsReturnCb_,h=u.__$$prevMoStateVer,C=u.__$$settedList,K=u.module;if(t)o.forEach(n(a,!0,!0)),c.forEach(n(i,!0,!0));else{var g=u.prevState,S=e.state,E=[];o.forEach(function(e){var t=e.moDepKeys,n=e.compare,r=e.fn,o=e.eId;if(t){var a=t.length;if(0===a)return;for(var c=function(e){return e.reduce(function(t,e){var n=e.module;return e.keys.forEach(function(e){return t[n+"/"+e]=1}),t},{})}(C),i=!1,u=0;u<a;u++){var s=t[u];if(n){var d=void 0,f=void 0,l=void 0,p=s.split("/"),y=p[0],_=p[1];if(y!==K){var v=Uo(y),m=Oo(y);if(h[_]===m[_])continue;if(h[_]=m[_],!v){Io(s,"module["+y+"]");continue}if(!bo[y].includes(_)){Io(s,"unmoduledKey["+_+"]");continue}d=No(y),f=v,l=_}else d=S,f=g,l=s;if(f[l]!==d[l]){i=!0;break}}else if(c[s]){i=!0;break}}i&&E.push({fn:r,eId:o})}else E.push({fn:r,eId:o})}),E.forEach(n(a,!1,!1));var s=u.prevProps,d=u.props,f=[];c.forEach(function(e){var t=e.depKeys,n=e.fn,r=e.eId;if(t){var o=t.length;if(0===o)return;for(var a=!1,c=0;c<o;c++){var i=t[c];if(s[i]!==d[i]){a=!0;break}}a&&f.push({fn:n,eId:r})}else f.push({fn:n,eId:r})}),f.forEach(n(i,!1,!1)),C.length=0}}var Ao=G,Ro=I,Mo=T,To=P,ko=j,Wo=Ve.runtimeVar,Fo=Ve.ccClassKey_ccClassContext_,Lo=Ve.ccUKey_ref_,jo={};function Po(e,t,n,r){function o(){Lo[e]=t,n.push(e)}!function(e){void 0===jo[e]?jo[e]=1:jo[e]+=1}(e),r?setTimeout(o,r):o()}function zo(e,t,n,r,o){var a=Fo[n],c=a.ccKeys;Wo.isDebug&&console.log(To("register ccKey "+o+" to CC_CONTEXT"),ko());var i=Ve.isHotReloadMode();if(c.includes(o)){var u=function(){throw Ro(ge.CC_CLASS_INSTANCE_KEY_DUPLICATE,Mo("ccClass:"+n+",ccKey:"+o))};if(i){var s=function(e){return void 0===jo[e]?0:jo[e]}(o);if(t&&0<s)throw Ro(ge.CC_CLASS_INSTANCE_MORE_THAN_ONE,Mo("ccClass:"+n));1<s&&u(),Ao("\n        found ccKey["+r+"] duplicated in hot reload mode, please make sure your ccKey is unique manually,\n        "+Mo("ccClassKey:"+n+" ccKey:"+r+" ccUniqueKey:"+o)+"\n      "),Po(o,e,c,600)}else u()}else Po(o,e,c);return a}var qo=Ve.waKey_uKeyMap_;function Ho(t,e,n,r){var o=!1,a=te(t);a.forEach(function(e){2===t[e]&&(o=!0,delete qo[n+"/"+e][r])}),e<a.length&&(o=!0),o&&ut(n)}function Vo(e){var t=e.ctx;if(t.__$$renderStatus=Se,t.__$$autoWatch){var n=t.connectedModules,r=t.connect,o=t.ccUniqueKey,a=t.__$$compareConnWaKeys,c=t.__$$compareConnWaKeyCount;Ho(t.__$$compareWaKeys,t.__$$compareWaKeyCount,t.module,o),n.forEach(function(e){"-"===r[e]&&Ho(a[e],c[e],e,o)})}}function Bo(e){Vo(e),e.__$$isMounted=!0,e.__$$isUnmounted=!1;var t=e.ctx,n=t.__$$onEvents;zo(e,t.isSingle,t.ccClassKey,t.ccKey,t.ccUniqueKey),0<n.length&&(n.forEach(function(e){return e.fn.apply(void 0,e.args)}),n.length=0),Do(e,!0)}function Go(e){Vo(e),Do(e),e.ctx.prevState=e.state}var Yo=Ve.ccUKey_ref_,Xo=Ve.ccUKey_handlerKeys_,Jo=Ve.runtimeVar,Qo=Ve.ccClassKey_ccClassContext_,Zo=Ve.handlerKey_handler_;function ea(e,t){Jo.isDebug&&console.log(P(t+" unset ref"),j("purple")),delete Yo[t];var n=Qo[e].ccKeys,r=n.indexOf(t);r<0||n.splice(r,1),function(e){void 0===jo[e]?jo[e]=0:jo[e]-=1}(t);var o=Xo[t];o&&o.forEach(function(e){delete Zo[e]})}var ta=te;function na(n,r){function e(e){var t=n[e];"function"==typeof t&&t(r)}Object.getOwnPropertySymbols(n).forEach(e),ta(n).forEach(e)}function ra(e){e.__$$isUnmounted=!0;var t=e.ctx,n=t.ccUniqueKey,r=t.ccClassKey;if(e.__$$isMounted){var o=t.effectMeta,a=o.eid_effectPropsReturnCb_;na(o.eid_effectReturnCb_,t),na(a,t),Tr(n)}ea(r,n)}function oa(e){var t=e.ctx;if(t.__$$renderStatus=g,1!==t.renderCount&&t.__$$autoWatch){t.__$$hasModuleState&&(e.state=jr(e,e.state),t.state=e.state,t.moduleState=jr(e,t.mstate),t.__$$curWaKeys={},t.__$$compareWaKeys=t.__$$nextCompareWaKeys,t.__$$compareWaKeyCount=t.__$$nextCompareWaKeyCount,t.__$$nextCompareWaKeys={},t.__$$nextCompareWaKeyCount=0);var n=t.connect;t.connectedModules.forEach(function(e){"-"===n[e]&&(t.__$$curConnWaKeys[e]={},t.__$$compareConnWaKeys[e]=t.__$$nextCompareConnWaKeys[e],t.__$$compareConnWaKeyCount[e]=t.__$$nextCompareConnWaKeyCount[e],t.__$$nextCompareConnWaKeys[e]={},t.__$$nextCompareConnWaKeyCount[e]=0)})}}var aa=function(e){return"CC("+e+")"},ca=pe,ia=oe,ua=fe,sa=Ve.runtimeVar,da=j,fa=P,la=function(e){return Error("can not defined setup both in register options and class body --verbose:"+e)};function pa(e,t){var n=void 0===e?{}:e,r=n.module,o=void 0===r?q:r,a=n.state,u=void 0===a?{}:a,c=n.watchedKeys,s=void 0===c?"-":c,i=n.storedKeys,d=void 0===i?[]:i,f=n.setup,l=void 0===f?null:f,p=n.persistStoredKeys,y=n.connect,_=void 0===y?{}:y,v=n.tag,m=n.lite,h=n.isPropsProxy,C=void 0!==h&&h,K=n.isSingle,g=void 0!==K&&K,S=n.renderKeyClasses,E=n.__checkStartUp,$=void 0===E||E,w=n.compareProps,b=void 0===w||w,x=n.__calledBy;void 0===t&&(t="");try{var U=Er(o,t,S,A,ca(s),d,_,$,x),N=U._module,O=U._ccClassKey,I=U._connect;return function(n){if(n.prototype&&n.prototype.$$attach)throw Error("register a cc class is prohibited!");var e=!1===C?n:D.Component,i=e.$$setup,t=function(c){function e(e,t){var n;try{n=c.call(this,e,t)||this;var r=ua(u),o=Object.assign(n.state||{},r);n.$$attach=n.$$attach.bind(cr(n));var a=Object.assign({},e,{isSingle:g,module:N,tag:v,state:o,type:A,watchedKeys:s,ccClassKey:O,connect:I,storedKeys:d,persistStoredKeys:p});if(go(cr(n),a,m),n.ctx.reactSetState=Zn(cr(n)),n.ctx.reactForceUpdate=er(cr(n)),l&&(n.$$setup||i))throw la("ccUniqueKey "+n.ctx.ccUniqueKey);C||(n.$$setup&&(n.$$setup=n.$$setup.bind(cr(n))),wo(cr(n),l||n.$$setup||i,!1))}catch(e){Ft(e)}return n}ar(e,c);var t=e.prototype;return t.shouldComponentUpdate=function(e,t){var n=this.ctx.childRef;if(n&&n.shouldComponentUpdate)return n.shouldComponentUpdate(e,t);if(c.prototype.shouldComponentUpdate)return c.prototype.shouldComponentUpdate.call(this,e,t);var r=!!b&&ia(this.props,e);return this.state!==t||r},t.$$attach=function(e){var t=this.ctx;if(((t.childRef=e).ctx=t).reactSetState=e.setState.bind(e),t.reactForceUpdate=e.forceUpdate.bind(e),e.setState=t.setState,e.forceUpdate=t.forceUpdate,t.__$$ccSetState=Bn(e,this),t.__$$ccForceUpdate=Gn(e),e.state||(e.state={}),Object.assign(e.state,this.state),oa(e),e.$$setup&&(e.$$setup=e.$$setup.bind(e)),l&&(e.$$setup||i))throw la("ccUniqueKey "+t.ccUniqueKey);wo(e,l||e.$$setup||i,!1)},t.componentDidMount=function(){c.prototype.componentDidMount&&c.prototype.componentDidMount.call(this),Bo(this)},t.componentDidUpdate=function(){c.prototype.componentDidUpdate&&c.prototype.componentDidUpdate.call(this),Go(this)},t.componentWillUnmount=function(){c.prototype.componentWillUnmount&&c.prototype.componentWillUnmount.call(this),ra(this)},t.render=function(){return this.ctx.prevProps=this.ctx.props,this.ctx.props=this.props,sa.isDebug&&console.log(fa("@@@ render "+aa(O)),da()),!1===C?(oa(this),c.prototype.render.call(this)):D.createElement(n,{ctx:this.ctx,$$attach:this.$$attach})},e}(e);return t.displayName=O===B?"CcDispatcher":aa(O),t}}catch(e){Ft(e)}}function ya(e){var t=function(e){function t(){return e.apply(this,arguments)||this}return ar(t,e),t.prototype.render=function(){return this.props.children||D.createElement("span",{style:{display:"none"}})},t}(D.Component);if(Ve.refs[B]){if(!Ve.isHotReloadMode())throw Error("CcDispatcher can only be initialize one time");Y("hot reload mode, CC_DISPATCHER existed")}var n=e||t;return pa({isSingle:!0,__checkStartUp:!1,__calledBy:"cc"},B)(n)}var _a=$e,va=te;function ma(e,t){if(!_a(e))throw Error(t+" "+Ee)}function ha(e){if(!_a(e))throw Error("StartupOption.moduleSingleClass "+Ee);!function(t,n){Object.keys(n).forEach(function(e){t[e]=n[e]})}(Ve.moduleSingleClass,e)}function Ca(e){if(0<e.length){var o=Ve.plugins;o.length=0,Mt.forEach(function(e){return Tt[e].length=0});var a={};e.forEach(function(e){if(o.push(e),!e.install)throw Error("a plugin must export install handler!");var t=e.install(Wt),n=Error("plugin.install must return result:{name:string, options?:object}");if(!t)throw n;var r=t.name;if(!r)throw n;if(a[r])throw Error("pluginName["+r+"] duplicate");a[r]=1}),Ve.pluginNameMap=a}}var Ka=function(e){var t=document.querySelector("#"+c);if(!t){(t=document.createElement("div")).id=c;var n=t.style;n.position="fixed",n.left=0,n.top=0,n.display="none",n.zIndex=-888666,document.body.appendChild(t)}r.render(D.createElement(e),t)},ga=!1;function Sa(e,r){void 0===e&&(e=!1),ee(Ve.event_handlers_),ee(Ve.ccUKey_handlerKeys_);var o=Ve.ccClassKey_ccClassContext_,t=Ve.ccUKey_ref_;if(Object.keys(o).forEach(function(e){var t=o[e],n=[];0<r.length&&t.ccKeys.forEach(function(e){r.includes(e)&&n.push(e)}),ee(t.ccKeys,n)}),ee(Ve.handlerKey_handler_),ee(t,[B].concat(r)),e){var n=Ve.computed,a=Ve.watch,c=n._computedValue,i=a._watchDep;te(Ve.store._state).forEach(function(e){e!==H&&(c[e]&&(Ve.computed._computedDep[e]={retKey_fn_:{},retKey_lazy_:{},stateKey_retKeys_:{},fnCount:0},Ot(e,n._computedRaw[e])),i[e]&&(i[e]={retKey_fn_:{},retKey_lazy_:{},stateKey_retKeys_:{},fnCount:0},Rt(e,a._watchRaw[e])))})}}function Ea(){var n=Ve.ccUKey_ref_,r=[];return te(n).forEach(function(e){var t=n[e];t&&t.ctx.type===x&&!0!==t.props.__$$regDumb&&!0===t.__$$isMounted&&0==t.__$$isUnmounted&&r.push(e)}),r}function $a(){ee(Ve.globalStateKeys);var e=te(Ve.moduleName_isConfigured_).concat([q,H,ye,a]);ee(Ve.reducer._reducer,e),ee(Ve.store._state,e,{}),ee(Ve.computed._computedDep,e),ee(Ve.computed._computedValue,e),ee(Ve.watch._watchDep,e),ee(Ve.middlewares),ee(Ve.waKey_uKeyMap_),be={module:{computed:{},watch:{}},ref:{computed:{},watch:{},effect:{}}};var t=Ea();return Sa(!1,t),t}function wa(e){void 0===e&&(e=!1),Ve.info.latestStartupTime=Date.now();var t=[];return Ve.isStartup?Ve.isHotReloadMode()?e?(console.warn("attention: make sure [[clearContextIfHot]] been called before app rendered!"),ga=!0,t=$a()):(ga?ga=!1:(function(){if(!Ve.refs[B]){var e=ya();Ka(e)}}(),t=Ea(),Sa(Ve.reComputed,t)),t):(console.warn("clear failed because of not running under hot reload mode!"),t):(ga=!0,t)}var ba=ae,xa=fe;function Ua(e){var t=e.props,n=ba(t.register),r=n.module,o=n.renderKeyClasses,a=n.tag,c=n.lite,i=n.compareProps,u=void 0===i||i,s=n.setup,d=n.bindCtxToMethod,f=n.watchedKeys,l=void 0===f?"-":f,p=n.connect,y=void 0===p?{}:p,_=n.isSingle,v=n.storedKeys,m=void 0===v?[]:v,h=xa(n.state),C=t.ccClassKey,K=t.ccKey,g=t.ccOption,S=void 0===g?{}:g,E=l,$=C,w=y;if(!0!==t.__$$regDumb){var b=Er(r,C,o,x,pe(l),m,y,!0);E=l,$=b._ccClassKey,w=b._connect}go(e,{isSingle:_,ccKey:K,connect:w,state:h,module:r,storedKeys:m,watchedKeys:E,tag:a,ccClassKey:$,ccOption:S,type:x},c),e.ctx.reactSetState=Zn(e),e.ctx.reactForceUpdate=er(e),e.__$$compareProps=u,wo(e,s,d)}var Na=Y,Oa=re,Ia="";function Da(e,t){var n=void 0===e?{}:e,r=n.store,o=void 0===r?{}:r,a=n.reducer,c=void 0===a?{}:a,i=n.init,u=void 0===i?null:i,s=n.computed,d=void 0===s?{}:s,f=n.watch,l=void 0===f?{}:f,p=n.moduleSingleClass,y=void 0===p?{}:p,_=void 0===t?{}:t,v=_.plugins,m=void 0===v?[]:v,h=_.middlewares,C=void 0===h?[]:h,K=_.isStrict,g=void 0!==K&&K,S=_.isDebug,E=void 0!==S&&S,$=_.errorHandler,w=void 0===$?null:$,b=_.isHot,x=_.bindCtxToMethod,U=void 0!==x&&x,N=_.computedCompare,O=void 0===N||N,I=_.watchCompare,D=void 0===I||I,A=_.watchImmediate,R=void 0!==A&&A,M=_.alwaysGiveState,T=void 0===M||M,k=_.reComputed,W=void 0===k||k;try{throw Error()}catch(e){var F=function(e){function t(e,t){for(var n=0;n<o;n++)if(r[n].includes(e)){a=r[n+t];break}}var n=Ve.info,r=e.stack.split("\n"),o=r.length,a="";function c(){return wa(Ve.isHot=!0)}t("startup",2),a||t("runConcent",0);var i=Date.now(),u=[],s=!0;if(Ia)if(Ia!==a){var d="invalid run api call!(it can only be called once, changing 'call run' line location in HMR will cause this error also, \n    try refresh browser to reload your app to avoid this tip)";if(i-n.latestStartupTime<1e3)throw Error(d);se()?(u=c(),Ia=a):(X(d),s=!1)}else u=c();else Ia=a,n.firstStartupTime=i,n.latestStartupTime=i;return{canStartup:s,ccFragKeys:u}}(e),L=F.ccFragKeys;if(!F.canStartup)return;try{console.log("%c window.name:"+window.name,"color:green;border:1px solid green"),Na("cc version "+Ve.info.version),void 0!==b&&(Ve.isHot=b),Ve.reComputed=W,Ve.errorHandler=w;var j=Ve.runtimeVar;if(j.alwaysGiveState=T,j.isStrict=g,j.isDebug=E,j.computedCompare=O,j.watchCompare=D,j.watchImmediate=R,j.bindCtxToMethod=U,ha(y),function(e){ma(e,"state"),delete e[V],delete e[H],void 0===e[ye]&&(e[ye]={}),void 0===e[q]&&(e[q]={});for(var t=va(e),n=t.length,r=0;r<n;r++){var o=t[r];dt(o,e[o])}}(o),function(t){ma(t,"reducer"),void 0===t[q]&&(t[q]={}),void 0===t[ye]&&(t[ye]={}),va(t).forEach(function(e){return mt(e,t[e])})}(c),function(t){ma(t,"computed"),va(t).forEach(function(e){return Ot(e,t[e])})}(d),function(t){ma(t,"watch"),Object.keys(t).forEach(function(e){return Rt(e,t[e])})}(l),function(n){if(n){if(!_a(n))throw Error("init "+Ee);va(n).forEach(function(t){rt(t,!1);var e=n[t];e&&Promise.resolve().then(e).then(function(e){Qn(t)(e)})}),Ve.init._init=n}}(u),function(e){if(0<e.length){var t=Ve.middlewares;t.length=0,e.forEach(function(e){return t.push(e)})}}(C),!Ve.refs[B]){var P=ya();Ka(P)}var z=function(e){Oa("CC_CONTEXT",Ve,e),Oa("ccc",Ve,e),Oa("cccc",Ve.computed._computedValue,e),Oa("sss",Ve.store._state,e)};window.mcc?setTimeout(function(){z(window.mcc[ie()])},1200):z(),Ve.isStartup=!0,Ca(m),L.forEach(function(e){var t=Ve.ccUKey_ref_[e];ra(t),Ua(t),Bo(t)})}catch(e){if(!w)throw e;w(e)}}}function Aa(e){throw Error("[[run]]: param error, "+e+" "+Ee)}var Ra=$e,Ma=te,Ta=b,ka=fe;function Wa(e,t){var n=ae(e);return delete n.__checkStartUp,delete n.__calledBy,pa(n,t)}var Fa=oe,La=D.createElement("span",{style:{display:"none"}}),ja=function(r){function e(e,t){var n;return Ua(cr(n=r.call(this,e,t)||this)),n}ar(e,r);var t=e.prototype;return t.componentDidMount=function(){Bo(this)},t.shouldComponentUpdate=function(e,t){var n=!!this.__$$compareProps&&Fa(Hr(e),Hr(this.props));return this.state!==t||n},t.componentDidUpdate=function(){Go(this)},t.componentWillUnmount=function(){r.prototype.componentWillUnmount&&r.prototype.componentWillUnmount.call(this),ra(this)},t.render=function(){var e=this.props;this.ctx.prevProps=this.ctx.props,this.ctx.props=Hr(e);var t=e.render,n=t||e.children;if("function"==typeof n){oa(this);var r=e.register,o=void 0===r?{}:r,a=this.ctx;return!0!==e.__$$regDumb&&o.mapProps?(a.mapped=o.mapProps(a)||{},n(a.mapped)||La):n(a)||La}if(D.isValidElement(n))throw Error("CcFragment's children can not b a react dom ");return n},e}(D.Component);function Pa(e,t){var n=ae(e),r=n.renderKeyClasses,o=n.module,a=n.watchedKeys,c=void 0===a?"-":a,i=n.storedKeys,u=n.render,s=n.connect,d=void 0===s?{}:s,f=pe(c),l=Er(o,t,r,x,f,i,d,!0),p=l._ccClassKey,y=l._connect;function _(t){return function(e){return n.props=e,function(t,e){var n=e.mapProps,r=e.props,o=void 0===r?{}:r,a={__$$regDumb:!0,props:o,ccOption:o.ccOption,ccClassKey:e.ccClassKey,render:function(e){return n?(e.mapped=n(e),D.createElement(t,e.mapped)):D.createElement(t,e)},ccKey:o.ccKey,register:e};return D.createElement(ja,a)}(t,n)}}return n.module=l._module,n.watchedKeys=c,n.ccClassKey=p,n.connect=y,u?_(u):function(e){return _(e)}}var za=Ve.ccUKey_ref_,qa=1;function Ha(e,t,n){this.setState=t,this.forceUpdate=t,this.state=e,this.isFirstRendered=!0,this.props=n}function Va(e,t,n,r,o,a,c,i,u,s){var d=n||fe(r),f=o.bindCtxToMethod,l=o.watchedKeys,p=void 0===l?"-":l,y=o.storedKeys,_=void 0===y?[]:y,v=o.connect,m=void 0===v?{}:v,h=o.setup,C=o.lite;qa+=1;var K=Er(o.module,s,o.renderKeyClasses,_e,pe(p),_,m,!0),g=K._module,S=K._ccClassKey,E=K._connect,$=e||new Ha(a,c,i),w=Object.assign({},o,{module:g,watchedKeys:p,state:d,type:_e,ccClassKey:S,connect:E,ccOption:i.ccOption});$.props=i,go($,w,C),$.ctx.reactSetState=Zn($),$.ctx.reactForceUpdate=er($);var b=$.ctx;return b.props=i,b.extra=u,wo($,h,f),t.current=$.ctx.ccUniqueKey,b.useRef=function(e){var t=D.useRef(null);return b.refs[e]=t},$}function Ba(e,t){e.__boundSetState=t,e.__boundForceUpdate=t}var Ga="react version is LTE 16.8";function Ya(e,t){var n=ae(e),r=n.state,o=void 0===r?{}:r,a=n.props,c=void 0===a?{}:a,i=n.mapProps,u=n.layoutEffect,s=void 0!==u&&u,d=n.extra,f=void 0===d?{}:d,l=D.useState;if(!l)throw Error(Ga);function p(e){return Va(e,g,m,o,n,C,K,c,f,t)}var y,_=qa,v=l(_)[0]===_,m=v?fe(o):0,h=l(m),C=h[0],K=h[1],g=D.useRef(null);if(v)y=p();else if(y=za[g.current]){var S=y.ctx;S.prevProps=S.props,y.props=S.props=c,S.extra=f}else y=p();var E=y.ctx,$=s?D.useLayoutEffect:D.useEffect;if($(function(){y.isFirstRendered||Go(y),Ba(E,K)}),$(function(){return!1===y.isFirstRendered?p(y):y.isFirstRendered=!1,Ba(E,K),Bo(y),function(){ra(y)}},[]),i){var w=i(E);if(!$e(w))throw Error("mapProps ret "+Ee);E.mapped=w}return oa(y),E}function Xa(){throw Error("api doc: cc.setState(module:string, state:object, renderKey:string, delayMs?:number, skipMiddleware?:boolean, throwError?:boolean)")}function Ja(e){return Ve.store.getState(e)}var Qa=Ve.computed._computedValue;var Za=Ve.ccUKey_ref_,ec=Ve.ccClassKey_ccClassContext_;function tc(){var n=[],r=Ve.ccUKey_ref_;return te(r).forEach(function(e){var t=r[e];t&&!t.__$$isUnmounted&&n.push(t)}),n}function nc(e,t,n){var r=void 0===n?{}:n,o=r.state,a=r.reducer,c=r.computed,i=r.watch,u=r.init;if(!Ve.isStartup)throw Error("cc is not startup yet");nt(e),rt(t,!1);var s=Ve.moduleName_stateFn_[t];if(!s)throw Error("target module["+t+"] state must be a function when use cloneModule");var d=s();Object.assign(d,fe(o));var f=or(Ve.reducer._reducer[t]||{},e);a&&Object.assign(f,or(a,e));var l=Ve.computed._computedRaw[t]||{};c&&Object.assign(l,c);var p=Ve.watch._watchRaw[t]||{};i&&Object.assign(p,i);var y=Ve.init._init[t];u&&(y=u);var _={state:d,reducer:f,computed:l,watch:p};y&&(_.init=y),rr(e,_)}function rc(t,e){function r(e,t){var n=t.state,r=t.reducer,o=void 0===r?{}:r,a=t.watch,c=t.computed,i=t.init,u=t.isClassSingle;if(s.store[e])throw Error("run api error: module"+e+" duplicate");s.store[e]=ka(n),"function"==typeof n&&(Ve.moduleName_stateFn_[e]=n),s.reducer[e]=o,a&&(s.watch[e]=a),c&&(s.computed[e]=c),i&&(s.init[e]=i),s.moduleSingleClass[e]=!0===u}void 0===t&&(t={}),void 0===e&&(e={}),Ra(t)||Aa("store"),Ra(e)||Aa("options");var s={store:{},reducer:{},watch:{},computed:{},init:{},moduleSingleClass:{}};Ma(t).forEach(function(e){return r(e,t[e])}),Je.forEach(function(e){var t=e.module,n=e.config;Y("configure pending module["+t+"]"),r(t,n)}),Je.length=0,Ta(s.init)&&(s.init=null),Da(s,e)}function oc(e,t){return Wa({connect:e},t)}function ac(e,t){return Pa({connect:e},t)}function cc(e,o){var a=ae(e);function t(n){var e=a.memo,t=void 0===e||e;function r(){return function(e){a.props=e;var t=Ya(a,o);return D.createElement(n,a.mapProps?t.mapped:t)}}return delete a.memo,t&&D.memo?D.memo(r()):r()}"function"==typeof a.state&&(a.state=a.state());var n=a.render;return n?t(n):function(e){return t(e)}}function ic(e,t,n,r,o){void 0===o&&(o=!1);try{ft().ctx.setGlobalState(e,t,n,r)}catch(e){if(o)throw e;G(e.message)}}function uc(e,t,n,r,o,a){void 0===r&&(r=-1),void 0===a&&(a=!1),void 0===e&&void 0===t&&Xa(),"string"!=typeof e&&Xa(),On(e,t,n,r,o)}function sc(e,t,n,r){ft().ctx.set(e,t,n,r)}function dc(e,t){if(!e.includes("/"))throw Error("keyPath must start with module");var n=e.split("/"),r=Ja(n[0]);return Gr(e,t,!1,r,!1).state}function fc(e){return Sc[e].connectedState||{}}function lc(e){return e?Qa[e]:Qa}function pc(e){if(void 0===e)throw Error("api doc: cc.emit(event:string|{name:string, identity?:string, ctx?:boolean}, ...args)");try{for(var t,n=ft(),r=arguments.length,o=Array(1<r?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];(t=n.ctx).emit.apply(t,[e].concat(o))}catch(e){G(e)}}function yc(e,t){try{ft().ctx.off(e,t)}catch(e){if(t.throwError)throw e;G(e.message)}}function _c(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];(function(e){var n=[],t=ec[e];return t&&t.ccKeys.forEach(function(e){var t=Za[e];t&&n.push(t)}),n})(e).forEach(function(e){var t;e.__$$isUnmounted||e.ctx.execute&&(t=e.ctx).execute.apply(t,n)})}function vc(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];tc().forEach(function(e){var t;e.ctx.execute&&(t=e.ctx).execute.apply(t,n)})}function mc(e,t,n){return{fn:e,depKeys:t,compare:n}}function hc(e,t,n){return{fn:e,depKeys:t,compare:n,lazy:!0}}function Cc(e,t){return void 0===t&&(t=!0),{fn:function(){return e},depKeys:[],compare:t}}function Kc(e,t,n,r){return{fn:e,depKeys:t,compare:n,immediate:r}}function gc(e,t,n){return{fn:e,depKeys:t,compare:n,immediate:!0}}var Sc=Ve.ccClassKey_ccClassContext_,Ec=Wa,$c=Pa,wc=rr,bc=Ja,xc=Ve.store.getGlobalState,Uc=vt,Nc=Ve,Oc=ya,Ic=tc,Dc=Ve.reducer._caller,Ac=wa,Rc=ja,Mc=u,Tc=Ve.store.appendState,kc=Ya,Wc={cloneModule:nc,emit:pc,off:yc,connect:oc,connectDumb:ac,register:Ec,registerDumb:$c,registerHookComp:cc,configure:wc,dispatch:Uc,run:rc,setGlobalState:ic,setState:uc,set:sc,setValue:dc,getGlobalState:xc,getState:bc,getComputed:lc,getConnectedState:fc,ccContext:Nc,createDispatcher:Oc,execute:_c,executeAll:vc,getRefs:Ic,reducer:Dc,clearContextIfHot:Ac,CcFragment:Rc,cst:Mc,appendState:Tc,useConcent:kc,bindCcToMcc:Fc,defComputed:mc,defLazyComputed:hc,defComputedVal:Cc,defWatch:Kc,defWatchImmediate:gc};function Fc(e){if(!jc)throw Error("current env is not multi concent ins mode");if(jc[e])throw Error("ccNamespace["+e+"] already existed in window.mcc");!function(e){ce=e}(e),re(e,Wc,jc)}function Lc(){var e=ce?window.mcc[ce]:window.cc;if(e&&e.ccContext&&e.ccContext.info){var t=e.ccContext.info.version,n=Nc.info.version;if(t!==n)throw Error("a existed version concent "+t+" is different with current about to import concent "+n+", \n        it may caused by some of your concent-eco-module with older version concent, please reinstall them (concent-*** module)")}}var jc=window.mcc;jc?setTimeout(function(){if(!ie())throw Error("detect window.mcc, but user forget call bindCcToMcc in bundle entry");Lc()},1e3):(Lc(),re("cc",Wc)),e.cloneModule=nc,e.run=rc,e.connect=oc,e.connectDumb=ac,e.register=Ec,e.registerDumb=$c,e.registerHookComp=cc,e.configure=wc,e.setGlobalState=ic,e.setState=uc,e.set=sc,e.setValue=dc,e.getState=bc,e.getGlobalState=xc,e.getConnectedState=fc,e.getComputed=lc,e.emit=pc,e.off=yc,e.dispatch=Uc,e.ccContext=Nc,e.createDispatcher=Oc,e.execute=_c,e.executeAll=vc,e.getRefs=Ic,e.reducer=Dc,e.clearContextIfHot=Ac,e.CcFragment=Rc,e.cst=Mc,e.appendState=Tc,e.useConcent=kc,e.defComputed=mc,e.defLazyComputed=hc,e.defComputedVal=Cc,e.defWatch=Kc,e.defWatchImmediate=gc,e.bindCcToMcc=Fc,e.default=Wc,Object.defineProperty(e,"__esModule",{value:!0})});
