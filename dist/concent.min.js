!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["exports","react","react-dom"],t):t(e.concent={},e.React,e.ReactDOM)}(this,function(e,R,n){"use strict";R=R&&R.hasOwnProperty("default")?R.default:R,n=n&&n.hasOwnProperty("default")?n.default:n;var t,r,$={},te="$$global",q="$$default",V="$$cc",B="$$concent_void_module_624313307",o="$$CONCENT_ROUTER",T="$$CcClass",U="$$CcFrag",re="$$CcHook",h="$$Cc",G="$$Dispatcher",a="__cc_dispatcher_container_designed_by_zzk_qq_is_624313307__",ne=Symbol("__for_sync_param_ccsync__"),b=Symbol("__for_mock_event__"),i=Symbol("__lazy_handle_state__"),I=10,x=11,D=13,k="dispatch",oe="setState",ae="setModuleState",ie="forceUpdate",N="invoke",g="sync",_="module",ce="ref",M="watch",ue={CC_MODULE_NAME_DUPLICATE:1002,CC_MODULE_NOT_FOUND:1012,CC_DISPATCH_STRING_INVALID:1013,CC_DISPATCH_PARAM_INVALID:1014,CC_MODULE_NOT_CONNECTED:1015,CC_CLASS_KEY_DUPLICATE:1100,CC_CLASS_INSTANCE_KEY_DUPLICATE:1200,CC_CLASS_INSTANCE_MORE_THAN_ONE:1205,CC_STORED_KEYS_NEED_CCKEY:1207,CC_REDUCER_NOT_A_FUNCTION:1503},c=((t={})[ue.CC_MODULE_NAME_DUPLICATE]="module name duplicate!",t[ue.CC_MODULE_NOT_FOUND]="module not found!",t[ue.CC_DISPATCH_STRING_INVALID]="when type param is string, it must be one of these format: (fnName)„ÄÅ(moduleName)/(fnName)",t[ue.CC_DISPATCH_PARAM_INVALID]="dispatch param type is invalid, it must be string or object",t[ue.CC_MODULE_NOT_CONNECTED]="module not been connected by ref",t[ue.CC_CLASS_INSTANCE_KEY_DUPLICATE]="props.ccKey duplicate",t[ue.CC_CLASS_INSTANCE_MORE_THAN_ONE]="ccClass is declared as singleton, trying new another one instance is not allowed! ",t[ue.CC_STORED_KEYS_NEED_CCKEY]="you must explicitly specify a ccKey for ccInstance when set storedKeys!",t[ue.CC_CLASS_KEY_DUPLICATE]="ccClassKey duplicate!",t[ue.CC_REDUCER_NOT_A_FUNCTION]="reducer must be a function!",t),u=Object.freeze({MODULE_GLOBAL:te,MODULE_DEFAULT:q,MODULE_CC:V,MODULE_VOID:B,MODULE_CC_ROUTER:o,CC_CLASS:T,CC_FRAGMENT:U,CC_HOOK:re,CC_PREFIX:h,CC_DISPATCHER:G,CC_DISPATCHER_BOX:a,CCSYNC_KEY:ne,MOCKE_KEY:b,LAZY_KEY:i,SIG_FN_START:I,SIG_FN_END:x,SIG_FN_QUIT:12,SIG_FN_ERR:D,SIG_MODULE_CONFIGURED:14,SIG_STATE_CHANGED:15,RENDER_NO_OP:1,RENDER_BY_KEY:2,RENDER_BY_STATE:3,FOR_ONE_INS_FIRSTLY:1,FOR_ALL_INS_OF_A_MOD:2,EFFECT_AVAILABLE:1,EFFECT_STOPPED:0,DISPATCH:k,SET_STATE:oe,SET_MODULE_STATE:ae,FORCE_UPDATE:ie,INVOKE:N,SYNC:g,CATE_MODULE:_,CATE_REF:ce,FN_CU:"computed",FN_WATCH:M,ERR:ue,ERR_MESSAGE:c,default:{MODULE_GLOBAL:te,MODULE_DEFAULT:q,MODULE_CC:V,ERR:ue,ERR_MESSAGE:c,FOR_ONE_INS_FIRSTLY:1,FOR_ALL_INS_OF_A_MOD:2}}),s=((r={})[te]={},r[q]={},r[V]={},r),d={},f={},F={_computedValue:s,_computedRaw:f,_computedDep:d,getRootComputedValue:function(){return s},getRootComputedDep:function(){return d},getRootComputedRaw:function(){return f}},l={},p={},C={_watchRaw:p,_watchDep:l,getRootWatchDep:function(){return l},getRootWatchRaw:function(){return p}},L={alwaysGiveState:!0,isStrict:!1,isDebug:!1,computedCompare:!0,watchCompare:!0,watchImmediate:!1,bindCtxToMethod:!1},se="is not a plain json object!",K="should be an string array or *!",y=console.error;function v(e){return null!=e&&0<J(e).length}function m(e){return!v(e)}function de(e,t){if(void 0===t&&(t=!1),!e)return!1;var r="object"==typeof e;if(r){var n=Array.isArray(e);return t?n:r&&!n}return!1}function S(e,t){var r="";r="string"==typeof e?e:c[e]||"",t&&(r+=t),r||(r="undefined message for code:"+e);var n=Error(r);return n.code=e,n}function E(e,t){return e+"$"+t}function w(e){return e?" --verbose-info: "+e:""}function O(e){return void 0===e&&(e="green"),"color:"+e+";border:1px solid "+e}function A(e){return"%c"+e}var j=function(e){return"------------ CC "+e+" ------------"};function P(e){y(j("WARNING")),e instanceof Error?(y(e.message),y(e.stack)):y(e)}function H(e){console.log(j("TIP")),console.log("%c"+e,"color:green;border:1px solid green;")}function z(e){if(y(j("WARNING")),y(e),L.isStrict)throw e}function W(e,t,r){void 0===r&&(r={});var n=e[t];return n||(n=e[t]=r),n}function fe(e,t){var r=e[t];return r||(r=e[t]=[]),r}function Y(e){void 0===e&&(e=52);var t=Math.random();return parseInt(t*e)}function X(t,r,n){void 0===r&&(r=[]),Array.isArray(t)?t.length=0:Object.keys(t).forEach(function(e){r.includes(e)||(n?t[e]=n:delete t[e])})}function J(e){return Object.keys(e)}function Z(e){var t=null;return e&&(e.currentTarget&&e.type?t=e:e.nativeEvent&&e.target&&(e.currentTarget=e.target,t=e)),t}function Q(t,r,e){function n(e){e?e[t]=r:window[t]=r}window?n(e):setTimeout(function(){n(e)},3e3)}function ee(e,t){for(var r in e)if(!(r in t))return!0;for(var n in t)if(e[n]!==t[n])return!0;return!1}function le(e,t){var r=[];return e.forEach(function(e){t.includes(e)||r.push(e)}),r}function pe(e){return void 0===e&&(e={}),"string"==typeof e?{module:e}:Object.assign({module:q},e)}var ye="";function ve(){return ye}function me(){var t=null;return{commit:function(e){t||(t={}),Object.assign(t,e)},getFnCommittedState:function(){return t}}}function he(){var e=!1;return!window||("previewFrame"===window.name||window.__SANDBOX_DATA__||window.BrowserFS)&&(e=!0),e}function _e(e){return{payload:null,renderKey:"",delay:-1,module:e,fnName:""}}function Ce(e){void 0===e&&(e={});var t="function"==typeof e?e():e;if(!de(t))throw Error("state "+se);return t}var ge={module:{computed:{},watch:{}},ref:{computed:{},watch:{},effect:{}}};function Ke(e,t){var r=t[e];return{retKey:e,fn:r.fn,depKeys:r.depKeys}}function Se(e,t,r,n,o,a,i,c){var u=n[o],s=[];if(!u)return{pickedFns:s,setted:[],changed:[]};var d=u.retKey_fn_,f=u.stateKey_retKeys_,l=u.fnCount;if(e){var p=J(d),y=J(i),v=y;return"computed"===r?{pickedFns:p.map(function(e){return Ke(e,d)}),setted:y,changed:v}:(p.forEach(function(e){var t=d[e];t.immediate&&s.push({retKey:e,fn:t.fn,depKeys:t.depKeys})}),{pickedFns:s,setted:y,changed:v})}var m=function(r,n){var o=[],a=[];return J(n).forEach(function(e){var t=n[e];void 0!==t&&(a.push(e),t!==r[e]&&o.push(e))}),{changed:o,setted:a}}(a,i),h=m.setted,_=m.changed;if(0===h.length)return{pickedFns:s,setted:[],changed:[]};var C=h.join(",")+"|"+_.join(",")+"|"+o,g=ge[t][r],K=c?W(g,c):g,S=K[C];return S?{pickedFns:S.map(function(e){return Ke(e,d)}),setted:h,changed:_}:(function(u,o,s,d,a,f){if(0===o.length)return;var e=a["*"];if(e){var i=0<s.length;e.forEach(function(e){var t=d[e],r=t.fn,n=t.compare,o=t.depKeys,a={retKey:e,fn:r,depKeys:o};n?i&&u.push(a):u.push(a)})}u.length<f&&function(){var c={},e=o.length,t=function(e){var i=o[e],t=a[i];return t?(t.forEach(function(e){if(!c[e]){var t=d[e],r=t.fn,n=t.compare,o=t.depKeys,a=!0;n&&!s.includes(i)&&(a=!1),a&&(c[e]=!0,u.push({retKey:e,fn:r,depKeys:o}))}}),u.length===f?"break":void 0):"continue"};e:for(var r=0;r<e;r++){var n=t(r);switch(n){case"continue":continue;case"break":break e}}}()}(s,h,_,d,f,l),K[C]=s.map(function(e){return e.retKey}),{pickedFns:s,setted:h,changed:_})}function Ee(e,t,r){var n=t[r];return void 0!==n&&(e[r]=n,!0)}function we(t,r,e,n){void 0===r&&(r=[]),void 0===e&&(e=!1),void 0===n&&(n=!1);var o={},a=[];if(!de(t))return{partialState:e?null:o,isStateEmpty:!0,ignoredStateKeys:a};var i=!0,c=J(t);return c.length<r.length?c.forEach(function(e){r.includes(e)?Ee(o,t,e)&&(i=!1):n&&a.push(e)}):(r.forEach(function(e){Ee(o,t,e)&&(i=!1)}),n&&(a=le(c,r))),i&&e&&(o=null),{partialState:o,isStateEmpty:i,ignoredStateKeys:a}}for(var be,Ne=function(K,S,E,w,b,e,N,O,I,U,x,D,A){for(var R=0,T=e,k=!0,t=function(){var e=b(T,1===++R&&U),t=e.pickedFns,n=e.setted,o=e.changed;if(!t.length)return"break";var r=me(),a=r.commit,i=r.getFnCommittedState,c=me(),u=c.commit,s=c.getFnCommittedState;if(t.forEach(function(e){var t=e.retKey,r=function(e,t,r,n,o,a){var i;if(L.alwaysGiveState)i=r(n,o,a);else{var c=t[0];i=1===t.length&&"*"!==c&&c===e?r(n[c],o[c],a):r(n,o,a)}return i}(t,e.depKeys,e.fn,N,w,{retKey:t,callInfo:I,isFirstCall:U,commit:a,commitCu:u,setted:n,changed:o,stateModule:S,refModule:E,oldState:w,committedState:T,refCtx:K});"computed"===x?A[t]=r:!1===r&&(k=!1)}),T=i()){var d=function(e,t){void 0===t&&(t=!1),T=e,t&&0===J(e).length?T=null:(Object.assign(N,T),Object.assign(O,T))},f=we(T,"ref"===D?K.privStateKeys:$[S],!0,!0),l=f.partialState,p=f.ignoredStateKeys;if(l)if(x===M){var y=(D===ce?K.computedDep[K.module]||{}:F._computedDep[S]||{}).stateKey_retKeys_;if(y){var v=[],m={};J(l).forEach(function(e){y[e]?v.push(e):m[e]=l[e]}),0<v.length&&P("these state keys["+v.join(",")+"] will been ignored, cause they are also appeared in computed depKeys,\n              cc suggest you move the logic to computed file."),d(m,!0)}else d(l)}else d(l);if(p.length){var h="they are not "+(D===ce?"private":"module")+", fn is "+D+" "+x;P("these state keys["+p.join(",")+"] are invalid, "+h)}}var _=s();if(_){var C;if("ref"===D)C="computed"===x?K.computedRetKeyFns:K.watchRetKeyFns;else{var g=F.getRootComputedDep()[S]||{};C=g.retKey_fn_||null}C&&J(_).forEach(function(e){C[e]?A[e]=_[e]:P("fnCtx.commitCu commit an invalid retKey["+e+"] for moduleComputed")})}if(10<R)throw Error("fnCtx.commit may goes endless loop, please check your code")};T;){if("break"===t())break}return k},Oe=F._computedValue,Ie=J,Ue={},xe=function(r,e,t){var n=void 0===t?{}:t,o=n.refCtx,a=void 0===o?null:o,i=n.callInfo,c=void 0===i?{}:i,u=De(r),s=Ae(r),d=Oe[r],f=F.getRootComputedDep(),l=C.getRootWatchDep(),p=a?a.module:null,y=Object.assign({},u,e),v=Object.assign({},e),m=v;return Ne(a,r,p,u,function(e,t){return Se(t,_,"computed",f,r,u,e)},m,y,v,c,!1,"computed",_,d),Ne(a,r,p,u,function(e,t){return Se(t,_,"watch",l,r,u,e)},m,y,v,c,!1,"watch",_,d),Ie(v).forEach(function(e){s[e]=u[e],Re(r,e),u[e]=v[e]}),v},De=function(e){return ke[e]},Ae=function(e){return $e[e]},Re=function(e,t){Me[e][t]++},Te=function(){var e;return(e={})[V]={},e[B]={},e[te]={},e[q]={},e},ke=Te(),$e=Te(),Me={},Fe={getDispatcher:function(){return Ue[G]},isHotReloadMode:function(){return!!Fe.isHot||window&&(window.webpackHotUpdate||he())},runtimeVar:L,isHot:!1,reComputed:!0,isStartup:!1,moduleSingleClass:{},moduleName_stateFn_:{},moduleName_ccClassKeys_:{},moduleName_stateKeys_:$,moduleName_isConfigured_:{},connectedModuleName_ccClassKeys_:{},ccClassKey_ccClassContext_:{},globalStateKeys:[],store:{appendState:function(e,t){var r=fe($,e);J(t).forEach(function(e){r.includes(e)||r.push(e)}),Fe.store.setState(e,t)},_state:ke,_prevState:$e,_stateVer:Me,getState:function(e){return e?De(e):ke},getPrevState:function(e){return e?Ae(e):$e},getStateVer:function(e){return e?Me[e]:Me},setState:function(e,t,r){return xe(e,t,r)},setGlobalState:function(e){return xe(te,e)},getGlobalState:function(){return ke[te]}},reducer:{_reducer:(be={},be[te]={},be[V]={},be),_caller:{},_fnName_fullFnNames_:{},_module_fnNames_:{}},computed:F,watch:C,refStore:{_state:{},setState:function(e,t){var r=Fe.refStore._state,n=Object.assign({},r[e],t);r[e]=n}},init:{_init:{}},ccUkey_ref_:Ue,event_handlers_:{},ccUKey_handlerKeys_:{},handlerKey_handler_:{},renderKey_ccUkeys_:{},refs:Ue,info:{packageLoadTime:Date.now(),firstStartupTime:"",latestStartupTime:"",version:"1.5.173",author:"fantasticsoul",emails:["624313307@qq.com","zhongzhengkai@gmail.com"],tag:"destiny"},fragmentNameCount:0,featureStr_classKey_:{},userClassKey_featureStr_:{},errorHandler:null,middlewares:[],plugins:[]},Le=localStorage.length,je=Fe.refStore._state,Pe=0;Pe<Le;Pe++){var He=localStorage.key(Pe);if(He.startsWith("CCSS_"))try{je[He.substr(5)]=JSON.parse(localStorage.getItem(He))}catch(e){console.error(e)}}var qe=[],Ve=function(e){return e.toLowerCase()===V},Be=function(e){return/^[\$\#\&a-zA-Z0-9_-]+$/.test(e)},Ge=w,ze=S;function We(e){if(!Be(e))throw Error("module["+e+"] writing is invalid!");if(Ve(e))throw Error("'$$cc' is a built-in module name for concent")}function Ye(e,t,r){void 0===t&&(t=!0),void 0===r&&(r="");var n=r||"module["+e+"]",o=Fe.store._state;if(We(e),e!==te)if(t){if(v(o[e]))throw ze(ue.CC_MODULE_NAME_DUPLICATE,Ge(n))}else if(!o[e])throw ze(ue.CC_MODULE_NOT_FOUND,Ge(n))}function Xe(t,e){var r=Array.isArray(e);if(!r&&"*"!==e)throw Error("storedKeys type err, "+K);r&&e.forEach(function(e){if(t.includes(e))throw Error("the item["+e+"] of storedKeys is not a module state key!")})}var Je={},Ze=function(e,t,r){if(e.code!==ue.CC_MODULE_NAME_DUPLICATE||!Fe.isHotReloadMode())throw e;var n=function(e){e||(e="");for(var t=e.split("\n"),r=t.length,o="",a=0;a<r;a++)if(t[a].includes(".checkModuleNameAndState")){!function(){var e=t[a+3].split(":"),r=e.length-1,n=[];e.forEach(function(e,t){t!==r&&n.push(e)}),o=n.join(":")}();break}return o}(e.stack),o=r+"|--link--|"+t,a=Je[o];if(a){if(n!==a)throw e}else Je[o]=n};function Qe(t,e,r){void 0===r&&(r=!0);var n=t===B?{}:e;try{!function(e,t,r){if(Ye(e,r),!de(t))throw Error("module["+e+"]'s state "+se)}(t,n,r)}catch(e){Ze(e,t,"state")}var o=Fe.store,a=o.getState(),i=o.getStateVer();o.getPrevState()[t]=Object.assign({},a[t]=n),i[t]=J(n).reduce(function(e,t){return e[t]=1,e},{});var c=Object.keys(n);if(Fe.moduleName_stateKeys_[t]=c,t===te){var u=Fe.globalStateKeys;c.forEach(function(e){u.includes(e)||u.push(e)})}}function et(e,t){void 0===t&&(t=!1);var r=Fe.ccUkey_ref_,n=Fe.moduleName_ccClassKeys_,o=Fe.ccClassKey_ccClassContext_,a=[];if(e){if(!Fe.store._state[e])throw Error("module["+e+"] is not declared in store");var i=n[e];if(i&&0!==i.length){var c=i[0],u=o[c];if(!u)throw Error("no ccClassContext found for ccClassKey "+c+"!");a=u.ccKeys}if(e===q&&(a=a.filter(function(e){return!e.startsWith(U)})),0===a.length){if(!1!==t){throw Error("[[pickOneRef]]: no ref found for module["+e+"]!,if this message doesn't matter, you can ignore it")}a=[G]}}else a=[G];var s=r[a[0]];if(!s)throw Error("cc found no ref!");return s}var tt=E,rt=P,nt=function(){return Promise.resolve()};function ot(e,t,r,n,o){void 0===r&&(r="");var a=void 0===o?{}:o,i=a.ccClassKey,c=a.ccKey,u=a.throwError,s=a.refModule,d=void 0===s?"":s;if(void 0===e&&void 0===t)throw Error("params type error");var f,l="",p="";try{if(i&&c){var y=tt(i,c),v=Fe.refs[y];if(!v)return rt("no ref found for ccUniqueKey:"+y+"!"),nt();f=v.ctx.dispatch}else{if("string"==typeof e)if(e.includes("/")){var m=e.split("/");l=m[0],p=m[1]}else p=e;var h;if(!(h=l&&"*"!==l?et(l):d?et(d):et()))return rt("no ref found"),nt();f=h.ctx.dispatch}if("*"!==l)return f(e,t,r,n);var _=Fe.reducer._fnName_fullFnNames_[p];if(!_)return;var C=[];return _.forEach(function(e){C.push(f(e,t,r,n))}),Promise.all(C)}catch(e){if(u)throw e;return rt(e.message),nt()}}function at(e,t,r,n,o){return ot(e,t,r,n,o)}function it(a,e){void 0===e&&(e={});var t="module["+a+"] reducer";if(!de(e))throw Error(t+" "+se);Ye(a,!1,t+" is invalid");var r=Fe.reducer,n=r._reducer,o=r._caller,i=r._fnName_fullFnNames_,c=r._module_fnNames_,u=Object.assign({},e);n[a]=u;var s=W(o,a),d=fe(c,a);u.setState||(u.setState=function(e){return e}),J(u).forEach(function(e){d.includes(e)||d.push(e);var n=a+"/"+e,t=fe(i,e);t.includes(n)||t.push(n),s[e]=function(e,t,r){return at(n,e,t,r)};var o=u[e];if("function"!=typeof o)throw Error("reducer key["+e+"] 's value is not a function");var r=o;o.__fnName&&(u[e]=r=function(e,t,r){return o(e,t,r)}),r.__fnName=e,r.__stateModule=a,r.__ctName=o.__ctName||o.constructor.name})}var ct=0,ut=["a","A","b","B","c","C","d","D","e","E","f","F","g","G","h","H","i","I","j","J","k","K","l","L","m","M","n","N","o","O","p","P","q","Q","r","R","s","S","t","T","u","U","v","V","w","W","x","X","y","Y","z","Z"];function st(e){return ct++,(e||function(e){void 0===e&&(e=6);for(var t="",r=0;r<e;r++)t+=ut[Y()];return t}())+"_"+ct}var dt=Fe.moduleName_stateKeys_,ft=Fe.runtimeVar;function lt(e,t,r,n,o,a,i){var c=t.refCtx,u=t.type;if(e!==ce||c.__$$isBSe){if(r){var s,d,f,l=typeof r;if("string"==l)s=de(n)?((d={})[r]=n,d):((f={})[r]={fn:n,depKeys:o,compare:a,immediate:i},f);else if(de(r))s=r;else if("function"==l&&!de(s=r(c)))throw Error("type of "+u+" callback result must be an object");s?function(N,O,I){var e=ft.computedCompare,t=ft.watchCompare,U=ft.watchImmediate,x="computed"===O.type?e:t,D=O.module;J(I).forEach(function(i){var e=I[i],t=typeof e,r=e;if("function"==t&&(r={fn:e}),de(r)){var n=r,o=n.fn,a=n.depKeys,c=n.immediate,u=void 0===c?U:c,s=n.compare,d=void 0===s?x:s,f=st("mark");if("*"===a){var l=vt(O,D,i),p=l.isStateKey,y=l.stateKey;if(!p)throw Error("retKey["+i+"] is not a state key of module["+D+"]");pt(N,O,f,y),yt(N,O,D,y,o,a,u,d)}else{if(a&&!Array.isArray(a))throw Error("depKeys must an string array or *");if(a&&0!==a.length){var v="",m=i;if(i.includes("/")){var h=i.split("/"),_=h[0],C=h[1];v=_,m=C}pt(N,O,f,m);var g={};a.forEach(function(e){var t=vt(O,D,e),r=t.isStateKey,n=t.stateKey,o=t.module;if(v&&o!==v)throw Error("including slash both in retKey["+i+"] and depKey["+e+"] founded, but their module is different");var a=fe(g,o);if(!r)throw Error("depKey["+e+"] invalid, module["+o+"] doesn't include its stateKey["+n+"]");a.push(n)}),J(g).forEach(function(e){yt(N,O,e,m,o,g[e],u,d)})}else{var K=vt(O,D,i),S=K.isStateKey,E=K.stateKey,w=K.module,b=[];!a&&S&&(b=[E]),pt(N,O,f,E),yt(N,O,w,E,o,b,u,d)}}}else P("retKey["+i+"] item type error")})}(e,t,s):P(e+" "+u+" param type error")}}else P(e+" "+u+" must be been called in setup block")}function pt(e,t,r,n){if(e===ce){var o=t.refCtx,a=o.retKey_fnUid_,i=t.type,c=i+"_"+n;if(a[c])throw Error("ccUKey["+o.ccUniqueKey+"], retKey["+n+"] duplicate in ref "+i);a[c]=r}}function yt(e,t,r,n,o,a,i,c){var u=W(t.dep,r,{retKey_fn_:{},stateKey_retKeys_:{},fnCount:0}),s=u.retKey_fn_,d=u.stateKey_retKeys_,f={fn:o,immediate:i,compare:c,depKeys:a};s[n]?e!==ce&&(s[n]=f):(s[n]=f,u.fnCount++);var l=a;"*"===a&&(l=["*"]),e===ce&&(t.retKeyFns[n]=s[n]);var p=t.refCtx;p&&("computed"===t.type?p.hasComputedFn=!0:p.hasWatchFn=!0),l.forEach(function(e){var t=fe(d,e);t.includes(n)||t.push(n)})}function vt(e,t,r){var n,o=t,a=r;if(r.includes("/")){var i=r.split("/"),c=i[0];c&&(o=c),a=i[1]}if(o===e.module)n=e.stateKeys;else{if(!(n=dt[o]))throw S(ue.CC_MODULE_NOT_FOUND,w("module["+o+"]"));if(!e.connect[o])throw S(ue.CC_MODULE_NOT_CONNECTED,w("module["+o+"], stateKey["+a+"]"))}return{isStateKey:n.includes(a),stateKey:a,module:o}}var mt=W,ht=de;function _t(r,e){if(e){var t="module["+r+"] computed";if(!ht(e))throw Error(t+" "+se);Ye(r,!1,t+" is invalid");var n=Fe.computed,o=Fe.store.getState(),a=n.getRootComputedValue(),i=n.getRootComputedDep();n.getRootComputedRaw()[r]=e;var c=o[r];lt(_,{module:r,stateKeys:J(c),dep:i},e);var u=Fe.getDispatcher(),s=Object.assign({},c),d=mt(a,r);Ne(u&&u.ctx,r,u&&u.ctx.module,c,function(e,t){return Se(t,_,"computed",i,r,c,e)},c,c,s,_e(r),!0,"computed",_,d)}}var Ct=de,gt=W,Kt=J;function St(r,e,t){if(void 0===t&&(t=!1),e){var n="module["+r+"] watch";if(!Ct(e))throw Error(n+" "+se);Ye(r,!1,n+" is invalid");var o=Fe.watch.getRootWatchDep(),a=Fe.watch.getRootWatchRaw(),i=Fe.computed.getRootComputedValue();if(t){var c=a[r];c?Object.assign(c,e):a[r]=e}else a[r]=e;var u=(0,Fe.store.getState)(r);lt(_,{module:r,stateKeys:Kt(u),dep:o},e);var s=Fe.getDispatcher(),d=Object.assign({},u),f=gt(i,r);Ne(s&&s.ctx,r,s&&s.ctx.module,u,function(e,t){return Se(t,_,"watch",o,r,u,e)},u,u,d,_e(r),!0,"watch",_,f)}}var Et=[I,x,12,D,14,15],wt={};function bt(t,r){wt[t].forEach(function(e){e({sig:t,payload:r})})}function Nt(e,t){function r(e,t){var r=wt[e];r?r.push(t):console.warn("invalid sig["+e+"]")}Array.isArray(e)?e.forEach(function(e){r(e,t)}):r(e,t)}Et.forEach(function(e){return wt[e]=[]});var Ot=function(e){if(!Fe.errorHandler)throw e;Fe.errorHandler(e)},It=0,Ut={},xt={},Dt={},At={};function Rt(){return++It}function Tt(e,t,r,n){if(r){var o=n[e];o||(o=n[e]={});var a=o[t];a?Object.assign(a,r):o[t]=r}}function kt(e,t,r){Tt(e,t,r,Ut)}function $t(e,t,r){return kt(e,t,r),function(e){var t=function(e){return Ut[e]}(e),r=[];return J(t).forEach(function(e){r.push({module:e,state:t[e]})}),r}(e)}function Mt(e){delete Ut[e]}var Ft={},Lt=function(e,t,r){void 0===r&&(r=1e3);var n=Ft[t];n&&clearTimeout(n),Ft[t]=setTimeout(function(){delete Ft[t],e()},r)};function jt(e,r,n,t,o,a,i){if(void 0===i&&(i=!1),!e.hasWatchFn)return!0;var c=Object.assign({},t),u=e.watchDep,s=e.module,d=e.ccUniqueKey,f=e.refComputed,l=Object.assign({},n,t),p=Ne(e,r,s,n,function(e,t){return Se(t,"ref","watch",u,r,n,e,d)},t,l,c,o,a,"watch",ce,f);return i&&Object.assign(t,c),p}function Pt(e,r,n,t,o,a,i){void 0===a&&(a=!1),void 0===i&&(i=!1);var c=Object.assign({},t);if(!e.hasComputedFn)return c;var u=e.computedDep,s=e.module,d=e.refComputed,f=e.ccUniqueKey,l=Object.assign({},n,t);return Ne(e,r,s,n,function(e,t){return Se(t,ce,"computed",u,r,n,e,f)},t,l,c,o,a,"computed",ce,d),i&&Object.assign(t,c),c}var Ht=de,qt=P,Vt=v,Bt=function(e,t){return e+"/"+Object.keys(t).sort().join("|")},Gt=J,zt=le,Wt=1,Yt=2,Xt=ie,Jt=oe,Zt=ae,Qt=N,er=g,tr=15,rr=1,nr=2,or=3,ar=Fe.store,ir=ar.setState,cr=ar.getPrevState,ur=Fe.middlewares,sr=Fe.moduleName_ccClassKeys_,dr=Fe.ccClassKey_ccClassContext_,fr=Fe.connectedModuleName_ccClassKeys_,lr=Fe.refStore,pr=Fe.moduleName_stateKeys_,yr=Fe.ccUkey_ref_,vr=Fe.renderKey_ccUkeys_;function mr(e,t,r){var n=void 0===t?{}:t,o=n.module,a=n.skipMiddleware,i=void 0!==a&&a,c=n.payload,u=n.reactCallback,s=n.type,d=n.calledBy,f=void 0===d?Jt:d,l=n.fnName,p=void 0===l?"":l,y=n.renderKey,v=void 0===y?"":y,m=n.delay,h=void 0===m?-1:m;if(void 0!==e)if(Ht(e)){var _=r.ctx,C=_.module,g=_.ccUniqueKey,K=_.ccKey,S=function(e,t){return e===t?Wt:Yt}(o,C),E={payload:c,renderKey:v,ccKey:K,module:o,fnName:p},w=function(e,t,r){var n=we(t,pr[e],!0).partialState;if(n){var o=ir(e,n,r);return Object.assign(n,o),n}return n}(o,e,{refCtx:S===Wt?r.ctx:null,callInfo:E});Object.assign(e,w),hr(r,E,v,f,e,S,u,function(e,t){e===rr&&!w||bt(tr,{committedState:t,sharedState:w,module:o,type:function(e,t){return[Xt,Jt,Zt,Qt,er].includes(e)?"ccApi/"+e:"dispatch/"+t}(f,s),ccUniqueKey:g,renderKey:v}),w&&function(e,t,r,n,o,a,i){var c=function(){!function(d,e,f,t,r,n){if(!f)return;var o=e.ctx,l=o.ccUniqueKey,a=dr[o.ccClassKey].renderKeyClasses,p=t===Wt,y=sr[r]||[],v=[];if(n){y="*"===a?[]:zt(y,a);var i=vr[n]||[],c=function(e,t){var r=e.indexOf(t);if(-1<r){var n=e.slice();return n.splice(r,1),n}return e}(i,l);(function(e,n,o,a){e.forEach(function(e){var t=yr[e],r=t.ctx.module;r===n?hr(t,a,null,"broadcastState",o,Wt):H("although ref's renderKey matched but its module "+r+" mismatch target module "+n+", cc will ignore trigger it re-render")})})(v=c,r,f,d)}for(var u=y.length,s=function(e){var t=y[e],r=dr[t],n=r.ccKeys,o=r.watchedKeys,a=r.originalWatchedKeys;if(0===n.length)return"continue";if(0===o.length)return"continue";var i=void 0;if("*"===a)i=f;else{var c=we(f,o,!0),u=c.partialState,s=c.isStateEmpty;if(s)return"continue";i=u}n.forEach(function(e){if(!(v.includes(e)||e===l&&p)){var t=yr[e];t&&hr(t,d,null,"broadcastState",i,Wt)}})},m=0;m<u;m++)s(m);!function(r,n,o){var a=Gt(n);(fr[r]||[]).forEach(function(e){var t=dr[e];!function(e,o,a,t,i){var r=e.connectedModuleKeyMapping;if(1===e.connectedModule[o]){for(var n=e.ccKeys,c=!1,u=t.length,s=0;s<u;s++){var d=o+"/"+t[s];if(r[d]){c=!0;break}}if(!0===c){var f=cr(o);n.forEach(function(e){var t=yr[e];if(t&&!0!==t.__$$isUnmounted){var r=t.ctx;Pt(r,o,f,a,i);var n=jt(r,o,f,a,i);n&&r.__$$ccForceUpdate()}})}}}(t,r,n,a,o)})}(r,f,d)}(e,t,r,n,o,a)};if(0<i){var u=Bt(t.ctx.ccUniqueKey,r);Lt(c,u,i)}else c()}(E,r,w,S,o,v,h)},i,{calledBy:f,type:s,payload:c,renderKey:v,delay:h,ccKey:K,ccUniqueKey:g,committedState:e,refModule:C,module:o,fnName:p,sharedState:w})}else qt("your committed state "+se)}function hr(e,t,r,n,o,a,i,c,u,s){var d=e.state,f=e.ctx;if(!0===e.__$$isUnmounted||a!==Wt||n!==Xt&&!Vt(o))return i&&i(d),c&&c(rr,o);var l=f.module,p=f.storedKeys,y=f.ccUniqueKey,v=or;if(r&&(v=nr,f.renderKey!==r))return c&&c(rr,o);if(0<p.length){var m=we(o,p),h=m.partialState;if(!m.isStateEmpty){if(!0===f.persistStoredKeys){var _=we(d,p),C=Object.assign({},_.partialState,h);localStorage.setItem("CCSS_"+y,JSON.stringify(C))}lr.setState(y,h)}}function g(){return f.__$$ccSetState(K,i,S)}var K=Pt(f,l,d,o,t),S=jt(f,l,d,K,t,!1,!0);c?(s.state=K,function(e,r,n){if(!0!==e){var o=ur.length;if(0<o){var a=0;!function e(){if(a===o)n();else{var t=ur[a];a++,"function"==typeof t?t(r,e):(qt("found one middleware is not a function"),e())}}()}else n()}else n()}(u,s,function(){g(),c(v,K)})):g()}function _r(e,t,r,n,o){void 0===n&&(n=-1);try{et(e).ctx.changeState(t,{ccKey:"[[top api:setState]]",module:e,renderKey:r,delay:n,skipMiddleware:o})}catch(e){z(e)}}var Cr=Fe.store.setState,gr=Fe.globalStateKeys,Kr="note! you are trying set state for global module, but the state you commit include some invalid keys which is not declared in cc's global state, \ncc will ignore them, but if this result is not as you expected, please check your committed global state!";var Sr=P,Er=de,wr=Fe.store,br=wr.getState,Nr=wr.setState,Or=Fe.reducer._reducer,Ir=Fe.computed._computedValue,Ur=S,xr=w;function Dr(e,t){void 0===t&&(t=!0);try{return Ye(e,!1,"module["+e+"] is not configured in store"),!0}catch(e){return function(e,t){if(void 0===t&&(t=!0),t)throw e;Tr(e)}(e,t),!1}}function Ar(o,a){return function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e?a(e):o.apply(void 0,r)}}function Rr(e,t,r,n){var o;return!0===e?(function(e){Dt[e]=!0}(o=Rt()),n[o]=1):n[o=t||Rt()]||(n[o]=1),{_chainId:o,_oriChainId:r||o}}function Tr(e,t){e&&(t?t(e):(Sr(e),Fe.errorHandler&&Fe.errorHandler(e)))}function kr(e,t,r){return function(n,o,a,i){return new Promise(function(e,t){var r=Object.assign(a,{__innerCb:Ar(e,t)});n(o,r,i)}).catch(Ot)}(jr,e,t,r)}function $r(e,t,r){return kr(e,{callerRef:t.callerRef,context:!0,module:t.module,calledBy:t.calledBy,fnName:e.name,delay:t.delay,renderKey:t.renderKey,chainId:t.chainId,oriChainId:t.oriChainId,chainId_depth_:t.chainId_depth_,isSilent:t.isSilent},r)}function Mr(a,i){return function(e,t,r){var n=a.ctx;if(i){var o=Object.assign({},n.state,e);i.state=o}r?(n.renderCount+=1,n.reactSetState(e,t)):(Object.assign(a.state,e),n.state=a.state)}}function Fr(r){return function(e){var t=r.ctx;t.renderCount+=1,t.reactForceUpdate(e)}}function Lr(_,e){var t=void 0===e?{}:e,C=t.chainId,g=t.oriChainId,K=t.isLazy,r=t.delay,S=void 0===r?-1:r,n=t.isSilent,E=void 0!==n&&n,o=t.chainId_depth_,w=void 0===o?{}:o;return function(e,t,r,n){var o=K,a=E,i="",c=null!=n?n:S;if(Er(r)){var u=r.lazy,s=r.silent,d=r.renderKey,f=r.delay;void 0!==u&&(o=u),void 0!==s&&(a=s),void 0!==d&&(i=d),void 0!==f&&(c=f)}else i=r;var l,p,y=Rr(o,C,g,w),v=typeof e,m={callerRef:_,calledBy:N,module:_.ctx.module,isSilent:a,chainId:y._chainId,oriChainId:y._oriChainId,chainId_depth_:w,delay:c,renderKey:i},h=Error("param type error, correct usage: invoke(userFn:function, ...args:any[]) or invoke(option:[module:string, fn:function], ...args:any[])");if("function"==v)return e.__fnName&&(e.name=e.__fnName),$r(e,m,t);if("object"!=v)throw h;if(p=Array.isArray(e)?(l=e[1],e[0]):(l=e.fn,e.module),"function"!=typeof l)throw h;return p&&(m.module=p),$r(l,m,t)}}function jr(l,e,p){var y=e.callerRef,v=y.ctx.module,t=e.module,m=void 0===t?v:t,r=e.context,h=void 0!==r&&r,_=e.__innerCb,C=e.type,g=e.calledBy,K=e.fnName,n=e.delay,S=void 0===n?-1:n,E=e.renderKey,w=e.chainId,b=e.oriChainId,N=e.chainId_depth_,O=e.isSilent;!function(e,t,r,n){var o=r;Dr(e,!1)?(e!==t&&r&&(Sr(function(e,t){return"param module["+e+"] must equal current ref's module["+t+"] when pass param reactCallback, or it will never been triggered! "}(e,t)),o=null),n(null,o)):n(Error("inputModule:"+e+" invalid"),null)}(m,v,e.cb,function(e,n){if(e)return Tr(e,_);var o,t=br(m),r={};if(o=w===b&&1===N[w],h){N[w]=N[w]+1;var a=Pr(y,!1,O,m,E,S,w,b,N),i=Pr(y,!1,!0,m,E,S,w,b,N),c=Pr(y,!0,O,m,E,S,w,b,N),u=Lr(y,{delay:S,chainId:w,oriChainId:b,chainId_depth_:N}),s=Lr(y,{isLazy:!0,delay:S,oriChainId:b,chainId_depth_:N}),d=Lr(y,{isLazy:!1,delay:S,isSilent:!0,oriChainId:b,chainId_depth_:N}),f=function(e){return At[e]}(w)||{};r={module:m,callerModule:v,committedStateMap:f,committedState:f[m]||{},invoke:u,lazyInvoke:s,silentInvoke:d,invokeLazy:s,invokeSilent:d,dispatch:a,lazyDispatch:c,silentDispatch:i,dispatchLazy:c,dispatchSilent:i,rootState:br(),globalState:br(te),moduleState:t,moduleComputed:Ir[m]||{},setState:function(e){return a("setState",e,{silent:O,renderKey:E,delay:S})},refCtx:y.ctx}}!1===O&&bt(I,{isSourceCall:o,calledBy:g,module:m,chainId:w,fn:l}),new Promise(function(e){return e(l(p,t,r))}).then(function(e){N[w]=N[w]-1;var t=1===N[w];!function(e,t,r){Tt(e,t,r,At)}(w,m,e);var r=[];!1===O&&(bt(x,{isSourceCall:o,calledBy:g,module:m,chainId:w,fn:l}),!function(e){return!0===Dt[e]}(w)?r=[{module:m,state:e}]:t?function(e){return!0===xt[e]}(w)||(r=$t(w,m,e),Mt(w)):kt(w,m,e)),r.forEach(function(e){e.state&&mr(e.state,{renderKey:E,module:e.module,reactCallback:n,type:C,calledBy:g,fnName:K,delay:S,payload:p},y)}),o&&(Mt(w),function(e){delete At[e]}(w)),_&&_(null,e)}).catch(function(e){bt(D,{isSourceCall:o,calledBy:g,module:m,chainId:w,fn:l}),Tr(e,_)})})}function Pr(N,O,I,U,x,D,A,R,T){return void 0===x&&(x=""),void 0===D&&(D=-1),void 0===T&&(T={}),function(e,r,t,n){void 0===e&&(e={});var o=O,a=I,i="",c=n||D;if(Er(t)){i=x;var u=t.lazy,s=t.silent,d=t.renderKey,f=t.delay;void 0!==u&&(o=u),void 0!==s&&(a=s),void 0!==d&&(i=d),void 0!==f&&(c=f)}else i=t||x;function l(){return Lr(N,{chainId:m,oriChainId:h,isLazy:o,chainId_depth_:T})(e,r,i,c)}var p,y,v=Rr(o,A,R,T),m=v._chainId,h=v._oriChainId,_=typeof e,C=U;if(_&&"object"==_){if(Array.isArray(_))return l();var g=e.module;g&&(C=g),p=e.type,y=e.cb}else{if("string"!=_&&"function"!=_)return Promise.reject(Ur(ue.CC_DISPATCH_PARAM_INVALID));var K=e;if("function"==_){var S=e.__fnName;if(!S)return l();K=S,1==T[h]&&(C=e.__stateModule)}var E=K.split("").filter(function(e){return"/"===e}).length;if(0===E)p=K;else{if(1!==E)return Promise.reject(Ur(ue.CC_DISPATCH_STRING_INVALID,xr(K)));var w=K.split("/"),b=w[0];b&&(C=b),p=w[1]}}return"*"===C?ot("*/"+p,r,{silent:a,lazy:o,renderKey:i},c,{refModule:N.ctx.module}):new Promise(function(e,t){!function(e){var t=void 0===e?{}:e,r=t.callerRef,n=t.module,o=t.renderKey,a=t.isSilent,i=t.type,c=t.payload,u=t.cb,s=t.__innerCb,d=t.delay,f=void 0===d?-1:d,l=t.chainId,p=t.oriChainId,y=t.chainId_depth_,v=Or[n];if(!v)return s(Error("no reducerMap found for module:["+n+"]"));var m=v[i];if(!m)return s(Error("no reducer fn found for ["+n+"/"+i+"], is these fn you want:"+Object.keys(v)));jr(m,{callerRef:r,module:n,type:i,cb:u,context:!0,__innerCb:s,calledBy:k,delay:f,renderKey:o,isSilent:a,chainId:l,oriChainId:p,chainId_depth_:y},c)}({callerRef:N,module:C,type:p,payload:r,cb:y,__innerCb:Ar(e,t),delay:c,renderKey:i,isSilent:a,chainId:m,oriChainId:h,chainId_depth_:T})}).catch(Ot)}}function Hr(o){return function(t){try{_r(o,t)}catch(e){if(o===te)!function(e,t,r){void 0===t&&(t=""),void 0===r&&(r="");var n=we(e,gr),o=n.partialState,a=n.isStateEmpty,i=J(o),c=J(e);if(i.length<c.length){var u=c.filter(function(e){return!i.includes(e)});P(Kr+",invalid keys: "+u.join(",")+", make sure the keys is invalid and their values are not undefined"),console.log(e),t&&P("module is "+t),r&&P("ccClassKey is "+r)}Cr(te,o)}(t,o);else{var r=br(o);if(!r)return P("invalid module "+o);var n=we(t,J(r));n.isStateEmpty||Nr(o,n.partialState)}H("no ccInstance found for module["+o+"] currently, cc will just store it, lately ccInstance will pick this state to render")}}}var qr=function(o){return function(e,t){var r=o.ctx,n=Object.assign({},o.state,e);r.type===re?(o.state=r.state=n,r.__boundSetState(n),t&&t(n)):(r.state=n,o.__$$isBF?Object.assign(o.state,e):o.state=n,r.__boundSetState(n,t))}},Vr=function(n){return function(e){var t=n.ctx;if(t.type===re){var r=Object.assign({},n.state);t.__boundSetState(r),e&&e(r)}else t.__boundForceUpdate(e)}},Br=de,Gr=Ce;function zr(t,e){if(Fe.isStartup){if(!Br(e))throw Error("param config "+se);if(t===te)throw Error("configuring global module is not allowed");var r=e.reducer,n=e.computed,o=e.watch,a=e.init,i=e.isClassSingle,c=Gr(e.state);if(r&&!Br(r))throw Error("config.reducer "+se);if(Qe(t,c,!0),it(t,r),n&&_t(t,n),o&&St(t,o),Fe.moduleSingleClass[t]=!0===i,a){if("function"!=typeof a)throw Error("init value must be a function!");Promise.resolve().then(a).then(function(e){Hr(t)(e)})}Fe.moduleName_isConfigured_[t]=!0,bt(14,t)}else qe.push({module:t,config:e})}function Wr(n,o){var a={};return J(n).forEach(function(e){function t(){return r.apply(void 0,arguments)}var r=n[e];t.__fnName=e,t.__stateModule=o,a[e]=t}),a}function Yr(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}function Xr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Jr=J,Zr=de,Qr=Fe.store._state;var en=m,tn=S,rn=Fe.featureStr_classKey_,nn=Fe.userClassKey_featureStr_,on=Fe.ccClassKey_ccClassContext_,an=0;var cn=Fe.moduleName_stateKeys_,un=Fe.moduleName_ccClassKeys_,sn=Fe.moduleSingleClass,dn=Fe.ccClassKey_ccClassContext_,fn=Fe.connectedModuleName_ccClassKeys_,ln=Fe.computed._computedValue,pn=function(e,t){var r=!1,n=!1;if(!Array.isArray(e))return{duplicate:r,notArray:!0,keyElementNotString:n};if(!Array.isArray(t))return{duplicate:r,notArray:!0,keyElementNotString:n};var o=e.length,a=t.length;e:for(var i=0;i<o;i++){var c=e[i];if("string"!=typeof c){n=!0;break e}for(var u=0;u<a;u++){var s=t[u];if("string"!=typeof s){n=!0;break e}if(s===c){r=!0;break e}}}return{duplicate:r,notArray:!1,keyElementNotString:n}},yn=w;function vn(e,t,r,n,o,a,i,c,u){void 0===e&&(e=q),void 0===a&&(a=[]),!0===c&&function(){if(!0!==Fe.isStartup)throw Error("you must startup cc by call startup method before register ReactClass to cc!")}();var s="cc"===u;Ye(e,!1,"module["+e+"] is not configured in store"),Xe(cn[e],a);var d=i;Array.isArray(i)&&(d={},i.forEach(function(e){return d[e]="*"}));var f,l=function(e,t,r){if(!r)return[];if("*"===r)return cn[e];var n=pn(r,[]);if(n.notArray||n.keyElementNotString)throw Error("watchedKeys "+K+" "+yn("ccClassKey:"+t));return r}(e,t,o),p=function(o,e,t,a){if(!Zr(o))throw Error("CcFragment or CcClass's prop connect type error, it "+se);function i(e){return c+" module["+e+"]'s value must be * or array of string"}var c="CcFragment or CcClass's prop connect is invalid,",r=Jr(o);r.sort();var u=[],s={};if(r.forEach(function(t){var r=Qr[t],n=a+"_"+t+"/";if(void 0===r)throw Error(c+" module["+t+"] not found in cc store ");var e=o[t];if("string"==typeof e){if("*"!==e)throw Error(i(t));u.push(n+"*"),Jr(r).forEach(function(e){return s[t+"/"+e]=e})}else{if(!Array.isArray(e))throw Error(i(t));e.forEach(function(e){if(!r.hasOwnProperty(e))throw Error(c+" module["+t+"]'s key["+e+"] not declared in cc store ");n+=e+",",s[t+"/"+e]=e}),u.push(n)}}),u.push("|"),"*"===e)u.push(a+"_$"+t+"/*");else{e.sort();var n=t+"/"+e.join(",");u.push(n)}return{featureStr:u.join("@"),connectedModuleKeyMapping:s,connectedModuleNames:r}}(d,l),y=p.connectedModuleKeyMapping,v=p.connectedModuleNames,m=function(e,t,r,n,o,a,i){if(void 0===i&&(i=""),!i){if(t===q&&en(r)&&0===n.length)return o+"0";var c=o+":"+a,u=rn[c];return u||(rn[c]=u=""+o+ ++an)}if(i.startsWith(h))throw Error("user can not specify a classKey["+i+"] starts with $$Cc");if(!e&&i.toLowerCase()==G.toLowerCase())throw Error(G+" is cc built-in ccClassKey name, if you want to customize your dispatcher, \n      you can set autoCreateDispatcher=false in StartupOption, and use createDispatcher then.");if(on[i]){if(nn[i]!==a)throw tn(ue.CC_CLASS_KEY_DUPLICATE,"ccClassKey:["+i+"] duplicate")}else nn[i]=a;return i}(s,e,d,l,n,p.featureStr,t);if(r){if(!Array.isArray(r)&&"*"!==r)throw Error("renderKeyClasses type err, it is must be an array or string *");f=r}else f=[m];return function(r,e,t,n,o,a,i){var c=dn[r];c||(c=function(e,t,r,n,o){return{module:e,ccClassKey:t,renderKeyClasses:r,originalWatchedKeys:o,watchedKeys:n,ccKeys:[],connectedState:{},connectedModuleKeyMapping:null,connectedModule:{}}}(t,r,e,o,n),dn[r]=c);var u={},s={};if(a){var d=Fe.store._state,f=c.connectedState;i.forEach(function(e){f[e]=d[e],s[e]=ln[e],u[e]=1;var t=fe(fn,e);t.includes(r)||t.push(r)}),c.connectedModuleKeyMapping=a,c.connectedModule=u,c.connectedComputed=s}}(m,f,e,o,l,y,v),function(e,t){var r=fe(un,e);if(!0===sn[e]&&1<=r.length)throw Error("module["+e+"] is declared as single, only on ccClassKey can been registered to it, and now a ccClassKey["+r[0]+"] has been registered!");r.includes(t)||r.push(t)}(e,m),{_module:e,_connect:d,_watchedKeys:l,_ccClassKey:m}}var mn=P,hn=S,_n=w,Cn=A,gn=O,Kn=Fe.runtimeVar,Sn=Fe.ccClassKey_ccClassContext_,En=Fe.ccUkey_ref_,wn={};function bn(e,t,r,n){function o(){En[e]=t,r.push(e)}!function(e){void 0===wn[e]?wn[e]=1:wn[e]+=1}(e),n?setTimeout(o,n):o()}function Nn(e,t,r,n,o){var a=Sn[r],i=a.ccKeys;Kn.isDebug&&console.log(Cn("register ccKey "+o+" to CC_CONTEXT"),gn());var c=Fe.isHotReloadMode();if(i.includes(o)){var u=function(){throw hn(ue.CC_CLASS_INSTANCE_KEY_DUPLICATE,_n("ccClass:"+r+",ccKey:"+o))};if(c){var s=function(e){return void 0===wn[e]?0:wn[e]}(o);if(t&&0<s)throw hn(ue.CC_CLASS_INSTANCE_MORE_THAN_ONE,_n("ccClass:"+r));1<s&&u(),mn("\n        found ccKey["+n+"] duplicated in hot reload mode, please make sure your ccKey is unique manually,\n        "+_n("ccClassKey:"+r+" ccKey:"+n+" ccUniqueKey:"+o)+"\n      "),bn(o,e,i,600)}else u()}else bn(o,e,i);return a}var On=Fe.event_handlers_,In=Fe.handlerKey_handler_,Un=Fe.ccUKey_handlerKeys_,xn=Fe.ccUkey_ref_,Dn=function(e,t,r){return e+"$"+t+"$"+r},An=fe,Rn=P;function Tn(e,t,r,n,o){void 0===o&&(o=null);var a=On[e];if(a){var i=a;return n?i=a.filter(function(e){return e.ccUniqueKey===n}):r?i=a.filter(function(e){return e.ccClassKey===r}):t&&(i=a.filter(function(e){return e.module===t})),void 0!==o&&(i=i.filter(function(e){return e.identity===o})),i}return[]}function kn(e){var o={},n=[];e.forEach(function(e){var t=e.ccUniqueKey,r=e.event;delete In[e.handlerKey],o[t]=1,n.includes(r)||n.push(r)}),n.forEach(function(e){var n=On[e];n&&(n.forEach(function(e,t){var r=e.ccUniqueKey;1===o[r]&&(n[t]=null,delete Un[r])}),On[e]=n.filter(function(e){return null!==e}))})}function $n(e,t,r,n,o,a){var i=An(On,n);if("function"!=typeof a)return Rn("event "+n+"'s handler is not a function!");var c=Dn(r,n,o),u=An(Un,r),s=i.findIndex(function(e){return e.handlerKey===c}),d={event:n,module:e,ccClassKey:t,ccUniqueKey:r,identity:o,handlerKey:c,fn:a};-1<s?i[s]=d:(i.push(d),u.push(c)),In[c]=d}function Mn(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o,a,i,c,u=null;"string"==typeof e?o=e:(o=e.name,u=e.identity,a=e.module,i=e.ccClassKey,c=e.ccUniqueKey),Tn(o,a,i,c,u).forEach(function(e){var t=e.handlerKey;if(xn[e.ccUniqueKey]&&t){var r=In[t];r&&r.fn.apply(r,n)}})}function Fn(e,t){kn(Tn(e,t.module,t.ccClassKey,t.ccUniqueKey,t.identity))}function Ln(e){var t=Un[e];if(t){var r=[];t.forEach(function(e){return r.push(In[e])}),kn(r)}}function jn(e){if(e&&"object"==typeof e){var t;if(Array.isArray(e))t={name:e[0],identity:e[1]};else t=Object.assign({},e);return t}return{name:e}}var Pn=Object.freeze({bindEventHandlerToCcContext:$n,findEventHandlersToPerform:Mn,findEventHandlersToOff:Fn,offEventHandlersByCcUniqueKey:Ln,getEventItem:jn});var Hn=P,qn=E;function Vn(e){return e?e.props||e:{}}var Bn=Fe.store.getState;function Gn(e){var t=Z(e);return t?t.currentTarget.value:e}var zn=function(e,t,r){var n,o=r.module,a=r.state,i=!1,c="",u="",s="",d=void 0,f=-1,l=!1,p=e[ne],y=e.type,v=!1;if(void 0!==p)if(c=p,f=e.delay,u=e.rkey,"val"===y||"int"===y){i="int"===y;var m=e.val;if(void 0===m)s=Gn(t);else if("function"==typeof m){var h,_,C;if(c.includes("/")){var g=c.split("/");h=g[1],_=c,C=g[0]}else _=o+"/"+(h=c),C=o;v=!0,d=m(Gn(t),h,{moduleState:Bn(C),fullKeyPath:_,state:a,refCtx:r})}else s=m}else{if("bool"!==y)return null;l=!0}else{var K=Z(t);if(!K)return null;var S=K.currentTarget;s=S.value;var E=S.dataset;if(i="int"===y||void 0!==E.ccint,!(c=E.ccsync))return null;u=E.ccrkey;var w=E.ccdelay;if(w)try{f=parseInt(w)}catch(e){}}return(n={})[b]=1,n.currentTarget={value:s,extraState:d,hasSyncCb:v,dataset:{ccsync:c,ccint:i,ccdelay:f,ccrkey:u}},n.isToggleBool=l,n};var Wn=function(e,t,r,n,o){var a=t;!0!==r||Number.isNaN(a=parseInt(t))&&(P(t+" can not convert to int but you set ccint as true!ÔºÅ"),a=t);var i=null,c=[];if(e.includes("/")){var u=e.split("/"),s=u[1];i=u[0],c=s.includes(".")?s.split("."):[s]}else c=e.includes(".")?e.split("."):[e];if(1===c.length){var d,f,l=c[0];return!0!==o?{module:i,state:(d={},d[l]=a,d)}:{module:i,state:(f={},f[l]=!n[l],f)}}var p,y=c[0],v=c.slice(1),m=n[y];return function e(t,r,n,o,a,i){void 0===i&&(i=!1);var c=r[o];if(n===o)if(!0===i){var u=t[c];"boolean"!=typeof u?P("key["+c+"]'s value type is not boolean"):t[c]=!u}else t[c]=a;else e(t[c],r,n,++o,a,i)}(m,v,v.length-1,0,a,o),{module:i,state:(p={},p[y]=m,p)}},Yn=Fe.store.getState;function Xn(e,t,r){var n=t.ctx,o=n.module,a=null;if(a=e[b]?e:zn(e,r,n)){var i=a.currentTarget,c=i.dataset,u=i.value,s=i.extraState,d=i.hasSyncCb;r&&r.stopPropagation&&r.stopPropagation();var f=c.ccsync,l=c.ccint,p=c.ccdelay,y=c.ccrkey;if(f.startsWith("/")&&(c.ccsync=""+o+f),f.includes("/")){var v=f.split("/")[0];Ye(v,!1);var m=n.ccKey,h=n.ccUniqueKey;if(d)return void(s&&mr(s,{calledBy:g,ccKey:m,ccUniqueKey:h,module:v,renderKey:y,delay:p},t));var _=v!==o?Yn(v):t.state;mr(Wn(f,u,l,_,a.isToggleBool).state,{calledBy:g,ccKey:m,ccUniqueKey:h,module:v,renderKey:y,delay:p},t)}else{if(d)return void(s&&t.setState(s,null,y,p));var C=Wn(f,u,l,t.state,a.isToggleBool);t.setState(C.state,null,y,p)}}}var Jn=Fe.refStore,Zn=Fe.ccClassKey_ccClassContext_,Qn=Fe.moduleName_stateKeys_,eo=Fe.store.getState,to=Fe.moduleName_ccClassKeys_,ro=Fe.computed._computedValue,no=Fe.renderKey_ccUkeys_,oo=J,ao=S,io=w,co=fe,uo=P,so=0;var fo=function(){};function lo(a,e,t){var r;void 0===t&&(t=5);var n=e.isSingle,c=e.ccClassKey,o=e.ccKey,i=void 0===o?"":o,u=e.module,s=e.type,d=e.state,f=e.storedKeys,l=void 0===f?[]:f,p=e.persistStoredKeys,y=void 0!==p&&p,v=e.watchedKeys,m=e.connect,h=void 0===m?{}:m,_=e.tag,C=void 0===_?"":_,g=e.ccOption,K=void 0===g?{}:g,S=u,E=a.setState,w=a.forceUpdate;s!==re&&(E=a.setState.bind(a),w=a.forceUpdate.bind(a));var b={};b.persistStoredKeys=void 0===K.persistStoredKeys?y:K.persistStoredKeys,b.tag=K.tag||C;var N=function(e,t,r,n){var o;if(e)r&&Hn("now the ccClass is singleton, you needn't supply ccKey to instance props, cc will ignore the ccKey["+r+"]"),o=t;else if(r)o=qn(t,r);else{var a=st(n);o=qn(t,a)}return o}(n,c,i,b.tag);if(b.renderKey=K.renderKey||N,co(no,b.renderKey).push(N),b.storedKeys=function(e,t,r,n){var o=r||n;return o?"*"===o?Object.keys(e).filter(function(e){return!t.includes(e)}):(Xe(t,o),o):[]}(d,Qn[S],K.storedKeys,l),i&&!c)throw Error("missing ccClassKey while init a cc ins with ccKey["+i+"]");if(0<b.storedKeys.length&&!i)throw ao(ue.CC_STORED_KEYS_NEED_CCKEY,io("ccClassKey["+c+"]"));var O=Zn[c],I=O.connectedComputed||{},U=O.connectedState||{},x=eo(u),D=ro[u]||{},A=ro[te]||{},R=eo(te),T=le(oo(d),Qn[S]),k=Jn._state[N]||{},$=Object.assign({},d,k,x),M=oo(a.state=$);Nn(a,n,c,i,N);var F=fe(to,u);F.includes(c)||F.push(c);function L(e,t){mr(e,t,a)}function j(e,t,r,n,o,a){L(t,{calledBy:r,module:e,renderKey:o,delay:a,reactCallback:n})}function P(e,t,r,n,o){j(e,t,ae,r,n,o)}function H(e,t,r,n,o){"string"==typeof e?P(e,t,r,n,o):j(S,e,oe,t,r,n)}function q(e,t,r){j(S,a.state,ie,e,t,r)}var V=[],B=[],G=[],z={effectItems:B,eid_effectReturnCb_:{},effectPropsItems:G,eid_effectPropsReturnCb_:{}},W={},Y={},X=Vn(a.props),J=((r={type:s,isSingle:n,module:u,ccClassKey:c,ccKey:i,ccUniqueKey:N,renderCount:1,initTime:Date.now(),watchedKeys:v,privStateKeys:T,connect:h,persistStoredKeys:b.persistStoredKeys,storedKeys:b.storedKeys,renderKey:b.renderKey,tag:b.tag,prevProps:X,props:X,mapped:{},prevState:$,state:$,moduleState:x,globalState:R,connectedState:U,extra:{},staticExtra:{},refComputed:{},moduleComputed:D,globalComputed:A,connectedComputed:I,moduleReducer:{},connectedReducer:{},reducer:{}}).mapped={},r.prevModuleStateVer={},r.stateKeys=M,r.onEvents=V,r.computedDep={},r.computedRetKeyFns={},r.watchDep={},r.watchRetKeyFns={},r.execute=null,r.auxMap=W,r.effectMeta=z,r.retKey_fnUid_={},r.reactSetState=fo,r.__boundSetState=E,r.reactForceUpdate=fo,r.__boundForceUpdate=w,r.setState=H,r.setModuleState=P,r.forceUpdate=q,r.changeState=L,r.refs=Y,r.useRef=function(t){return function(e){return Y[t]={current:e}}},r.__$$ccSetState=Mr(a),r.__$$ccForceUpdate=Fr(a),r);a.ctx=J,a.setState=H,a.forceUpdate=q,J.initState=function(e){return a.__$$isBF?de(d)?(a.state=Object.assign({},d,e,k,x),void(J.prevState=J.state=a.state)):uo("state "+se):uo("ctx.initState can only been called before first render period!")};var Z=Pr(a,!1,!1,S);if(J.dispatch=Z,1<t&&(J.lazyDispatch=Pr(a,!0,!1,S),J.silentDispatch=Pr(a,!1,!0,S),J.dispatchLazy=J.lazyDispatch,J.dispatchSilent=J.silentDispatch,J.invoke=Lr(a),J.lazyInvoke=Lr(a,{isLazy:!0}),J.silentInvoke=Lr(a,{isLazy:!1,isSilent:!0}),J.invokeLazy=J.lazyInvoke,J.invokeSilent=J.silentInvoke,J.setGlobalState=function(e,t,r,n){j(te,e,oe,t,r,n)}),2<t&&(J.syncBool=function(e,t,r){var n;if(void 0===t&&(t=""),void 0===r&&(r=-1),"string"==typeof e)return Xn.bind(null,((n={})[ne]=e,n.type="bool",n.delay=r,n.rkey=t,n),a);Xn({type:"bool"},e,a)},J.sync=function(e,t,r,n){var o;if(void 0===r&&(r=""),void 0===n&&(n=-1),"string"==typeof e)return Xn.bind(null,((o={})[ne]=e,o.type="val",o.val=t,o.delay=n,o.rkey=r,o),a);Xn({type:"val"},a,e)},J.set=function(e,t,r,n){var o;void 0===r&&(r=""),void 0===n&&(n=-1),Xn(((o={})[ne]=e,o.type="val",o.val=t,o.delay=n,o.rkey=r,o),a)},J.setBool=function(e,t,r){var n;void 0===t&&(t=""),void 0===r&&(r=-1),Xn(((n={})[ne]=e,n.type="bool",n.delay=r,n.rkey=t,n),a)},J.syncInt=function(e,t,r){var n;if(void 0===t&&(t=""),void 0===r&&(r=-1),"string"==typeof e)return Xn.bind(null,((n={})[ne]=e,n.type="int",n.delay=r,n.rkey=t,n),a);Xn({type:"int"},a,e)}),3<t){J.emit=function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];Mn.apply(Pn,[jn(e)].concat(r))},J.off=function(e,t){var r=void 0===t?{}:t,n=r.module,o=r.ccClassKey,a=r.ccUniqueKey,i=void 0===a?N:a,c=jn(e);Fn(c.name,{module:n,ccClassKey:o,ccUniqueKey:i,identity:c.identity})};var Q=function(e,t,r){void 0===r&&(r=!0);var n=jn(e),o=n.name,a=n.identity,i=void 0===a?null:a;r?V.push({event:o,handler:t,identity:i}):$n(S,c,N,o,i,t)};J.on=Q,J.onDirectly=function(e,t){Q(e,t,!1)}}if(4<t){J.execute=function(e){return J.execute=e},J.aux=function(e,t){if(W[e])throw Error("auxMethod["+e+"] already defined!");W[e]=t},J.watch=function(a){return function(e,t,r,n,o){lt(ce,{type:"watch",refCtx:a,stateKeys:a.stateKeys,retKeyFns:a.watchRetKeyFns,module:a.module,connect:a.connect,dep:a.watchDep},e,t,r,n,o)}}(J),J.computed=function(o){return function(e,t,r,n){lt(ce,{type:"computed",refCtx:o,stateKeys:o.stateKeys,retKeyFns:o.computedRetKeyFns,module:o.module,connect:o.connect,dep:o.computedDep},e,t,r,n)}}(J);var ee=function(i){return function(e,t,r,n){var o;if(void 0===r&&(r=!0),"function"!=typeof e)throw Error("type of defineEffect first param must be function");if(null!=t&&!Array.isArray(t))throw Error("type of defineEffect second param must be one of them(array, null, undefined)");var a=((o={fn:e,depKeys:t,eId:n||Symbol("__autoGen_"+ ++so+"__")}).depKeys=t,o.immediate=r,o);i.push(a)}};J.effect=ee(B),J.effectProps=ee(G)}}var po=Fe.store.getState;var yo=W,vo=J,mo=P,ho=Fe.reducer,_o=ho._module_fnNames_,Co=ho._caller,go=Fe.runtimeVar;function Ko(r,e,t){r.__$$isUnmounted=!1,r.__$$isBF=!0;var n=r.ctx;n.__$$isBSe=!0;var a=n.connectedReducer,i=n.moduleReducer,c=n.dispatch,u=n.module,o=vo(n.connect).slice();if(o.includes(u)?mo("module["+u+"] is in belongTo and connect both, it will cause redundant render."):o.push(u),o.forEach(function(o){var e;e=o===u?i:yo(a,o),(_o[o]||[]).forEach(function(n){e[n]=function(e,t,r){return c(o+"/"+n,e,t,r)}})}),n.reducer=Co,e){if("function"!=typeof e)throw Error("type of setup must be function");var s=e(n)||{};if(!de(s))throw Error("type of setup return result must be an plain json object");(!0===t||!0===go.bindCtxToMethod&&!1!==t)&&vo(s).forEach(function(e){var t=s[e];"function"==typeof t&&(s[e]=t.bind(r,n))}),n.settings=s}n.__$$isBSe=!1,function(e){var n=e.ctx,t=n.hasComputedFn,r=n.hasWatchFn,o=n.connect,a=n.module,i=_e(a),c=J(o),u=n.state;t&&(Pt(n,a,u,u,i,!0,!0),c.forEach(function(e){var t=po(e),r=_e(e);Pt(n,e,t,t,r,!0,!0)})),r&&(jt(n,a,u,u,i,!0,!0),c.forEach(function(e){var t=po(e),r=_e(e);jt(n,e,t,t,r,!0,!0)}))}(r)}var So=Fe.moduleName_stateKeys_,Eo=Fe.store,wo=Eo.getPrevState,bo=Eo.getState,No=Eo.getStateVer,Oo=function(e,t){return P("effect: key["+e+"] is invalid, its "+t+" has not been declared in' store!")};function Io(e,t){function r(o,a,i){return function(e){var t=e.eId;if(!i||!1!==e.immediate){var r=o[t],n=(0,e.fn)(m,a);n&&(o[t]=n),r&&r(m)}}}var m=e.ctx,n=m.effectMeta,o=n.effectItems,a=n.eid_effectReturnCb_,i=n.effectPropsItems,c=n.eid_effectPropsReturnCb_,h=m.prevModuleStateVer;if(t)o.forEach(r(a,!0,!0)),i.forEach(r(c,!0,!0));else{var _=m.prevState,C=e.state,g=[];o.forEach(function(e){var t=e.depKeys,r=e.fn,n=e.eId;if(t){var o=t.length;if(0===o)return;for(var a=!1,i=0;i<o;i++){var c=t[i],u=void 0,s=void 0,d=void 0;if(c.includes("/")){var f=c.split("/"),l=f[0],p=f[1],y=wo(l),v=No(l);if(h[p]===v[p])continue;if(m.prevModuleStateVer[p]=v[p],!y){Oo(c,"module["+l+"]");continue}if(!So[l].includes(p)){Oo(c,"unmoduledKey["+p+"]");continue}u=bo(l),s=y,d=p}else u=C,s=_,d=c;if(s[d]!==u[d]){a=!0;break}}a&&g.push({fn:r,eId:n})}else g.push({fn:r,eId:n})}),g.forEach(r(a,!1,!1));var u=m.prevProps,s=m.props,d=[];i.forEach(function(e){var t=e.depKeys,r=e.fn,n=e.eId;if(t){var o=t.length;if(0===o)return;for(var a=!1,i=0;i<o;i++){var c=t[i];if(u[c]!==s[c]){a=!0;break}}a&&d.push({fn:r,eId:n})}else d.push({fn:r,eId:n})}),d.forEach(r(c,!1,!1))}}function Uo(e){e.__$$isBF=!1;var t=e.ctx,r=t.module,n=t.ccClassKey,o=t.ccUniqueKey;t.onEvents.forEach(function(e){$n(r,n,o,e.event,e.identity,e.handler)}),Io(e,!0)}function xo(e){Io(e),e.ctx.prevState=e.state}var Do=Fe.ccUkey_ref_,Ao=Fe.ccUKey_handlerKeys_,Ro=Fe.runtimeVar,To=Fe.ccClassKey_ccClassContext_,ko=Fe.handlerKey_handler_,$o=Fe.renderKey_ccUkeys_;function Mo(e,t,r){Ro.isDebug&&console.log(A(t+" unset ref"),O("purple")),delete Do[t];var n=$o[r];r===t?delete $o[r]:n.splice(n.indexOf(t),1);var o=To[e].ccKeys,a=o.indexOf(t);a<0||o.splice(a,1),function(e){void 0===wn[e]?wn[e]=0:wn[e]-=1}(t);var i=Ao[t];i&&i.forEach(function(e){delete ko[e]})}var Fo=J;function Lo(r,n){function e(e){var t=r[e];"function"==typeof t&&t(n)}Object.getOwnPropertySymbols(r).forEach(e),Fo(r).forEach(e)}function jo(e){e.__$$isUnmounted=!0;var t=e.ctx,r=t.effectMeta,n=r.eid_effectPropsReturnCb_;Lo(r.eid_effectReturnCb_,t),Lo(n,t);var o=t.ccUniqueKey,a=t.ccClassKey,i=t.renderKey;Ln(o),Mo(a,o,i)}var Po=function(e){return"CC("+e+")"},Ho=J,qo=ee,Vo=Ce,Bo=Fe.runtimeVar,Go=O,zo=A,Wo=function(e){return Error("can not defined setup both in register options and class body --verbose:"+e)};function Yo(e,t){var r=void 0===e?{}:e,n=r.module,o=void 0===n?q:n,a=r.state,u=void 0===a?{}:a,i=r.watchedKeys,c=void 0===i?"*":i,s=r.storedKeys,d=void 0===s?[]:s,f=r.setup,l=void 0===f?null:f,p=r.persistStoredKeys,y=r.connect,v=void 0===y?{}:y,m=r.tag,h=r.lite,_=r.isPropsProxy,C=void 0!==_&&_,g=r.isSingle,K=void 0!==g&&g,S=r.renderKeyClasses,E=r.__checkStartUp,w=void 0===E||E,b=r.compareProps,N=void 0===b||b,O=r.__calledBy;void 0===t&&(t="");try{var I=vn(o,t,S,T,c,d,v,w,O),U=I._module,x=I._watchedKeys,D=I._ccClassKey,A=I._connect;return function(r){if(r.prototype&&r.prototype.$$attach)throw Error("register a cc class is prohibited!");var e=!1===C?r:R.Component,c=e.$$setup,t=function(i){function e(e,t){var r;try{r=i.call(this,e,t)||this;var n=Vo(u),o=Object.assign(r.state||{},n);r.$$attach=r.$$attach.bind(Xr(r));var a=Object.assign({},e,{isSingle:K,module:U,tag:m,state:o,type:T,watchedKeys:x,ccClassKey:D,connect:A,storedKeys:d,persistStoredKeys:p});if(lo(Xr(r),a,h),r.ctx.reactSetState=qr(Xr(r)),r.ctx.reactForceUpdate=Vr(Xr(r)),l&&(r.$$setup||c))throw Wo("ccUniqueKey "+r.ctx.ccUniqueKey);r.$$setup&&(r.$$setup=r.$$setup.bind(Xr(r))),Ko(Xr(r),l||r.$$setup||c,!1)}catch(e){Ot(e)}return r}Yr(e,i);var t=e.prototype;return t.shouldComponentUpdate=function(e,t){var r=this.ctx.childRef;if(r&&r.shouldComponentUpdate)return r.shouldComponentUpdate(e,t);if(i.prototype.shouldComponentUpdate)return i.prototype.shouldComponentUpdate.call(this,e,t);var n=!!N&&qo(this.props,e);return this.state!==t||n},t.$$attach=function(e){var t=this.ctx;((t.childRef=e).ctx=t).reactSetState=e.setState.bind(e),t.reactForceUpdate=e.forceUpdate.bind(e),e.setState=t.setState,e.forceUpdate=t.forceUpdate,t.__$$ccSetState=Mr(e,this),t.__$$ccForceUpdate=Fr(e);var r=e.state,n=this.state;r||(r=e.state={});var o=Object.assign({},r,n);if(Ho(t.state=e.state=o).forEach(function(e){return n[e]=o[e]}),e.$$setup&&(e.$$setup=e.$$setup.bind(e)),l&&(e.$$setup||c))throw Wo("ccUniqueKey "+t.ccUniqueKey);Ko(e,l||e.$$setup||c,!1)},t.componentDidMount=function(){i.prototype.componentDidMount&&i.prototype.componentDidMount.call(this),Uo(this)},t.componentDidUpdate=function(){i.prototype.componentDidUpdate&&i.prototype.componentDidUpdate.call(this),xo(this)},t.componentWillUnmount=function(){i.prototype.componentWillUnmount&&i.prototype.componentWillUnmount.call(this),jo(this)},t.render=function(){return this.ctx.prevProps=this.ctx.props,this.ctx.props=this.props,Bo.isDebug&&console.log(zo("@@@ render "+Po(D)),Go()),!1===C?i.prototype.render.call(this):R.createElement(r,{ctx:this.ctx,$$attach:this.$$attach})},e}(e);return t.displayName=D===G?"CcDispatcher":Po(D),t}}catch(e){Ot(e)}}function Xo(e){var t=function(e){function t(){return e.apply(this,arguments)||this}return Yr(t,e),t.prototype.render=function(){return this.props.children||R.createElement("span",{style:{display:"none"}})},t}(R.Component);if(Fe.refs[G]){if(!Fe.isHotReloadMode())throw Error("CcDispatcher can only be initialize one time");H("hot reload mode, CC_DISPATCHER existed")}var r=e||t;return Yo({isSingle:!0,__checkStartUp:!1,__calledBy:"cc"},G)(r)}var Jo=de,Zo=J;function Qo(e,t){if(!Jo(e))throw Error(t+" "+se)}function ea(e){if(!Jo(e))throw Error("StartupOption.moduleSingleClass "+se);!function(t,r){Object.keys(r).forEach(function(e){t[e]=r[e]})}(Fe.moduleSingleClass,e)}function ta(e){if(0<e.length){var o=Fe.plugins;o.length=0,Et.forEach(function(e){return wt[e].length=0});var a={};e.forEach(function(e){if(o.push(e),!e.install)throw Error("a plugin must export install handler!");var t=e.install(Nt),r=Error("plugin.install must return result:{name:string, options?:object}");if(!t)throw r;var n=t.name;if(!n)throw r;if(a[n])throw Error("pluginName["+n+"] duplicate");a[n]=1})}}var ra=function(e){var t=document.querySelector("#"+a);if(!t){(t=document.createElement("div")).id=a;var r=t.style;r.position="fixed",r.left=0,r.top=0,r.display="none",r.zIndex=-888666,document.body.appendChild(t)}n.render(R.createElement(e),t)},na=!1;function oa(e){void 0===e&&(e=!1),X(Fe.event_handlers_),X(Fe.ccUKey_handlerKeys_),X(Fe.renderKey_ccUkeys_);var t=Fe.ccClassKey_ccClassContext_;if(Object.keys(t).forEach(function(e){X(t[e].ccKeys)}),X(Fe.handlerKey_handler_),X(Fe.ccUkey_ref_,[G]),X(Fe.refs,[G]),e){var r=Fe.computed,n=Fe.watch,o=r._computedValue,a=n._watchDep;J(Fe.store._state).forEach(function(e){e!==V&&(o[e]&&(Fe.computed._computedDep[e]={retKey_fn_:{},stateKey_retKeys_:{},fnCount:0},_t(e,r._computedRaw[e])),a[e]&&(a[e]={retKey_fn_:{},stateKey_retKeys_:{},fnCount:0},St(e,n._watchRaw[e])))})}}function aa(){X(Fe.globalStateKeys);var e=J(Fe.moduleName_isConfigured_).concat([q,V,te,o]);X(Fe.reducer._reducer,e),X(Fe.store._state,e,{}),X(Fe.computed._computedDep,e),X(Fe.computed._computedValue,e),X(Fe.watch._watchDep,e),X(Fe.middlewares),ge={module:{computed:{},watch:{}},ref:{computed:{},watch:{},effect:{}}},oa()}function ia(e){void 0===e&&(e=!1),Fe.info.latestStartupTime=Date.now(),function(e){Fe.isStartup?Fe.isHotReloadMode()?e():console.warn("clear failed because of not running under hot reload mode!"):na=!0}(function(){if(e)console.warn("attention: make sure [[clearContextIfHot]] been called before app rendered!"),na=!0,aa();else{if(na)return void(na=!1);!function(){if(!Fe.refs[G]){var e=Xo();ra(e)}}(),oa(Fe.reComputed)}})}var ca=H,ua=Q,sa="";function da(e,t){var r=void 0===e?{}:e,n=r.store,o=void 0===n?{}:n,a=r.reducer,i=void 0===a?{}:a,c=r.init,u=void 0===c?null:c,s=r.computed,d=void 0===s?{}:s,f=r.watch,l=void 0===f?{}:f,p=r.moduleSingleClass,y=void 0===p?{}:p,v=void 0===t?{}:t,m=v.plugins,h=void 0===m?[]:m,_=v.middlewares,C=void 0===_?[]:_,g=v.isStrict,K=void 0!==g&&g,S=v.isDebug,E=void 0!==S&&S,w=v.errorHandler,b=void 0===w?null:w,N=v.isHot,O=v.bindCtxToMethod,I=void 0!==O&&O,U=v.computedCompare,x=void 0===U||U,D=v.watchCompare,A=void 0===D||D,R=v.watchImmediate,T=void 0!==R&&R,k=v.alwaysGiveState,$=void 0===k||k,M=v.reComputed,F=void 0===M||M,L=!0;try{throw Error()}catch(e){L=function(e){function t(e,t){for(var r=0;r<o;r++)if(n[r].includes(e)){a=n[r+t];break}}var r=Fe.info,n=e.stack.split("\n"),o=n.length,a="";function i(){ia(Fe.isHot=!0)}t("startup",2),a||t("runConcent",0);var c=Date.now();if(sa)if(sa!==a){var u="invalid run api call!(it can only be called once, changing 'call run' line location in HMR will cause this error also, \n    try refresh browser to reload your app to avoid this tip)";if(c-r.latestStartupTime<1e3)throw Error(u);if(!he())return z(u),!1;i(),sa=a}else i();else sa=a,r.firstStartupTime=c,r.latestStartupTime=c;return!0}(e)}if(L)try{console.log("%c window.name:"+window.name,"color:green;border:1px solid green"),ca("cc version "+Fe.info.version),void 0!==N&&(Fe.isHot=N),Fe.reComputed=F,Fe.errorHandler=b;var j=Fe.runtimeVar;if(j.alwaysGiveState=$,j.isStrict=K,j.isDebug=E,j.computedCompare=x,j.watchCompare=A,j.watchImmediate=T,j.bindCtxToMethod=I,ea(y),function(e){Qo(e,"state"),delete e[B],delete e[V],void 0===e[te]&&(e[te]={}),void 0===e[q]&&(e[q]={});for(var t=Zo(e),r=t.length,n=0;n<r;n++){var o=t[n];Qe(o,e[o])}}(o),function(t){Qo(t,"reducer"),void 0===t[q]&&(t[q]={}),void 0===t[te]&&(t[te]={}),Zo(t).forEach(function(e){return it(e,t[e])})}(i),function(t){Qo(t,"computed"),Zo(t).forEach(function(e){return _t(e,t[e])})}(d),function(t){Qo(t,"watch"),Object.keys(t).forEach(function(e){return St(e,t[e])})}(l),function(r){if(r){if(!Jo(r))throw Error("init "+se);Zo(r).forEach(function(t){Ye(t,!1);var e=r[t];e&&Promise.resolve().then(e).then(function(e){Hr(t)(e)})}),Fe.init._init=r}}(u),function(e){if(0<e.length){var t=Fe.middlewares;t.length=0,e.forEach(function(e){return t.push(e)})}}(C),!Fe.refs[G]){var P=Xo();ra(P)}var H=function(e){ua("CC_CONTEXT",Fe,e),ua("ccc",Fe,e),ua("cccc",Fe.computed._computedValue,e),ua("sss",Fe.store._state,e)};window.mcc?setTimeout(function(){H(window.mcc[ve()])},1200):H(),Fe.isStartup=!0,ta(h)}catch(e){if(!b)throw e;b(e)}}function fa(e){throw Error("[[run]]: param error, "+e+" "+se)}var la=de,pa=J,ya=m,va=Ce;function ma(e,t){var r=pe(e);return delete r.__checkStartUp,delete r.__calledBy,Yo(r,t)}var ha=ee,_a=pe,Ca=Ce,ga=R.createElement("span",{style:{display:"none"}}),Ka=function(I){function e(e,t){var r;r=I.call(this,e,t)||this;var n=_a(e.register),o=n.module,a=n.renderKeyClasses,i=n.tag,c=n.lite,u=n.compareProps,s=void 0===u||u,d=n.setup,f=n.bindCtxToMethod,l=n.watchedKeys,p=void 0===l?"*":l,y=n.connect,v=void 0===y?{}:y,m=n.isSingle,h=n.storedKeys,_=void 0===h?[]:h,C=Ca(n.state),g=e.ccClassKey,K=e.ccKey,S=e.ccOption,E=void 0===S?{}:S,w=p,b=g,N=v;if(!0!==e.__$$regDumb){var O=vn(o,g,a,U,p,_,v,!0);w=O._watchedKeys,b=O._ccClassKey,N=O._connect}return lo(Xr(r),{isSingle:m,ccKey:K,connect:N,state:C,module:o,storedKeys:_,watchedKeys:w,tag:i,ccClassKey:b,ccOption:E,type:U},c),r.ctx.reactSetState=qr(Xr(r)),r.ctx.reactForceUpdate=Vr(Xr(r)),r.__$$compareProps=s,Ko(Xr(r),d,f),r}Yr(e,I);var t=e.prototype;return t.componentDidMount=function(){Uo(this)},t.shouldComponentUpdate=function(e,t){var r=!!this.__$$compareProps&&ha(Vn(e),Vn(this.props));return this.state!==t||r},t.componentDidUpdate=function(){xo(this)},t.componentWillUnmount=function(){I.prototype.componentWillUnmount&&I.prototype.componentWillUnmount.call(this),jo(this)},t.render=function(){var e=this.props;this.ctx.prevProps=this.ctx.props,this.ctx.props=Vn(e);var t=e.render,r=t||e.children;if("function"==typeof r){var n=e.register,o=void 0===n?{}:n,a=this.ctx;return!0!==e.__$$regDumb&&o.mapProps?(a.mapped=o.mapProps(a)||{},r(a.mapped)||ga):r(a)||ga}if(R.isValidElement(r))throw Error("CcFragment's children can not b a react dom ");return r},e}(R.Component);function Sa(e,t){var r=pe(e),n=r.watchedKeys,o=r.render,a=r.connect,i=vn(r.module,t,r.renderKeyClasses,U,void 0===n?"*":n,r.storedKeys,void 0===a?{}:a,!0),c=i._watchedKeys,u=i._ccClassKey,s=i._connect;function d(t){return function(e){return r.props=e,function(t,e){var r=e.mapProps,n=e.props,o=void 0===n?{}:n,a={__$$regDumb:!0,props:o,ccOption:o.ccOption,ccClassKey:e.ccClassKey,render:function(e){return r?(e.mapped=r(e),R.createElement(t,e.mapped)):R.createElement(t,e)},ccKey:o.ccKey,register:e};return R.createElement(Ka,a)}(t,r)}}return r.module=i._module,r.watchedKeys=c,r.ccClassKey=u,r.connect=s,o?d(o):function(e){return d(e)}}var Ea=Fe.ccUkey_ref_,wa=1,ba={};function Na(e,t,r){this.setState=t,this.forceUpdate=t,this.state=e,this.isFirstRendered=!0,this.props=r}function Oa(e,t,r,n,o,a,i,c,u){var s=t||Ce(r),d=n.bindCtxToMethod,f=n.watchedKeys,l=n.storedKeys,p=n.connect,y=n.setup,v=n.lite;wa+=1;var m=vn(n.module,u,n.renderKeyClasses,re,void 0===f?"*":f,void 0===l?[]:l,void 0===p?{}:p,!0),h=m._module,_=m._watchedKeys,C=m._ccClassKey,g=m._connect,K=new Na(o,a,i),S=Object.assign({},n,{module:h,watchedKeys:_,state:s,type:re,cursor:e,ccClassKey:C,connect:g,ccOption:i.ccOption});K.props=i,lo(K,S,v),K.ctx.reactSetState=qr(K),K.ctx.reactForceUpdate=Vr(K);var E=K.ctx;return E.props=i,E.extra=c,Ko(K,y,d),ba[e]=K.ctx.ccUniqueKey,E.useRef=function(e){var t=R.useRef(null);return E.refs[e]=t},K}var Ia="react version is LTE 16.8";function Ua(e,t){var r=pe(e),n=r.state,o=void 0===n?{}:n,a=r.props,i=void 0===a?{}:a,c=r.mapProps,u=r.layoutEffect,s=void 0!==u&&u,d=r.extra,f=void 0===d?{}:d,l=R.useState;if(!l)throw Error(Ia);function p(){return Oa(m,_,o,r,g,K,i,f,t)}var y,v=wa,m=l(v)[0],h=m===v,_=h?Ce(o):0,C=l(_),g=C[0],K=C[1];if(h)y=p();else if(!(y=Ea[ba[m]])&&Date.now()-Fe.info.latestStartupTime<1e3)y=p();else{var S=y.ctx;S.prevProps=S.props,y.props=S.props=i,S.extra=f}var E=y.ctx,w=s?R.useLayoutEffect:R.useEffect;if(w(function(){y.isFirstRendered||xo(y)}),w(function(){if(!1===y.isFirstRendered){var e=y.ctx;Nn(y,e.isSingle,e.ccClassKey,e.ccKey,e.ccUniqueKey)}else y.isFirstRendered=!1,Uo(y);return function(){jo(y)}},[]),c){var b=c(E);if(!de(b))throw Error("mapProps ret "+se);E.mapped=b}return E}function xa(){throw Error("api doc: cc.setState(module:string, state:object, renderKey:string, delayMs?:number, skipMiddleware?:boolean, throwError?:boolean)")}function Da(e){return Fe.store.getState(e)}var Aa=Fe.computed._computedValue;var Ra=Fe.ccUkey_ref_,Ta=Fe.ccClassKey_ccClassContext_;function ka(){var r=[],n=Fe.ccUkey_ref_;return J(n).forEach(function(e){var t=n[e];t&&!t.__$$isUnmounted&&r.push(t)}),r}function $a(e,t,r){var n=void 0===r?{}:r,o=n.state,a=n.reducer,i=n.computed,c=n.watch,u=n.init;if(!Fe.isStartup)throw Error("cc is not startup yet");We(e),Ye(t,!1);var s=Fe.moduleName_stateFn_[t];if(!s)throw Error("target module["+t+"] state must be a function when use cloneModule");var d=s();Object.assign(d,Ce(o));var f=Wr(Fe.reducer._reducer[t]||{},e);a&&Object.assign(f,Wr(a,e));var l=Fe.computed._computedRaw[t]||{};i&&Object.assign(l,i);var p=Fe.watch._watchRaw[t]||{};c&&Object.assign(p,c);var y=Fe.init._init[t];u&&(y=u);var v={state:d,reducer:f,computed:l,watch:p};y&&(v.init=y),zr(e,v)}function Ma(t,e){function n(e,t){var r=t.state,n=t.reducer,o=void 0===n?{}:n,a=t.watch,i=t.computed,c=t.init,u=t.isClassSingle;if(s.store[e])throw Error("run api error: module"+e+" duplicate");s.store[e]=va(r),"function"==typeof r&&(Fe.moduleName_stateFn_[e]=r),s.reducer[e]=o,a&&(s.watch[e]=a),i&&(s.computed[e]=i),c&&(s.init[e]=c),s.moduleSingleClass[e]=!0===u}void 0===t&&(t={}),void 0===e&&(e={}),la(t)||fa("store"),la(e)||fa("options");var s={store:{},reducer:{},watch:{},computed:{},init:{},moduleSingleClass:{}};pa(t).forEach(function(e){return n(e,t[e])}),qe.forEach(function(e){var t=e.module,r=e.config;H("configure pending module["+t+"]"),n(t,r)}),qe.length=0,ya(s.init)&&(s.init=null),da(s,e)}function Fa(e,t){return ma({connect:e},t)}function La(e,t){return Sa({connect:e},t)}function ja(e,o){var a=pe(e);function t(r){var e=a.memo,t=void 0===e||e;function n(){return function(e){a.props=e;var t=Ua(a,o);return R.createElement(r,a.mapProps?t.mapped:t)}}return delete a.memo,t&&R.memo?R.memo(n()):n()}"function"==typeof a.state&&(a.state=a.state());var r=a.render;return r?t(r):function(e){return t(e)}}function Pa(e,t,r,n,o){void 0===o&&(o=!1);try{et().ctx.setGlobalState(e,t,r,n)}catch(e){if(o)throw e;P(e.message)}}function Ha(e,t,r,n,o,a){void 0===n&&(n=-1),void 0===a&&(a=!1),void 0===e&&void 0===t&&xa(),"string"!=typeof e&&xa(),_r(e,t,r,n,o)}function qa(e,t,r,n){et().ctx.set(e,t,r,n)}function Va(e,t){if(!e.includes("/"))throw Error("keyPath must start with module");var r=e.split("/"),n=Da(r[0]);return Wn(e,t,!1,n,!1).state}function Ba(e){return ti[e].connectedState||{}}function Ga(e){return e?Aa[e]:Aa}function za(e){if(void 0===e)throw Error("api doc: cc.emit(event:string|{name:string, identity?:string, ctx?:boolean}, ...args)");try{for(var t,r=et(),n=arguments.length,o=Array(1<n?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];(t=r.ctx).emit.apply(t,[e].concat(o))}catch(e){P(e)}}function Wa(e,t){try{et().ctx.off(e,t)}catch(e){if(t.throwError)throw e;P(e.message)}}function Ya(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];(function(e){var r=[],t=Ta[e];return t&&t.ccKeys.forEach(function(e){var t=Ra[e];t&&r.push(t)}),r})(e).forEach(function(e){var t;e.__$$isUnmounted||e.ctx.execute&&(t=e.ctx).execute.apply(t,r)})}function Xa(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];ka().forEach(function(e){var t;e.ctx.execute&&(t=e.ctx).execute.apply(t,r)})}function Ja(e,t,r){return{fn:e,depKeys:t,compare:r}}function Za(e,t){return void 0===t&&(t=!0),{fn:function(){return e},depKeys:[],compare:t}}function Qa(e,t,r,n){return{fn:e,depKeys:t,compare:r,immediate:n}}function ei(e,t,r){return{fn:e,depKeys:t,compare:r,immediate:!0}}var ti=Fe.ccClassKey_ccClassContext_,ri=ma,ni=Sa,oi=zr,ai=Da,ii=Fe.store.getGlobalState,ci=at,ui=Fe,si=Xo,di=ka,fi=Fe.reducer._caller,li=ia,pi=Ka,yi=u,vi=Fe.store.appendState,mi=Ua,hi={cloneModule:$a,emit:za,off:Wa,connect:Fa,connectDumb:La,register:ri,registerDumb:ni,registerHookComp:ja,configure:oi,dispatch:ci,run:Ma,setGlobalState:Pa,setState:Ha,set:qa,setValue:Va,getGlobalState:ii,getState:ai,getComputed:Ga,getConnectedState:Ba,ccContext:ui,createDispatcher:si,execute:Ya,executeAll:Xa,getRefs:di,reducer:fi,clearContextIfHot:li,CcFragment:pi,cst:yi,appendState:vi,useConcent:mi,bindCcToMcc:_i,defComputed:Ja,defComputedVal:Za,defWatch:Qa,defWatchImmediate:ei};function _i(e){if(!gi)throw Error("current env is not multi concent ins mode");if(gi[e])throw Error("ccNamespace["+e+"] already existed in window.mcc");!function(e){ye=e}(e),Q(e,hi,gi)}function Ci(){var e=ye?window.mcc[ye]:window.cc;if(e&&e.ccContext&&e.ccContext.info){var t=e.ccContext.info.version,r=ui.info.version;if(t!==r)throw Error("a existed version concent "+t+" is different with current about to import concent "+r+", \n        it may caused by some of your concent-eco-module with older version concent, please reinstall them (concent-*** module)")}}var gi=window.mcc;gi?setTimeout(function(){if(!ve())throw Error("detect window.mcc, but user forget call bindCcToMcc in bundle entry");Ci()},1e3):(Ci(),Q("cc",hi)),e.cloneModule=$a,e.run=Ma,e.connect=Fa,e.connectDumb=La,e.register=ri,e.registerDumb=ni,e.registerHookComp=ja,e.configure=oi,e.setGlobalState=Pa,e.setState=Ha,e.set=qa,e.setValue=Va,e.getState=ai,e.getGlobalState=ii,e.getConnectedState=Ba,e.getComputed=Ga,e.emit=za,e.off=Wa,e.dispatch=ci,e.ccContext=ui,e.createDispatcher=si,e.execute=Ya,e.executeAll=Xa,e.getRefs=di,e.reducer=fi,e.clearContextIfHot=li,e.CcFragment=pi,e.cst=yi,e.appendState=vi,e.useConcent=mi,e.defComputed=Ja,e.defComputedVal=Za,e.defWatch=Qa,e.defWatchImmediate=ei,e.bindCcToMcc=_i,e.default=hi,Object.defineProperty(e,"__esModule",{value:!0})});
