!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["exports","react","react-dom"],t):t(e.concent={},e.React,e.ReactDOM)}(this,function(e,T,n){"use strict";var t;T=T&&T.hasOwnProperty("default")?T.default:T,n=n&&n.hasOwnProperty("default")?n.default:n;var Q="$$global",H="$$default",q="$$cc",V="$$concent_void_module_624313307",r="$$CONCENT_ROUTER",R="$$CcClass",U="$$CcFrag",O="$$CcHook",h="$$Cc",B="$$Dispatcher",o="__cc_dispatcher_container_designed_by_zzk_qq_is_624313307__",ee=Symbol("__for_sync_param_ccsync__"),b=Symbol("__for_mock_event__"),a=Symbol("__lazy_handle_state__"),I=10,D=11,A=13,k="dispatch",te="setState",re="setModuleState",ne="forceUpdate",N="invoke",g="sync",_="module",oe="ref",M="watch",ae={CC_MODULE_NAME_DUPLICATE:1002,CC_MODULE_NOT_FOUND:1012,CC_DISPATCH_STRING_INVALID:1013,CC_DISPATCH_PARAM_INVALID:1014,CC_MODULE_NOT_CONNECTED:1015,CC_CLASS_KEY_DUPLICATE:1100,CC_CLASS_INSTANCE_KEY_DUPLICATE:1200,CC_CLASS_INSTANCE_MORE_THAN_ONE:1205,CC_STORED_KEYS_NEED_CCKEY:1207,CC_REDUCER_NOT_A_FUNCTION:1503},i=((t={})[ae.CC_MODULE_NAME_DUPLICATE]="module name duplicate!",t[ae.CC_MODULE_NOT_FOUND]="module not found!",t[ae.CC_DISPATCH_STRING_INVALID]="when type param is string, it must be one of these format: (fnName)„ÄÅ(moduleName)/(fnName)",t[ae.CC_DISPATCH_PARAM_INVALID]="dispatch param type is invalid, it must be string or object",t[ae.CC_MODULE_NOT_CONNECTED]="module not been connected by ref",t[ae.CC_CLASS_INSTANCE_KEY_DUPLICATE]="props.ccKey duplicate",t[ae.CC_CLASS_INSTANCE_MORE_THAN_ONE]="ccClass is declared as singleton, trying new another one instance is not allowed! ",t[ae.CC_STORED_KEYS_NEED_CCKEY]="you must explicitly specify a ccKey for ccInstance when set storedKeys!",t[ae.CC_CLASS_KEY_DUPLICATE]="ccClassKey duplicate!",t[ae.CC_REDUCER_NOT_A_FUNCTION]="reducer must be a function!",t),c=Object.freeze({MODULE_GLOBAL:Q,MODULE_DEFAULT:H,MODULE_CC:q,MODULE_VOID:V,MODULE_CC_ROUTER:r,CC_CLASS_PREFIX:R,CC_FRAGMENT_PREFIX:U,CC_HOOK_PREFIX:O,CC_PREFIX:h,CC_DISPATCHER:B,CC_DISPATCHER_BOX:o,CCSYNC_KEY:ee,MOCKE_KEY:b,LAZY_KEY:a,SIG_FN_START:I,SIG_FN_END:D,SIG_FN_QUIT:12,SIG_FN_ERR:A,SIG_MODULE_CONFIGURED:14,SIG_STATE_CHANGED:15,RENDER_NO_OP:1,RENDER_BY_KEY:2,RENDER_BY_STATE:3,STATE_FOR_ONE_CC_INSTANCE_FIRSTLY:1,STATE_FOR_ALL_CC_INSTANCES_OF_ONE_MODULE:2,EFFECT_AVAILABLE:1,EFFECT_STOPPED:0,DISPATCH:k,SET_STATE:te,SET_MODULE_STATE:re,FORCE_UPDATE:ne,INVOKE:N,SYNC:g,CATE_MODULE:_,CATE_REF:oe,FN_CU:"computed",FN_WATCH:M,ERR:ae,ERR_MESSAGE:i,default:{MODULE_GLOBAL:Q,MODULE_DEFAULT:H,MODULE_CC:q,ERR:ae,ERR_MESSAGE:i,STATE_FOR_ONE_CC_INSTANCE_FIRSTLY:1,STATE_FOR_ALL_CC_INSTANCES_OF_ONE_MODULE:2}}),$={alwaysGiveState:!0,isStrict:!1,isDebug:!1,computedCompare:!0,watchCompare:!0,watchImmediate:!1,bindCtxToMethod:!1};function s(e){return null!=e&&0<Object.keys(e).length}function u(e){return!s(e)}function ie(e,t){return void 0===t&&(t=!1),null!==e&&("object"==typeof e&&(!Array.isArray(e)||!!t))}function d(e,t){var r="";r="string"==typeof e?e:i[e]||"",t&&(r+=t),r||(r="undefined message for code:"+e);var n=Error(r);return n.code=e,n}function l(e,t){return e+"$"+t}function f(e){return e?" --verbose-info: "+e:""}function p(e){return void 0===e&&(e="green"),"color:"+e+";border:1px solid "+e}function y(e){return"%c"+e}var v=function(e){return"------------ CC "+e+" ------------"};function j(e){console.error(v("WARNING")),e instanceof Error?(console.error(e.message),console.error(e.stack)):console.error(e)}function x(e){console.log(v("TIP")),console.log("%c"+e,"color:green;border:1px solid green;")}function G(e){if(console.error(v("WARNING")),console.error(e),$.isStrict)throw e}function S(e,t,r){void 0===r&&(r={});var n=e[t];return n||(n=e[t]=r),n}function ce(e,t){var r=e[t];return r||(r=e[t]=[]),r}function m(e){void 0===e&&(e=52);var t=Math.random();return parseInt(t*e)}function C(t,r,n){void 0===r&&(r=[]),Array.isArray(t)?t.length=0:Object.keys(t).forEach(function(e){r.includes(e)||(n?t[e]=n:delete t[e])})}function F(e){return Object.keys(e)}function L(e){var t=null;return e&&(e.currentTarget&&e.type?t=e:e.nativeEvent&&e.target&&(e.currentTarget=e.target,t=e)),t}function K(t,r,e){function n(e){e?e[t]=r:window[t]=r}window?n(e):setTimeout(function(){n(e)},3e3)}function E(e,t){for(var r in e)if(!(r in t))return!0;for(var n in t)if(e[n]!==t[n])return!0;return!1}function se(e,t){var r=[];return e.forEach(function(e){t.includes(e)||r.push(e)}),r}function P(e){return void 0===e&&(e={}),"string"==typeof e?{module:e}:Object.assign({module:H},e)}var w="";function z(){return w}function W(){var t=null;return{commit:function(e){t||(t={}),Object.assign(t,e)},getFnCommittedState:function(){return t}}}function Y(){var e=!1;return!window||("previewFrame"===window.name||window.__SANDBOX_DATA__||window.BrowserFS)&&(e=!0),e}var X,J={},Z=((X={})[Q]={},X[H]={},X[q]={},X),ue={},de={},le={_computedValue:Z,_computedRaw:de,_computedDep:ue,getRootComputedValue:function(){return Z},getRootComputedDep:function(){return ue},getRootComputedRaw:function(){return de}},fe={},pe={},ye={_watchRaw:pe,_watchDep:fe,getRootWatchDep:function(){return fe},getRootWatchRaw:function(){return pe}};var ve={module:{computed:{},watch:{}},ref:{computed:{},watch:{},effect:{}}};function me(e,t){var r=t[e];return{retKey:e,fn:r.fn,depKeys:r.depKeys}}function he(e,t,r,n,o,a,i,c){var s=n[o],u=[];if(!s)return{pickedFns:u,setted:[],changed:[]};var d=s.retKey_fn_,l=s.stateKey_retKeys_,f=s.fnCount;if(e){var p=F(d),y=F(i),v=y;return"computed"===r?{pickedFns:p.map(function(e){return me(e,d)}),setted:y,changed:v}:(p.forEach(function(e){var t=d[e];t.immediate&&u.push({retKey:e,fn:t.fn,depKeys:t.depKeys})}),{pickedFns:u,setted:y,changed:v})}var m=function(r,n){var o=[],a=[];return F(n).forEach(function(e){var t=n[e];void 0!==t&&(a.push(e),t!==r[e]&&o.push(e))}),{changed:o,setted:a}}(a,i),h=m.setted,_=m.changed;if(0===h.length)return{pickedFns:u,setted:[],changed:[]};var C=h.join(",")+"|"+_.join(",")+"|"+o,g=ve[t][r],K=c?S(g,c):g,E=K[C];return E?{pickedFns:E.map(function(e){return me(e,d)}),setted:h,changed:_}:(function(s,o,u,d,a,l){if(0===o.length)return;var e=a["*"];if(e){var i=0<u.length;e.forEach(function(e){var t=d[e],r=t.fn,n=t.compare,o=t.depKeys,a={retKey:e,fn:r,depKeys:o};n?i&&s.push(a):s.push(a)})}s.length<l&&function(){var c={},e=o.length,t=function(e){var i=o[e],t=a[i];return t?(t.forEach(function(e){if(!c[e]){var t=d[e],r=t.fn,n=t.compare,o=t.depKeys,a=!0;n&&!u.includes(i)&&(a=!1),a&&(c[e]=!0,s.push({retKey:e,fn:r,depKeys:o}))}}),s.length===l?"break":void 0):"continue"};e:for(var r=0;r<e;r++){var n=t(r);switch(n){case"continue":continue;case"break":break e}}}()}(u,h,_,d,l,f),K[C]=u.map(function(e){return e.retKey}),{pickedFns:u,setted:h,changed:_})}function _e(e,t,r){var n=t[r];return void 0!==n&&(e[r]=n,!0)}function Ce(t,r,e,n){void 0===r&&(r=[]),void 0===e&&(e=!1),void 0===n&&(n=!1);var o={},a=[];if(!ie(t))return{partialState:e?null:o,isStateEmpty:!0,ignoredStateKeys:a};var i=!0,c=F(t);return c.length<r.length?c.forEach(function(e){r.includes(e)?_e(o,t,e)&&(i=!1):n&&a.push(e)}):(r.forEach(function(e){_e(o,t,e)&&(i=!1)}),n&&(a=se(c,r))),i&&e&&(o=null),{partialState:o,isStateEmpty:i,ignoredStateKeys:a}}for(var ge,Ke=function(g,K,E,S,w,e,b,O,N,I,U,D,A){for(var x=0,T=e,R=!0,t=function(){var e=w(T,1===++x&&I),t=e.pickedFns,n=e.setted,o=e.changed;if(!t.length)return"break";var r=W(),a=r.commit,i=r.getFnCommittedState,c=W(),s=c.commit,u=c.getFnCommittedState;if(t.forEach(function(e){var t=e.retKey,r=function(e,t,r,n,o,a){var i;if($.alwaysGiveState)i=r(n,o,a);else{var c=t[0];i=1===t.length&&"*"!==c&&c===e?r(n[c],o[c],a):r(n,o,a)}return i}(t,e.depKeys,e.fn,b,S,{retKey:t,callInfo:N,isFirstCall:I,commit:a,commitCu:s,setted:n,changed:o,stateModule:K,refModule:E,oldState:S,committedState:T,refCtx:g});"computed"===U?A[t]=r:!1===r&&(R=!1)}),T=i()){var d=function(e,t){void 0===t&&(t=!1),T=e,t&&0===F(e).length?T=null:(Object.assign(b,T),Object.assign(O,T))},l=Ce(T,"ref"===D?g.privStateKeys:J[K],!0,!0),f=l.partialState,p=l.ignoredStateKeys;if(f)if(U===M){var y=(D===oe?g.computedDep[g.module]||{}:le._computedDep[K]||{}).stateKey_retKeys_;if(y){var v=[],m={};F(f).forEach(function(e){y[e]?v.push(e):m[e]=f[e]}),0<v.length&&j("these state keys["+v.join(",")+"] will been ignored, cause they are also appeared in computed depKeys,\n              cc suggest you move the logic to computed file."),d(m,!0)}else d(f)}else d(f);p.length&&j("these state keys["+p.join(",")+"] are invalid")}var h=u();if(h){var _;if("ref"===D)_="computed"===U?g.computedRetKeyFns:g.watchRetKeyFns;else{var C=le.getRootComputedDep()[K]||{};_=C.retKey_fn_||null}_&&F(h).forEach(function(e){_[e]?A[e]=h[e]:j("fnCtx.commitCu commit an invalid retKey["+e+"] for moduleComputed")})}if(10<x)throw Error("fnCtx.commit may goes endless loop, please check your code")};T;){if("break"===t())break}return R},Ee=le._computedValue,Se=F,we={},be=function(r,e,t){var n=void 0===t?{}:t,o=n.refCtx,a=void 0===o?null:o,i=n.callInfo,c=void 0===i?{}:i,s=Oe(r),u=Ne(r),d=Ee[r],l=le.getRootComputedDep(),f=ye.getRootWatchDep(),p=a?a.module:null,y=Object.assign({},s,e),v=Object.assign({},e),m=v;return Ke(a,r,p,s,function(e,t){return he(t,_,"computed",l,r,s,e)},m,y,v,c,!1,"computed",_,d),Ke(a,r,p,s,function(e,t){return he(t,_,"watch",f,r,s,e)},m,y,v,c,!1,"watch",_,d),Se(v).forEach(function(e){u[e]=s[e],Ie(r,e),s[e]=v[e]}),v},Oe=function(e){return De[e]},Ne=function(e){return Ae[e]},Ie=function(e,t){xe[e][t]++},Ue=function(){var e;return(e={})[q]={},e[V]={},e[Q]={},e[H]={},e},De=Ue(),Ae=Ue(),xe={},Te={getDispatcher:function(){return we[B]},isHotReloadMode:function(){return!!Te.isHot||window&&(window.webpackHotUpdate||Y())},runtimeVar:$,isHot:!1,reComputed:!0,isStartup:!1,moduleSingleClass:{},moduleName_ccClassKeys_:{},moduleName_stateKeys_:J,moduleName_isConfigured_:{},connectedModuleName_ccClassKeys_:{},ccClassKey_ccClassContext_:{},globalStateKeys:[],store:{appendState:function(e,t){var r=ce(J,e);F(t).forEach(function(e){r.includes(e)||r.push(e)}),Te.store.setState(e,t)},_state:De,_prevState:Ae,_stateVer:xe,getState:function(e){return e?Oe(e):De},getPrevState:function(e){return e?Ne(e):Ae},getStateVer:function(e){return e?xe[e]:xe},setState:function(e,t,r){return be(e,t,r)},setGlobalState:function(e){return be(Q,e)},getGlobalState:function(){return De[Q]}},reducer:{_reducer:(ge={},ge[Q]={},ge[q]={},ge),_caller:{},_fnName_fullFnNames_:{},_module_fnNames_:{}},computed:le,watch:ye,refStore:{_state:{},setState:function(e,t){var r=Te.refStore._state,n=Object.assign({},r[e],t);r[e]=n}},init:{_init:{}},ccUkey_ref_:we,event_handlers_:{},ccUKey_handlerKeys_:{},handlerKey_handler_:{},renderKey_ccUkeys_:{},refRetKey_fnUid_:{},refs:we,info:{packageLoadTime:Date.now(),firstStartupTime:"",latestStartupTime:"",version:"1.5.158",author:"fantasticsoul",emails:["624313307@qq.com","zhongzhengkai@gmail.com"],tag:"destiny"},fragmentNameCount:0,featureStr_classKey_:{},userClassKey_featureStr_:{},errorHandler:null,middlewares:[],plugins:[]},Re=localStorage.length,ke=Te.refStore._state,Me=0;Me<Re;Me++){var $e=localStorage.key(Me);if($e.startsWith("CCSS_"))try{ke[$e.substr(5)]=JSON.parse(localStorage.getItem($e))}catch(e){console.error(e)}}function je(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}function Fe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Le=function(e){if(!Te.errorHandler)throw e;Te.errorHandler(e)},Pe=0,He={},qe={},Ve={},Be={};function Ge(){return++Pe}function ze(e,t,r,n){if(r){var o=n[e];o||(o=n[e]={});var a=o[t];a?Object.assign(a,r):o[t]=r}}function We(e,t,r){ze(e,t,r,He)}function Ye(e,t,r){return We(e,t,r),function(e){var t=function(e){return He[e]}(e),r=[];return F(t).forEach(function(e){r.push({module:e,state:t[e]})}),r}(e)}function Xe(e){delete He[e]}var Je=[I,D,12,A,14,15],Ze={};function Qe(t,r){Ze[t].forEach(function(e){e({sig:t,payload:r})})}function et(e,t){function r(e,t){var r=Ze[e];r?r.push(t):console.warn("invalid sig["+e+"]")}Array.isArray(e)?e.forEach(function(e){r(e,t)}):r(e,t)}Je.forEach(function(e){return Ze[e]=[]});var tt="is not a plain json object!",rt="should be an string array or *!",nt=function(e){return e.toLowerCase()===q},ot=function(e){return/^[\$\#\&a-zA-Z0-9_-]+$/.test(e)},at=f,it=d;function ct(e){if(!ot(e))throw Error("module["+e+"] writing is invalid!");if(nt(e))throw Error("'$$cc' is a built-in module name for concent")}function st(e,t,r){void 0===t&&(t=!0),void 0===r&&(r="");var n=r||"module["+e+"]",o=Te.store._state;if(ct(e),e!==Q)if(t){if(s(o[e]))throw it(ae.CC_MODULE_NAME_DUPLICATE,at(n))}else if(!o[e])throw it(ae.CC_MODULE_NOT_FOUND,at(n))}function ut(t,e){var r=Array.isArray(e);if(!r&&"*"!==e)throw Error("storedKeys type err, "+rt);r&&e.forEach(function(e){if(t.includes(e))throw Error("the item["+e+"] of storedKeys is not a module state key!")})}var dt={},lt=function(e,t,r){void 0===r&&(r=1e3);var n=dt[t];n&&clearTimeout(n),dt[t]=setTimeout(function(){delete dt[t],e()},r)};function ft(e,r,n,t,o,a,i){if(void 0===i&&(i=!1),!e.hasWatchFn)return!0;var c=Object.assign({},t),s=e.watchDep,u=e.module,d=e.ccUniqueKey,l=e.refComputed,f=Object.assign({},n,t),p=Ke(e,r,u,n,function(e,t){return he(t,"ref","watch",s,r,n,e,d)},t,f,c,o,a,"watch",oe,l);return i&&Object.assign(t,c),p}function pt(e,r,n,t,o,a,i){void 0===a&&(a=!1),void 0===i&&(i=!1);var c=Object.assign({},t);if(!e.hasComputedFn)return c;var s=e.computedDep,u=e.module,d=e.refComputed,l=e.ccUniqueKey,f=Object.assign({},n,t);return Ke(e,r,u,n,function(e,t){return he(t,oe,"computed",s,r,n,e,l)},t,f,c,o,a,"computed",oe,d),i&&Object.assign(t,c),c}var yt=ie,vt=j,mt=s,ht=function(e,t){return e+"/"+Object.keys(t).sort().join("|")},_t=F,Ct=se,gt=1,Kt=2,Et=ne,St=te,wt=re,bt=N,Ot=g,Nt=15,It=1,Ut=2,Dt=3,At=Te.store,xt=At.setState,Tt=At.getPrevState,Rt=Te.middlewares,kt=Te.moduleName_ccClassKeys_,Mt=Te.ccClassKey_ccClassContext_,$t=Te.connectedModuleName_ccClassKeys_,jt=Te.refStore,Ft=Te.moduleName_stateKeys_,Lt=Te.ccUkey_ref_,Pt=Te.renderKey_ccUkeys_;function Ht(e,t,r){var n=void 0===t?{}:t,o=n.module,a=n.skipMiddleware,i=void 0!==a&&a,c=n.payload,s=n.reactCallback,u=n.type,d=n.calledBy,l=void 0===d?St:d,f=n.fnName,p=void 0===f?"":f,y=n.renderKey,v=void 0===y?"":y,m=n.delay,h=void 0===m?-1:m;if(void 0!==e)if(yt(e)){var _=r.ctx,C=_.module,g=_.ccUniqueKey,K=_.ccKey,E=function(e,t){return e===t?gt:Kt}(o,C),S={calledBy:l,type:u,payload:c,renderKey:v,delay:h,ccKey:K,ccUniqueKey:g,state:e,refModule:C,module:o,fnName:p},w={payload:c,renderKey:v,ccKey:K},b=function(e,t,r){var n=Ce(t,Ft[e],!0).partialState;if(n){var o=xt(e,n,r);return Object.assign(n,o),n}return n}(o,e,{refCtx:E===gt?r.ctx:null,callInfo:w});Object.assign(e,b),qt(r,w,v,l,e,E,s,function(e,t){e===It&&!b||Qe(Nt,{committedState:t,sharedState:b,module:o,type:function(e,t){return[Et,St,wt,bt,Ot].includes(e)?"ccApi/"+e:"dispatch/"+t}(l,u),ccUniqueKey:g,renderKey:v}),b&&function(e,t,r,n,o,a,i){var c=function(){!function(d,e,l,t,r,n){if(!l)return;var o=e.ctx,f=o.ccUniqueKey,a=Mt[o.ccClassKey].renderKeyClasses,p=t===gt,y=kt[r]||[],v=[];if(n){y="*"===a?[]:Ct(y,a);var i=Pt[n]||[],c=function(e,t){var r=e.indexOf(t);if(-1<r){var n=e.slice();return n.splice(r,1),n}return e}(i,f);(function(e,n,o,a){e.forEach(function(e){var t=Lt[e],r=t.ctx.module;r===n?qt(t,a,null,"broadcastState",o,gt):x("although ref's renderKey matched but its module "+r+" mismatch target module "+n+", cc will ignore trigger it re-render")})})(v=c,r,l,d)}for(var s=y.length,u=function(e){var t=y[e],r=Mt[t],n=r.ccKeys,o=r.watchedKeys,a=r.originalWatchedKeys;if(0===n.length)return"continue";if(0===o.length)return"continue";var i=void 0;if("*"===a)i=l;else{var c=Ce(l,o,!0),s=c.partialState,u=c.isStateEmpty;if(u)return"continue";i=s}n.forEach(function(e){if(!(v.includes(e)||e===f&&p)){var t=Lt[e];t&&qt(t,d,null,"broadcastState",i,gt)}})},m=0;m<s;m++)u(m);!function(r,n,o){var a=_t(n);($t[r]||[]).forEach(function(e){var t=Mt[e];!function(e,o,a,t,i){var r=e.connectedModuleKeyMapping;if(1===e.connectedModule[o]){for(var n=e.ccKeys,c=!1,s=t.length,u=0;u<s;u++){var d=o+"/"+t[u];if(r[d]){c=!0;break}}if(!0===c){var l=Tt(o);n.forEach(function(e){var t=Lt[e];if(t&&!0!==t.__$$isUnmounted){var r=t.ctx;pt(r,o,l,a,i);var n=ft(r,o,l,a,i);n&&r.__$$ccForceUpdate()}})}}}(t,r,n,a,o)})}(r,l,d)}(e,t,r,n,o,a)};if(0<i){var s=ht(t.ctx.ccUniqueKey,r);lt(c,s,i)}else c()}(w,r,b,E,o,v,h)},i,S)}else vt("your committed state "+tt)}function qt(e,t,r,n,o,a,i,c,s,u){var d=e.state,l=e.ctx;if(!0===e.__$$isUnmounted||a!==gt||n!==Et&&!mt(o))return i&&i(d),c&&c(It,o);var f=l.module,p=l.storedKeys,y=l.ccUniqueKey,v=Dt;if(r&&(v=Ut,l.renderKey!==r))return c&&c(It,o);if(0<p.length){var m=Ce(o,p),h=m.partialState;if(!m.isStateEmpty){if(!0===l.persistStoredKeys){var _=Ce(d,p),C=Object.assign({},_.partialState,h);localStorage.setItem("CCSS_"+y,JSON.stringify(C))}jt.setState(y,h)}}function g(){return l.__$$ccSetState(K,i,E)}var K=pt(l,f,d,o,t),E=ft(l,f,d,K,t,!1,!0);c?(u.state=K,function(e,r,n){if(!0!==e){var o=Rt.length;if(0<o){var a=0;!function e(){if(a===o)n();else{var t=Rt[a];a++,t(r,e)}}()}else n()}else n()}(s,u,function(){g(),c(v,K)})):g()}function Vt(e,t){void 0===t&&(t=!1);var r=Te.ccUkey_ref_,n=Te.moduleName_ccClassKeys_,o=Te.ccClassKey_ccClassContext_,a=[];if(e){if(!Te.store._state[e])throw Error("module["+e+"] is not declared in store");var i=n[e];if(i&&0!==i.length){var c=i[0],s=o[c];if(!s)throw Error("no ccClassContext found for ccClassKey "+c+"!");a=s.ccKeys}if(e===H&&(a=a.filter(function(e){return!e.startsWith(U)})),0===a.length){if(!1!==t){throw Error("[[pickOneRef]]: no ref found for module["+e+"]!,if this message doesn't matter, you can ignore it")}a=[B]}}else a=[B];var u=r[a[0]];if(!u)throw Error("cc found no ref!");return u}function Bt(e,t,r,n,o){void 0===n&&(n=-1);try{Vt(e).ctx.changeState(t,{ccKey:"[[top api:setState]]",module:e,renderKey:r,delay:n,skipMiddleware:o})}catch(e){G(e)}}var Gt=Te.store.setState,zt=Te.globalStateKeys,Wt="note! you are trying set state for global module, but the state you commit include some invalid keys which is not declared in cc's global state, \ncc will ignore them, but if this result is not as you expected, please check your committed global state!";var Yt=j,Xt=Te.store,Jt=Xt.getState,Zt=Xt.setState,Qt=Te.reducer._reducer,er=Te.computed._computedValue,tr=d,rr=f;function nr(e,t){void 0===t&&(t=!0);try{return st(e,!1,"module["+e+"] is not configured in store"),!0}catch(e){return function(e,t){if(void 0===t&&(t=!0),t)throw e;ir(e)}(e,t),!1}}function or(o,a){return function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e?a(e):o.apply(void 0,r)}}function ar(e,t,r,n){var o;return!0===e?(function(e){Ve[e]=!0}(o=Ge()),n[o]=1):n[o=t||Ge()]||(n[o]=1),{_chainId:o,_oriChainId:r||o}}function ir(e,t){e&&(t?t(e):(Yt(e),Te.errorHandler&&Te.errorHandler(e)))}function cr(e,t,r){return function(n,o,a,i){return new Promise(function(e,t){var r=Object.assign(a,{__innerCb:or(e,t)});n(o,r,i)}).catch(Le)}(fr,e,t,r)}function sr(e,t,r){return cr(e,{callerRef:t.callerRef,context:!0,module:t.module,calledBy:t.calledBy,fnName:e.name,delay:t.delay,renderKey:t.renderKey,chainId:t.chainId,oriChainId:t.oriChainId,chainId_depth_:t.chainId_depth_,isSilent:t.isSilent},r)}function ur(a,i){return function(e,t,r){var n=a.ctx,o=Object.assign({},n.state,e);n.state=o,i&&(i.state=o),n.type===O&&(a.state=o),r?(n.renderCount+=1,n.reactSetState(e,t)):n.type!==O&&Object.assign(a.state,e)}}function dr(r){return function(e){var t=r.ctx;t.renderCount+=1,t.reactForceUpdate(e)}}function lr(_,e){var t=void 0===e?{}:e,C=t.chainId,g=t.oriChainId,K=t.isLazy,r=t.delay,E=void 0===r?-1:r,n=t.isSilent,S=void 0!==n&&n,o=t.chainId_depth_,w=void 0===o?{}:o;return function(e,t,r,n){var o=K,a=S,i="",c=null!=n?n:E;if(r&&"object"==typeof r){var s=r.lazy,u=r.silent,d=r.renderKey,l=r.delay;void 0!==s&&(o=s),void 0!==u&&(a=u),void 0!==d&&(i=d),void 0!==l&&(c=l)}else i=r;var f,p,y=ar(o,C,g,w),v=typeof e,m={callerRef:_,calledBy:N,module:_.ctx.module,isSilent:a,chainId:y._chainId,oriChainId:y._oriChainId,chainId_depth_:w,delay:c,renderKey:i},h=Error("param type error, correct usage: invoke(userFn:function, ...args:any[]) or invoke(option:[module:string, fn:function], ...args:any[])");if("function"==v)return e.__fnName&&(e.name=e.__fnName),sr(e,m,t);if("object"!=v)throw h;if(p=Array.isArray(e)?(f=e[1],e[0]):(f=e.fn,e.module),"function"!=typeof f)throw h;return p&&(m.module=p),sr(f,m,t)}}function fr(f,e,p){var y=e.callerRef,v=y.ctx.module,t=e.module,m=void 0===t?v:t,r=e.context,h=void 0!==r&&r,_=e.__innerCb,C=e.type,g=e.calledBy,K=e.fnName,n=e.delay,E=void 0===n?-1:n,S=e.renderKey,w=e.chainId,b=e.oriChainId,O=e.chainId_depth_,N=e.isSilent;!function(e,t,r,n){var o=r;nr(e,!1)?(e!==t&&r&&(Yt(function(e,t){return"param module["+e+"] must equal current ref's module["+t+"] when pass param reactCallback, or it will never been triggered! "}(e,t)),o=null),n(null,o)):n(Error("inputModule:"+e+" invalid"),null)}(m,v,e.cb,function(e,n){if(e)return ir(e,_);var o,t=Jt(m),r={};if(o=w===b&&1===O[w],h){O[w]=O[w]+1;var a=pr(y,!1,N,m,S,E,w,b,O),i=pr(y,!1,!0,m,S,E,w,b,O),c=pr(y,!0,N,m,S,E,w,b,O),s=lr(y,{delay:E,chainId:w,oriChainId:b,chainId_depth_:O}),u=lr(y,{isLazy:!0,delay:E,oriChainId:b,chainId_depth_:O}),d=lr(y,{isLazy:!1,delay:E,isSilent:!0,oriChainId:b,chainId_depth_:O}),l=function(e){return Be[e]}(w)||{};r={module:m,callerModule:v,committedStateMap:l,committedState:l[m]||{},invoke:s,lazyInvoke:u,silentInvoke:d,invokeLazy:u,invokeSilent:d,dispatch:a,lazyDispatch:c,silentDispatch:i,dispatchLazy:c,dispatchSilent:i,rootState:Jt(),globalState:Jt(Q),moduleState:t,moduleComputed:er[m]||{},setState:function(e){return a("setState",e,{silent:N,renderKey:S,delay:E})},refCtx:y.ctx}}!1===N&&Qe(I,{isSourceCall:o,calledBy:g,module:m,chainId:w,fn:f}),new Promise(function(e){return e(f(p,t,r))}).then(function(e){O[w]=O[w]-1;var t=1===O[w];!function(e,t,r){ze(e,t,r,Be)}(w,m,e);var r=[];!1===N&&(Qe(D,{isSourceCall:o,calledBy:g,module:m,chainId:w,fn:f}),!function(e){return!0===Ve[e]}(w)?r=[{module:m,state:e}]:t?function(e){return!0===qe[e]}(w)||(r=Ye(w,m,e),Xe(w)):We(w,m,e)),r.forEach(function(e){e.state&&Ht(e.state,{renderKey:S,module:e.module,reactCallback:n,type:C,calledBy:g,fnName:K,delay:E,payload:p},y)}),o&&(Xe(w),function(e){delete Be[e]}(w)),_&&_(null,e)}).catch(function(e){Qe(A,{isSourceCall:o,calledBy:g,module:m,chainId:w,fn:f}),ir(e,_)})})}function pr(O,N,I,U,D,A,x,T,R){return void 0===D&&(D=""),void 0===A&&(A=-1),void 0===R&&(R={}),function(e,r,t,n){void 0===e&&(e={});var o,a=N,i=I,c=n||A;if("object"==typeof t){o=D;var s=t.lazy,u=t.silent,d=t.renderKey,l=t.delay;void 0!==s&&(a=s),void 0!==u&&(i=u),void 0!==d&&(o=d),void 0!==l&&(c=l)}else o=t||D;function f(){return lr(O,{chainId:m,oriChainId:h,isLazy:a,chainId_depth_:R})(e,r,o,c)}var p,y,v=ar(a,x,T,R),m=v._chainId,h=v._oriChainId,_=typeof e,C=U;if(_&&"object"==_){if(Array.isArray(_))return f();var g=e.module;g&&(C=g),p=e.type,y=e.cb}else{if("string"!=_&&"function"!=_)return Promise.reject(tr(ae.CC_DISPATCH_PARAM_INVALID));var K=e;if("function"==_){var E=e.__fnName;if(!E)return f();K=E,1==R[h]&&(C=e.__stateModule)}var S=K.split("").filter(function(e){return"/"===e}).length;if(0===S)p=K;else{if(1!==S)return Promise.reject(tr(ae.CC_DISPATCH_STRING_INVALID,rr(K)));var w=K.split("/"),b=w[0];b&&(C=b),p=w[1]}}return"*"===C?Promise.reject("cc instance api dispatch do not support multi dispatch, please use top api[cc.dispatch] instead!"):new Promise(function(e,t){!function(e){var t=void 0===e?{}:e,r=t.callerRef,n=t.module,o=t.renderKey,a=t.isSilent,i=t.type,c=t.payload,s=t.cb,u=t.__innerCb,d=t.delay,l=void 0===d?-1:d,f=t.chainId,p=t.oriChainId,y=t.chainId_depth_,v=Qt[n];if(!v)return u(Error("no reducerMap found for module:["+n+"]"));var m=v[i];if(!m)return u(Error("no reducer fn found for ["+n+"/"+i+"], is these fn you want:"+Object.keys(v)));fr(m,{callerRef:r,module:n,type:i,cb:s,context:!0,__innerCb:u,calledBy:k,delay:l,renderKey:o,isSilent:a,chainId:f,oriChainId:p,chainId_depth_:y},c)}({callerRef:O,module:C,type:p,payload:r,cb:y,__innerCb:or(e,t),delay:c,renderKey:o,isSilent:i,chainId:m,oriChainId:h,chainId_depth_:R})}).catch(Le)}}function yr(o){return function(t){try{Bt(o,t)}catch(e){if(o===Q)!function(e,t,r){void 0===t&&(t=""),void 0===r&&(r="");var n=Ce(e,zt),o=n.partialState,a=n.isStateEmpty,i=F(o),c=F(e);if(i.length<c.length){var s=c.filter(function(e){return!i.includes(e)});j(Wt+",invalid keys: "+s.join(",")+", make sure the keys is invalid and their values are not undefined"),console.log(e),t&&j("module is "+t),r&&j("ccClassKey is "+r)}Gt(Q,o)}(t,o);else{var r=Jt(o);if(!r)return j("invalid module "+o);var n=Ce(t,F(r));n.isStateEmpty||Zt(o,n.partialState)}x("no ccInstance found for module["+o+"] currently, cc will just store it, lately ccInstance will pick this state to render")}}}var vr=F,mr=ie,hr=Te.store._state;var _r=u,Cr=d,gr=Te.featureStr_classKey_,Kr=Te.userClassKey_featureStr_,Er=Te.ccClassKey_ccClassContext_,Sr=0;var wr=Te.moduleName_stateKeys_,br=Te.moduleName_ccClassKeys_,Or=Te.moduleSingleClass,Nr=Te.ccClassKey_ccClassContext_,Ir=Te.connectedModuleName_ccClassKeys_,Ur=Te.computed._computedValue,Dr=function(e,t){var r=!1,n=!1;if(!Array.isArray(e))return{duplicate:r,notArray:!0,keyElementNotString:n};if(!Array.isArray(t))return{duplicate:r,notArray:!0,keyElementNotString:n};var o=e.length,a=t.length;e:for(var i=0;i<o;i++){var c=e[i];if("string"!=typeof c){n=!0;break e}for(var s=0;s<a;s++){var u=t[s];if("string"!=typeof u){n=!0;break e}if(u===c){r=!0;break e}}}return{duplicate:r,notArray:!1,keyElementNotString:n}},Ar=f;function xr(e,t,r,n,o,a,i,c,s){void 0===e&&(e=H),void 0===a&&(a=[]),!0===c&&function(){if(!0!==Te.isStartup)throw Error("you must startup cc by call startup method before register ReactClass to cc!")}();var u="cc"===s;st(e,!1,"module["+e+"] is not configured in store"),ut(wr[e],a);var d=i;Array.isArray(i)&&(d={},i.forEach(function(e){return d[e]="*"}));var l,f=function(e,t,r){if(!r)return[];if("*"===r)return wr[e];var n=Dr(r,[]);if(n.notArray||n.keyElementNotString)throw Error("watchedKeys "+rt+" "+Ar("ccClassKey:"+t));return r}(e,t,o),p=function(o,e,t,a){if(!mr(o))throw Error("CcFragment or CcClass's prop connect type error, it "+tt);function i(e){return c+" module["+e+"]'s value must be * or array of string"}var c="CcFragment or CcClass's prop connect is invalid,",r=vr(o);r.sort();var s=[],u={};if(r.forEach(function(t){var r=hr[t],n=a+"_"+t+"/";if(void 0===r)throw Error(c+" module["+t+"] not found in cc store ");var e=o[t];if("string"==typeof e){if("*"!==e)throw Error(i(t));s.push(n+"*"),vr(r).forEach(function(e){return u[t+"/"+e]=e})}else{if(!Array.isArray(e))throw Error(i(t));e.forEach(function(e){if(!r.hasOwnProperty(e))throw Error(c+" module["+t+"]'s key["+e+"] not declared in cc store ");n+=e+",",u[t+"/"+e]=e}),s.push(n)}}),s.push("|"),"*"===e)s.push(a+"_$"+t+"/*");else{e.sort();var n=t+"/"+e.join(",");s.push(n)}return{featureStr:s.join("@"),connectedModuleKeyMapping:u,connectedModuleNames:r}}(d,f),y=p.connectedModuleKeyMapping,v=p.connectedModuleNames,m=function(e,t,r,n,o,a,i){if(void 0===i&&(i=""),!i){if(t===H&&_r(r)&&0===n.length)return o+"0";var c=o+":"+a,s=gr[c];return s||(gr[c]=s=""+o+ ++Sr)}if(i.startsWith(h))throw Error("user can not specify a classKey["+i+"] starts with $$Cc");if(!e&&i.toLowerCase()==B.toLowerCase())throw Error(B+" is cc built-in ccClassKey name, if you want to customize your dispatcher, \n      you can set autoCreateDispatcher=false in StartupOption, and use createDispatcher then.");if(Er[i]){if(Kr[i]!==a)throw Cr(ae.CC_CLASS_KEY_DUPLICATE,"ccClassKey:["+i+"] duplicate")}else Kr[i]=a;return i}(u,e,d,f,n,p.featureStr,t);if(r){if(!Array.isArray(r)&&"*"!==r)throw Error("renderKeyClasses type err, it is must be an array or string *");l=r}else l=[m];return function(r,e,t,n,o,a,i){var c=Nr[r];c||(c=function(e,t,r,n,o){return{module:e,ccClassKey:t,renderKeyClasses:r,originalWatchedKeys:o,watchedKeys:n,ccKeys:[],connectedState:{},connectedModuleKeyMapping:null,connectedModule:{}}}(t,r,e,o,n),Nr[r]=c);var s={},u={};if(a){var d=Te.store._state,l=c.connectedState;i.forEach(function(e){l[e]=d[e],u[e]=Ur[e],s[e]=1;var t=ce(Ir,e);t.includes(r)||t.push(r)}),c.connectedModuleKeyMapping=a,c.connectedModule=s,c.connectedComputed=u}}(m,l,e,o,f,y,v),function(e,t){var r=ce(br,e);if(!0===Or[e]&&1<=r.length)throw Error("module["+e+"] is declared as single, only on ccClassKey can been registered to it, and now a ccClassKey["+r[0]+"] has been registered!");r.includes(t)||r.push(t)}(e,m),{_module:e,_connect:d,_watchedKeys:f,_ccClassKey:m}}var Tr=j,Rr=d,kr=f,Mr=y,$r=p,jr=Te.runtimeVar,Fr=Te.ccClassKey_ccClassContext_,Lr=Te.ccUkey_ref_,Pr={};function Hr(e,t,r,n){function o(){Lr[e]=t,r.push(e)}!function(e){void 0===Pr[e]?Pr[e]=1:Pr[e]+=1}(e),n?setTimeout(o,n):o()}function qr(e,t,r,n,o){var a=Fr[r],i=a.ccKeys;jr.isDebug&&console.log(Mr("register ccKey "+o+" to CC_CONTEXT"),$r());var c=Te.isHotReloadMode();if(i.includes(o)){var s=function(){throw Rr(ae.CC_CLASS_INSTANCE_KEY_DUPLICATE,kr("ccClass:"+r+",ccKey:"+o))};if(c){var u=function(e){return void 0===Pr[e]?0:Pr[e]}(o);if(t&&0<u)throw Rr(ae.CC_CLASS_INSTANCE_MORE_THAN_ONE,kr("ccClass:"+r));1<u&&s(),Tr("\n        found ccKey["+n+"] duplicated in hot reload mode, please make sure your ccKey is unique manually,\n        "+kr("ccClassKey:"+r+" ccKey:"+n+" ccUniqueKey:"+o)+"\n      "),Hr(o,e,i,600)}else s()}else Hr(o,e,i);return a}var Vr=Te.event_handlers_,Br=Te.handlerKey_handler_,Gr=Te.ccUKey_handlerKeys_,zr=Te.ccUkey_ref_,Wr=function(e,t,r){return e+"$"+t+"$"+r},Yr=ce,Xr=j;function Jr(e,t,r,n,o){void 0===o&&(o=null);var a=Vr[e];if(a){var i=a;return n?i=a.filter(function(e){return e.ccUniqueKey===n}):r?i=a.filter(function(e){return e.ccClassKey===r}):t&&(i=a.filter(function(e){return e.module===t})),void 0!==o&&(i=i.filter(function(e){return e.identity===o})),i}return[]}function Zr(e){var o={},n=[];e.forEach(function(e){var t=e.ccUniqueKey,r=e.event;delete Br[e.handlerKey],o[t]=1,n.includes(r)||n.push(r)}),n.forEach(function(e){var n=Vr[e];n&&(n.forEach(function(e,t){var r=e.ccUniqueKey;1===o[r]&&(n[t]=null,delete Gr[r])}),Vr[e]=n.filter(function(e){return null!==e}))})}function Qr(e,t,r,n,o,a){var i=Yr(Vr,n);if("function"!=typeof a)return Xr("event "+n+"'s handler is not a function!");var c=Wr(r,n,o),s=Yr(Gr,r),u=i.findIndex(function(e){return e.handlerKey===c}),d={event:n,module:e,ccClassKey:t,ccUniqueKey:r,identity:o,handlerKey:c,fn:a};-1<u?i[u]=d:(i.push(d),s.push(c)),Br[c]=d}function en(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o,a,i,c,s=null;"string"==typeof e?o=e:(o=e.name,s=e.identity,a=e.module,i=e.ccClassKey,c=e.ccUniqueKey),Jr(o,a,i,c,s).forEach(function(e){var t=e.handlerKey;if(zr[e.ccUniqueKey]&&t){var r=Br[t];r&&r.fn.apply(r,n)}})}function tn(e,t){Zr(Jr(e,t.module,t.ccClassKey,t.ccUniqueKey,t.identity))}function rn(e){var t=Gr[e];if(t){var r=[];t.forEach(function(e){return r.push(Br[e])}),Zr(r)}}function nn(e){if(e&&"object"==typeof e){var t;if(Array.isArray(e))t={name:e[0],identity:e[1]};else t=Object.assign({},e);return t}return{name:e}}var on=Object.freeze({bindEventHandlerToCcContext:Qr,findEventHandlersToPerform:en,findEventHandlersToOff:tn,offEventHandlersByCcUniqueKey:rn,getEventItem:nn}),an=0,cn=["a","A","b","B","c","C","d","D","e","E","f","F","g","G","h","H","i","I","j","J","k","K","l","L","m","M","n","N","o","O","p","P","q","Q","r","R","s","S","t","T","u","U","v","V","w","W","x","X","y","Y","z","Z"];function sn(e){return an++,(e||function(e){void 0===e&&(e=6);for(var t="",r=0;r<e;r++)t+=cn[m()];return t}())+"_"+an}var un=Te.moduleName_stateKeys_,dn=Te.refRetKey_fnUid_,ln=Te.runtimeVar;function fn(e,t,r,n,o,a,i){if(r){var c,s,u,d=typeof r;if("string"==d)c="object"==typeof n?((s={})[r]=n,s):((u={})[r]={fn:n,depKeys:o,compare:a,immediate:i},u);else if("object"==d)c=r;else if("function"==d&&!ie(c=r(t.refCtx)))throw Error("type of "+t.type+" callback result must be an object");c&&function(O,N,I){var e=ln.computedCompare,t=ln.watchCompare,U=ln.watchImmediate,D="computed"===N.type?e:t,A=N.module;F(I).forEach(function(i){var e=I[i],t=typeof e,r=e;if("function"==t&&(r={fn:e}),"object"==typeof r){var n=r,o=n.fn,a=n.depKeys,c=n.immediate,s=void 0===c?U:c,u=n.compare,d=void 0===u?D:u,l=sn("mark");if("*"===a){var f=vn(N,A,i),p=f.isStateKey,y=f.stateKey;if(!p)throw Error("retKey["+i+"] is not a state key of module["+A+"]");pn(O,N,l,y),yn(O,N,A,y,o,a,s,d)}else{if(a&&!Array.isArray(a))throw Error("depKeys must an string array or *");if(a&&0!==a.length){var v="",m=i;if(i.includes("/")){var h=i.split("/"),_=h[0],C=h[1];v=_,m=C}pn(O,N,l,m);var g={};a.forEach(function(e){var t=vn(N,A,e),r=t.isStateKey,n=t.stateKey,o=t.module;if(v&&o!==v)throw Error("including slash both in retKey["+i+"] and depKey["+e+"] founded, but their module is different");var a=ce(g,o);if(!r)throw Error("depKey["+e+"] invalid, module["+o+"] doesn't include its stateKey["+n+"]");a.push(n)}),F(g).forEach(function(e){yn(O,N,e,m,o,g[e],s,d)})}else{var K=vn(N,A,i),E=K.isStateKey,S=K.stateKey,w=K.module,b=[];!a&&E&&(b=[S]),pn(O,N,l,S),yn(O,N,w,S,o,b,s,d)}}}})}(e,t,c)}}function pn(e,t,r,n){if(e===oe){var o=t.refCtx.ccUniqueKey,a=t.type,i=o+"_"+a+"_"+n;if(dn[i])throw Error("ccUKey["+o+"], retKey["+n+"] duplicate in ref "+a);dn[i]=r}}function yn(e,t,r,n,o,a,i,c){var s=S(t.dep,r,{retKey_fn_:{},stateKey_retKeys_:{},fnCount:0}),u=s.retKey_fn_,d=s.stateKey_retKeys_,l={fn:o,immediate:i,compare:c,depKeys:a};u[n]?e!==oe&&(u[n]=l):(u[n]=l,s.fnCount++);var f=a;"*"===a&&(f=["*"]),e===oe&&(t.retKeyFns[n]=u[n]);var p=t.refCtx;p&&("computed"===t.type?p.hasComputedFn=!0:p.hasWatchFn=!0),f.forEach(function(e){var t=ce(d,e);t.includes(n)||t.push(n)})}function vn(e,t,r){var n,o=t,a=r;if(r.includes("/")){var i=r.split("/"),c=i[0];c&&(o=c),a=i[1]}if(o===e.module)n=e.stateKeys;else{if(!(n=un[o]))throw d(ae.CC_MODULE_NOT_FOUND,f("module["+o+"]"));if(!e.connect[o])throw d(ae.CC_MODULE_NOT_CONNECTED,f("module["+o+"], stateKey["+a+"]"))}return{isStateKey:n.includes(a),stateKey:a,module:o}}var mn=j,hn=l;function _n(e){return e?e.props||e:{}}var Cn=Te.store.getState;function gn(e){var t=L(e);return t?t.currentTarget.value:e}var Kn=function(e,t,r){var n,o=r.module,a=r.state,i=!1,c="",s="",u="",d=void 0,l=-1,f=!1,p=e[ee],y=e.type,v=!1;if(void 0!==p)if(c=p,l=e.delay,s=e.rkey,"val"===y||"int"===y){i="int"===y;var m=e.val;if(void 0===m)u=gn(t);else if("function"==typeof m){var h,_,C;if(c.includes("/")){var g=c.split("/");h=g[1],_=c,C=g[0]}else _=o+"/"+(h=c),C=o;v=!0,d=m(gn(t),h,{moduleState:Cn(C),fullKeyPath:_,state:a,refCtx:r})}else u=m}else{if("bool"!==y)return null;f=!0}else{var K=L(t);if(!K)return null;var E=K.currentTarget;u=E.value;var S=E.dataset;if(i="int"===y||void 0!==S.ccint,!(c=S.ccsync))return null;s=S.ccrkey;var w=S.ccdelay;if(w)try{l=parseInt(w)}catch(e){}}return(n={})[b]=1,n.currentTarget={value:u,extraState:d,hasSyncCb:v,dataset:{ccsync:c,ccint:i,ccdelay:l,ccrkey:s}},n.isToggleBool=f,n};var En=function(e,t,r,n,o){var a=t;!0!==r||Number.isNaN(a=parseInt(t))&&(j(t+" can not convert to int but you set ccint as true!ÔºÅ"),a=t);var i=null,c=[];if(e.includes("/")){var s=e.split("/"),u=s[1];i=s[0],c=u.includes(".")?u.split("."):[u]}else c=e.includes(".")?e.split("."):[e];if(1===c.length){var d,l,f=c[0];return!0!==o?{module:i,state:(d={},d[f]=a,d)}:{module:i,state:(l={},l[f]=!n[f],l)}}var p,y=c[0],v=c.slice(1),m=n[y];return function e(t,r,n,o,a,i){void 0===i&&(i=!1);var c=r[o];if(n===o)if(!0===i){var s=t[c];"boolean"!=typeof s?j("key["+c+"]'s value type is not boolean"):t[c]=!s}else t[c]=a;else e(t[c],r,n,++o,a,i)}(m,v,v.length-1,0,a,o),{module:i,state:(p={},p[y]=m,p)}},Sn=Te.store.getState;function wn(e,t,r){var n=t.ctx,o=n.module,a=null;if(a=e[b]?e:Kn(e,r,n)){var i=a.currentTarget,c=i.dataset,s=i.value,u=i.extraState,d=i.hasSyncCb;r&&r.stopPropagation&&r.stopPropagation();var l=c.ccsync,f=c.ccint,p=c.ccdelay,y=c.ccrkey;if(l.startsWith("/")&&(c.ccsync=""+o+l),l.includes("/")){var v=l.split("/")[0];st(v,!1);var m=n.ccKey,h=n.ccUniqueKey;if(d)return void(u&&Ht(u,{calledBy:g,ccKey:m,ccUniqueKey:h,module:v,renderKey:y,delay:p},t));var _=v!==o?Sn(v):t.state;Ht(En(l,s,f,_,a.isToggleBool).state,{calledBy:g,ccKey:m,ccUniqueKey:h,module:v,renderKey:y,delay:p},t)}else{if(d)return void(u&&t.setState(u,null,y,p));var C=En(l,s,f,t.state,a.isToggleBool);t.setState(C.state,null,y,p)}}}var bn=Te.refStore,On=Te.ccClassKey_ccClassContext_,Nn=Te.moduleName_stateKeys_,In=Te.store.getState,Un=Te.moduleName_ccClassKeys_,Dn=Te.computed._computedValue,An=Te.renderKey_ccUkeys_,xn=F,Tn=d,Rn=f,kn=ce,Mn=0;function $n(a,e,t){var r;void 0===t&&(t=5);var n=a.setState.bind(a),o=a.forceUpdate.bind(a),i=e.isSingle,c=e.ccClassKey,s=e.ccKey,u=void 0===s?"":s,d=e.module,l=e.type,f=e.state,p=e.storedKeys,y=void 0===p?[]:p,v=e.persistStoredKeys,m=e.watchedKeys,h=e.connect,_=void 0===h?{}:h,C=e.tag,g=void 0===C?"":C,K=e.ccOption,E=void 0===K?{}:K,S=d,w={};w.persistStoredKeys=void 0===E.persistStoredKeys?void 0!==v&&v:E.persistStoredKeys,w.tag=E.tag||g;var b=function(e,t,r,n){var o;if(e)r&&mn("now the ccClass is singleton, you needn't supply ccKey to instance props, cc will ignore the ccKey["+r+"]"),o=t;else if(r)o=hn(t,r);else{var a=sn(n);o=hn(t,a)}return o}(i,c,u,w.tag);if(w.renderKey=E.renderKey||b,kn(An,w.renderKey).push(b),w.storedKeys=function(e,t,r,n){var o=r||n;return o?"*"===o?Object.keys(e).filter(function(e){return!t.includes(e)}):(ut(t,o),o):[]}(f,Nn[S],E.storedKeys,y),u&&!c)throw Error("missing ccClassKey while init a cc ins with ccKey["+u+"]");if(0<w.storedKeys.length&&!u)throw Tn(ae.CC_STORED_KEYS_NEED_CCKEY,Rn("ccClassKey["+c+"]"));var O=On[c],N=O.connectedComputed||{},I=O.connectedState||{},U=In(d),D=Dn[d]||{},A=Dn[Q]||{},x=In(Q),T=se(xn(f),Nn[S]),R=bn._state[b]||{},k=Object.assign({},f,R,U),M=xn(a.state=k);qr(a,i,c,u,b);var $=ce(Un,d);$.includes(c)||$.push(c);function j(e,t){Ht(e,t,a)}function F(e,t,r,n,o,a){j(t,{calledBy:r,module:e,renderKey:o,delay:a,reactCallback:n})}function L(e,t,r,n,o){F(e,t,re,r,n,o)}function P(e,t,r,n,o){"string"==typeof e?L(e,t,r,n,o):F(S,e,te,t,r,n)}function H(e,t,r){F(S,a.state,ne,e,t,r)}var q=[],V=[],B=[],G={effectItems:V,eid_effectReturnCb_:{},effectPropsItems:B,eid_effectPropsReturnCb_:{}},z={},W=_n(a.props),Y=((r={type:l,isSingle:i,module:d,ccClassKey:c,ccKey:u,ccUniqueKey:b,renderCount:1,initTime:Date.now(),watchedKeys:m,privStateKeys:T,connect:_,persistStoredKeys:w.persistStoredKeys,storedKeys:w.storedKeys,renderKey:w.renderKey,tag:w.tag,prevProps:W,props:W,mapped:{},prevState:k,state:k,moduleState:U,globalState:x,connectedState:I,extra:{},refComputed:{},moduleComputed:D,globalComputed:A,connectedComputed:N,moduleReducer:{},connectedReducer:{},reducer:{}}).mapped={},r.prevModuleStateVer={},r.stateKeys=M,r.onEvents=q,r.computedDep={},r.computedRetKeyFns={},r.watchDep={},r.watchRetKeyFns={},r.execute=null,r.auxMap=z,r.effectMeta=G,r.reactSetState=n,r.reactForceUpdate=o,r.setState=P,r.setModuleState=L,r.forceUpdate=H,r.changeState=j,r.__$$ccForceUpdate=dr(a),r.__$$ccSetState=ur(a),r);a.ctx=Y,a.setState=P,a.forceUpdate=H,Y.initState=function(e){if(!a.__$$isBeforeFirstRender)throw Error("ctx.initState can only been called before first render period!");if(!ie(f))throw Error("state must be a plain json object!");a.state=Object.assign({},f,e,R,U),Y.prevState=Y.state=a.state};var X=pr(a,!1,!1,S);if(Y.dispatch=X,1<t&&(Y.lazyDispatch=pr(a,!0,!1,S),Y.silentDispatch=pr(a,!1,!0,S),Y.dispatchLazy=Y.lazyDispatch,Y.dispatchSilent=Y.silentDispatch,Y.invoke=lr(a),Y.lazyInvoke=lr(a,{isLazy:!0}),Y.silentInvoke=lr(a,{isLazy:!1,isSilent:!0}),Y.invokeLazy=Y.lazyInvoke,Y.invokeSilent=Y.silentInvoke,Y.setGlobalState=function(e,t,r,n){F(Q,e,te,t,r,n)}),2<t&&(Y.syncBool=function(e,t,r){var n;if(void 0===t&&(t=""),void 0===r&&(r=-1),"string"==typeof e)return wn.bind(null,((n={})[ee]=e,n.type="bool",n.delay=r,n.rkey=t,n),a);wn({type:"bool"},e,a)},Y.sync=function(e,t,r,n){var o;if(void 0===r&&(r=""),void 0===n&&(n=-1),"string"==typeof e)return wn.bind(null,((o={})[ee]=e,o.type="val",o.val=t,o.delay=n,o.rkey=r,o),a);wn({type:"val"},a,e)},Y.set=function(e,t,r,n){var o;void 0===r&&(r=""),void 0===n&&(n=-1),wn(((o={})[ee]=e,o.type="val",o.val=t,o.delay=n,o.rkey=r,o),a)},Y.setBool=function(e,t,r){var n;void 0===t&&(t=""),void 0===r&&(r=-1),wn(((n={})[ee]=e,n.type="bool",n.delay=r,n.rkey=t,n),a)},Y.syncInt=function(e,t,r){var n;if(void 0===t&&(t=""),void 0===r&&(r=-1),"string"==typeof e)return wn.bind(null,((n={})[ee]=e,n.type="int",n.delay=r,n.rkey=t,n),a);wn({type:"int"},a,e)}),3<t){Y.emit=function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];en.apply(on,[nn(e)].concat(r))},Y.off=function(e,t){var r=void 0===t?{}:t,n=r.module,o=r.ccClassKey,a=r.ccUniqueKey,i=void 0===a?b:a,c=nn(e);tn(c.name,{module:n,ccClassKey:o,ccUniqueKey:i,identity:c.identity})};var J=function(e,t,r){void 0===r&&(r=!0);var n=nn(e),o=n.name,a=n.identity,i=void 0===a?null:a;r?q.push({event:o,handler:t,identity:i}):Qr(S,c,b,o,i,t)};Y.on=J,Y.onDirectly=function(e,t){J(e,t,!1)}}if(4<t){Y.execute=function(e){return Y.execute=e},Y.aux=function(e,t){if(z[e])throw Error("auxMethod["+e+"] already defined!");z[e]=t},Y.watch=function(a){return function(e,t,r,n,o){fn(oe,{type:"watch",refCtx:a,stateKeys:a.stateKeys,retKeyFns:a.watchRetKeyFns,module:a.module,connect:a.connect,dep:a.watchDep},e,t,r,n,o)}}(Y),Y.computed=function(o){return function(e,t,r,n){fn(oe,{type:"computed",refCtx:o,stateKeys:o.stateKeys,retKeyFns:o.computedRetKeyFns,module:o.module,connect:o.connect,dep:o.computedDep},e,t,r,n)}}(Y);var Z=function(i){return function(e,t,r,n){var o;if(void 0===r&&(r=!0),"function"!=typeof e)throw Error("type of defineEffect first param must be function");if(null!=t&&!Array.isArray(t))throw Error("type of defineEffect second param must be one of them(array, null, undefined)");var a=((o={fn:e,depKeys:t,eId:n||Symbol("__autoGen_"+ ++Mn+"__")}).depKeys=t,o.immediate=r,o);i.push(a)}};Y.effect=Z(V),Y.effectProps=Z(B)}}var jn=Te.store.getState,Fn={payload:null,renderKey:"",delay:-1};var Ln=S,Pn=F,Hn=j,qn=Te.reducer,Vn=qn._module_fnNames_,Bn=qn._caller,Gn=Te.runtimeVar;function zn(r,e,t){r.__$$isUnmounted=!1,r.__$$isBeforeFirstRender=!0;var n=r.ctx,a=n.connectedReducer,i=n.moduleReducer,c=n.dispatch,s=n.module,o=Pn(n.connect).slice();if(o.includes(s)?Hn("module["+s+"] is in belongTo and connect both, it will cause redundant render."):o.push(s),o.forEach(function(o){var e;e=o===s?i:Ln(a,o),(Vn[o]||[]).forEach(function(n){e[n]=function(e,t,r){return c(o+"/"+n,e,t,r)}})}),n.reducer=Bn,e){if("function"!=typeof e)throw Error("type of setup must be function");var u=e(n)||{};if(!ie(u))throw Error("type of setup return result must be an plain json object");(!0===t||!0===Gn.bindCtxToMethod&&!1!==t)&&Pn(u).forEach(function(e){var t=u[e];"function"==typeof t&&(u[e]=t.bind(r,n))}),n.settings=u}!function(e){var r=e.ctx,t=r.hasComputedFn,n=r.hasWatchFn,o=r.module,a=F(r.connect),i=r.state;t&&(pt(r,o,i,i,Fn,!0,!0),a.forEach(function(e){var t=jn(e);pt(r,e,t,t,Fn,!0,!0)})),n&&(ft(r,o,i,i,Fn,!0,!0),a.forEach(function(e){var t=jn(e);ft(r,e,t,t,Fn,!0,!0)}))}(r)}var Wn=Te.moduleName_stateKeys_,Yn=Te.store,Xn=Yn.getPrevState,Jn=Yn.getState,Zn=Yn.getStateVer,Qn=function(e,t){return j("effect: key["+e+"] is invalid, its "+t+" has not been declared in' store!")};function eo(e,t){function r(o,a,i){return function(e){var t=e.eId;if(!i||!1!==e.immediate){var r=o[t],n=(0,e.fn)(m,a);n&&(o[t]=n),r&&r(m)}}}var m=e.ctx,n=m.effectMeta,o=n.effectItems,a=n.eid_effectReturnCb_,i=n.effectPropsItems,c=n.eid_effectPropsReturnCb_,h=m.prevModuleStateVer;if(t)o.forEach(r(a,!0,!0)),i.forEach(r(c,!0,!0));else{var _=m.prevState,C=e.state,g=[];o.forEach(function(e){var t=e.depKeys,r=e.fn,n=e.eId;if(t){var o=t.length;if(0===o)return;for(var a=!1,i=0;i<o;i++){var c=t[i],s=void 0,u=void 0,d=void 0;if(c.includes("/")){var l=c.split("/"),f=l[0],p=l[1],y=Xn(f),v=Zn(f);if(h[p]===v[p])continue;if(m.prevModuleStateVer[p]=v[p],!y){Qn(c,"module["+f+"]");continue}if(!Wn[f].includes(p)){Qn(c,"unmoduledKey["+p+"]");continue}s=Jn(f),u=y,d=p}else s=C,u=_,d=c;if(u[d]!==s[d]){a=!0;break}}a&&g.push({fn:r,eId:n})}else g.push({fn:r,eId:n})}),g.forEach(r(a,!1,!1));var s=m.prevProps,u=m.props,d=[];i.forEach(function(e){var t=e.depKeys,r=e.fn,n=e.eId;if(t){var o=t.length;if(0===o)return;for(var a=!1,i=0;i<o;i++){var c=t[i];if(s[c]!==u[c]){a=!0;break}}a&&d.push({fn:r,eId:n})}else d.push({fn:r,eId:n})}),d.forEach(r(c,!1,!1))}}function to(e){e.__$$isBeforeFirstRender=!1;var t=e.ctx,r=t.module,n=t.ccClassKey,o=t.ccUniqueKey;t.onEvents.forEach(function(e){Qr(r,n,o,e.event,e.identity,e.handler)}),eo(e,!0)}function ro(e){eo(e),e.ctx.prevState=e.state}var no=Te.ccUkey_ref_,oo=Te.ccUKey_handlerKeys_,ao=Te.runtimeVar,io=Te.ccClassKey_ccClassContext_,co=Te.handlerKey_handler_,so=Te.renderKey_ccUkeys_;function uo(e,t,r){ao.isDebug&&console.log(y(t+" unset ref"),p("purple")),delete no[t];var n=so[r];r===t?delete so[r]:n.splice(n.indexOf(t),1);var o=io[e].ccKeys,a=o.indexOf(t);a<0||o.splice(a,1),function(e){void 0===Pr[e]?Pr[e]=0:Pr[e]-=1}(t);var i=oo[t];i&&i.forEach(function(e){delete co[e]})}var lo=F;function fo(r,n){function e(e){var t=r[e];"function"==typeof t&&t(n)}Object.getOwnPropertySymbols(r).forEach(e),lo(r).forEach(e)}function po(e){e.__$$isUnmounted=!0;var t=e.ctx,r=t.effectMeta,n=r.eid_effectPropsReturnCb_;fo(r.eid_effectReturnCb_,t),fo(n,t);var o=t.ccUniqueKey,a=t.ccClassKey,i=t.renderKey;rn(o),uo(a,o,i)}var yo=function(e){return"CC("+e+")"},vo=F,mo=E,ho=Te.runtimeVar,_o=p,Co=y,go=function(e){return Error("can not defined setup both in register options and class body --verbose:"+e)};function Ko(e,t){var r=void 0===e?{}:e,n=r.module,o=void 0===n?H:n,a=r.state,s=void 0===a?{}:a,i=r.watchedKeys,c=void 0===i?"*":i,u=r.storedKeys,d=void 0===u?[]:u,l=r.setup,f=void 0===l?null:l,p=r.persistStoredKeys,y=r.connect,v=void 0===y?{}:y,m=r.tag,h=r.lite,_=r.isPropsProxy,C=void 0!==_&&_,g=r.isSingle,K=void 0!==g&&g,E=r.renderKeyClasses,S=r.__checkStartUp,w=void 0===S||S,b=r.compareProps,O=void 0===b||b,N=r.__calledBy;void 0===t&&(t="");try{var I=xr(o,t,E,R,c,d,v,w,N),U=I._module,D=I._watchedKeys,A=I._ccClassKey,x=I._connect;return function(r){if(r.prototype&&r.prototype.$$attach)throw Error("register a cc class is prohibited!");var e=!1===C?r:T.Component,c=e.$$setup,t=function(i){function e(e,t){var r;try{r=i.call(this,e,t)||this;var n="function"==typeof s?s():s,o=Object.assign(r.state||{},n);r.$$attach=r.$$attach.bind(Fe(r));var a=Object.assign({},e,{isSingle:K,module:U,tag:m,state:o,type:R,watchedKeys:D,ccClassKey:A,connect:x,storedKeys:d,persistStoredKeys:p});if($n(Fe(r),a,h),f&&(r.$$setup||c))throw go("ccUniqueKey "+r.ctx.ccUniqueKey);r.$$setup&&(r.$$setup=r.$$setup.bind(Fe(r))),zn(Fe(r),f||r.$$setup||c,!1)}catch(e){Le(e)}return r}je(e,i);var t=e.prototype;return t.shouldComponentUpdate=function(e,t){var r=this.ctx.childRef;if(r&&r.shouldComponentUpdate)return r.shouldComponentUpdate(e,t);if(i.prototype.shouldComponentUpdate)return i.prototype.shouldComponentUpdate.call(this,e,t);var n=!!O&&mo(this.props,e);return this.state!==t||n},t.$$attach=function(e){var t=this.ctx;((t.childRef=e).ctx=t).reactSetState=e.setState.bind(e),t.reactForceUpdate=e.forceUpdate.bind(e),e.setState=t.setState,e.forceUpdate=t.forceUpdate,t.__$$ccSetState=ur(e,this),t.__$$ccForceUpdate=dr(e);var r=e.state,n=this.state;r||(r=e.state={});var o=Object.assign({},r,n);if(vo(t.state=e.state=o).forEach(function(e){return n[e]=o[e]}),e.$$setup&&(e.$$setup=e.$$setup.bind(e)),f&&(e.$$setup||c))throw go("ccUniqueKey "+t.ccUniqueKey);zn(e,f||e.$$setup||c,!1)},t.componentDidMount=function(){i.prototype.componentDidMount&&i.prototype.componentDidMount.call(this),to(this)},t.componentDidUpdate=function(){i.prototype.componentDidUpdate&&i.prototype.componentDidUpdate.call(this),ro(this)},t.componentWillUnmount=function(){i.prototype.componentWillUnmount&&i.prototype.componentWillUnmount.call(this),po(this)},t.render=function(){return this.ctx.prevProps=this.ctx.props,this.ctx.props=this.props,ho.isDebug&&console.log(Co("@@@ render "+yo(A)),_o()),!1===C?i.prototype.render.call(this):T.createElement(r,{ctx:this.ctx,$$attach:this.$$attach})},e}(e);return t.displayName=A===B?"CcDispatcher":yo(A),t}}catch(e){Le(e)}}function Eo(e){var t=function(e){function t(){return e.apply(this,arguments)||this}return je(t,e),t.prototype.render=function(){return this.props.children||T.createElement("span",{style:{display:"none"}})},t}(T.Component);if(Te.refs[B]){if(!Te.isHotReloadMode())throw Error("CcDispatcher can only be initialize one time");x("hot reload mode, CC_DISPATCHER existed")}var r=e||t;return Ko({isSingle:!0,__checkStartUp:!1,__calledBy:"cc"},B)(r)}var So={},wo=function(e,t,r){if(e.code!==ae.CC_MODULE_NAME_DUPLICATE||!Te.isHotReloadMode())throw e;var n=function(e){e||(e="");for(var t=e.split("\n"),r=t.length,o="",a=0;a<r;a++)if(t[a].includes(".checkModuleNameAndState")){!function(){var e=t[a+3].split(":"),r=e.length-1,n=[];e.forEach(function(e,t){t!==r&&n.push(e)}),o=n.join(":")}();break}return o}(e.stack),o=r+"|--link--|"+t,a=So[o];if(a){if(n!==a)throw e}else So[o]=n};function bo(t,e,r){void 0===r&&(r=!0);var n=t===V?{}:e;try{!function(e,t,r){if(st(e,r),!ie(t))throw Error("module["+e+"]'s state "+tt)}(t,n,r)}catch(e){wo(e,t,"state")}var o=Te.store,a=o.getState(),i=o.getStateVer();o.getPrevState()[t]=Object.assign({},a[t]=n),i[t]=F(n).reduce(function(e,t){return e[t]=1,e},{});var c=Object.keys(n);if(Te.moduleName_stateKeys_[t]=c,t===Q){var s=Te.globalStateKeys;c.forEach(function(e){s.includes(e)||s.push(e)})}}var Oo=l,No=j;function Io(e,t,r,n,o){return function(e,t,r,n,o){void 0===r&&(r="");var a,i=void 0===o?{}:o,c=i.ccClassKey,s=i.ccKey,u=i.throwError;if(void 0===e&&void 0===t)throw Error("api doc: cc.dispatch(action:Action|String, payload?:any, delay?:number, idt?:string), when action is String, second param means payload");try{if(c&&s){var d=Oo(c,s),l=Te.refs[d];if(!l)throw Error("no ref found for uniqueCcKey:"+d+"!");a=l.ctx.dispatch}else{var f,p="";"string"==typeof e&&e.includes("/")&&(p=e.split("/")[0]),f="*"!==p?Vt(p):Vt(),a=f.ctx.dispatch}if("string"==typeof e&&e.startsWith("*")){var y=e.split("/").pop(),v=Te.reducer._fnName_fullFnNames_[y];if(!v)return;var m=[];return v.forEach(function(e){m.push(a(e,t,r,n))}),Promise.all(m)}return a(e,t,r,n)}catch(e){if(u)throw e;No(e.message)}}(e,t,r,n,o)}function Uo(a,e){if(e){var t="module["+a+"] reducer";if(!ie(e))throw Error(t+" "+tt);st(a,!1,t+" is invalid");var r=Te.reducer,n=r._reducer,o=r._caller,i=r._fnName_fullFnNames_,c=r._module_fnNames_,s=Object.assign({},e);n[a]=s;var u=S(o,a),d=ce(c,a);s.setState||(s.setState=function(e){return e}),F(s).forEach(function(e){d.includes(e)||d.push(e);var n=a+"/"+e;u[e]=function(e,t,r){return Io(n,e,t,r)};var o=s[e];if("function"!=typeof o)throw Error("reducer key["+e+"] 's value is not a function");var t=o;o.__fnName&&(s[e]=t=function(e,t,r){return o(e,t,r)}),t.__fnName=e,t.__stateModule=a,t.__ctName=o.__ctName||o.constructor.name;var r=ce(i,e);r.includes(n)||r.push(n)})}}var Do=ie,Ao=S,xo=F,To={payload:null,renderKey:"",delay:-1};function Ro(r,e,t){if(void 0===t&&(t=!1),e){var n="module["+r+"] watch";if(!Do(e))throw Error(n+" "+tt);st(r,!1,n+" is invalid");var o=Te.watch.getRootWatchDep(),a=Te.watch.getRootWatchRaw(),i=Te.computed.getRootComputedValue();if(t){var c=a[r];c?Object.assign(c,e):a[r]=e}else a[r]=e;var s=(0,Te.store.getState)(r);fn(_,{module:r,stateKeys:xo(s),dep:o},e);var u=Te.getDispatcher(),d=Object.assign({},s),l=Ao(i,r);Ke(u&&u.ctx,r,u&&u.ctx.module,s,function(e,t){return he(t,_,"watch",o,r,s,e)},s,s,d,To,!0,"watch",_,l)}}var ko=S,Mo=ie,$o={payload:null,renderKey:"",delay:-1};function jo(r,e){if(e){var t="module["+r+"] computed";if(!Mo(e))throw Error(t+" "+tt);st(r,!1,t+" is invalid");var n=Te.computed,o=Te.store.getState(),a=n.getRootComputedValue(),i=n.getRootComputedDep();n.getRootComputedRaw()[r]=e;var c=o[r];fn(_,{module:r,stateKeys:F(c),dep:i},e);var s=Te.getDispatcher(),u=Object.assign({},c),d=ko(a,r);Ke(s&&s.ctx,r,s&&s.ctx.module,c,function(e,t){return he(t,_,"computed",i,r,c,e)},c,c,u,$o,!0,"computed",_,d)}}var Fo=ie,Lo=F;function Po(e,t){if(!Fo(e))throw Error(t+" "+tt)}function Ho(e){if(!Fo(e))throw Error("StartupOption.moduleSingleClass "+tt);!function(t,r){Object.keys(r).forEach(function(e){t[e]=r[e]})}(Te.moduleSingleClass,e)}function qo(e){if(0<e.length){var o=Te.plugins;o.length=0,Je.forEach(function(e){return Ze[e].length=0});var a={};e.forEach(function(e){if(o.push(e),!e.install)throw Error("a plugin must export install handler!");var t=e.install(et),r=Error("plugin.install must return result:{name:string, options?:object}");if(!t)throw r;var n=t.name;if(!n)throw r;if(a[n])throw Error("pluginName["+n+"] duplicate");a[n]=1})}}var Vo=function(e){var t=document.querySelector("#"+o);if(!t){(t=document.createElement("div")).id=o;var r=t.style;r.position="fixed",r.left=0,r.top=0,r.display="none",r.zIndex=-888666,document.body.appendChild(t)}n.render(T.createElement(e),t)},Bo=!1;function Go(e){void 0===e&&(e=!1),C(Te.refRetKey_fnUid_),C(Te.event_handlers_),C(Te.ccUKey_handlerKeys_),C(Te.renderKey_ccUkeys_);var t=Te.ccClassKey_ccClassContext_;if(Object.keys(t).forEach(function(e){C(t[e].ccKeys)}),C(Te.handlerKey_handler_),C(Te.ccUkey_ref_,[B]),C(Te.refs,[B]),e){var r=Te.computed,n=Te.watch,o=r._computedValue,a=n._watchDep;F(Te.store._state).forEach(function(e){e!==q&&(o[e]&&(Te.computed._computedDep[e]={retKey_fn_:{},stateKey_retKeys_:{},fnCount:0},jo(e,r._computedRaw[e])),a[e]&&(a[e]={retKey_fn_:{},stateKey_retKeys_:{},fnCount:0},Ro(e,n._watchRaw[e])))})}}function zo(){C(Te.globalStateKeys);var e=F(Te.moduleName_isConfigured_).concat([H,q,Q,r]);C(Te.reducer._reducer,e),C(Te.store._state,e,{}),C(Te.computed._computedDep,e),C(Te.computed._computedValue,e),C(Te.watch._watchDep,e),C(Te.middlewares),ve={module:{computed:{},watch:{}},ref:{computed:{},watch:{},effect:{}}},Go()}function Wo(e){void 0===e&&(e=!1),Te.info.latestStartupTime=Date.now(),function(e){Te.isStartup?Te.isHotReloadMode()?e():console.warn("clear failed because of not running under hot reload mode!"):Bo=!0}(function(){if(e)console.warn("attention: make sure [[clearContextIfHot]] been called before app rendered!"),Bo=!0,zo();else{if(Bo)return void(Bo=!1);!function(){if(!Te.refs[B]){var e=Eo();Vo(e)}}(),Go(Te.reComputed)}})}var Yo=x,Xo=K,Jo="";function Zo(e,t){var r=void 0===e?{}:e,n=r.store,o=void 0===n?{}:n,a=r.reducer,i=void 0===a?{}:a,c=r.init,s=void 0===c?null:c,u=r.computed,d=void 0===u?{}:u,l=r.watch,f=void 0===l?{}:l,p=r.moduleSingleClass,y=void 0===p?{}:p,v=r.middlewares,m=void 0===v?[]:v,h=void 0===t?{}:t,_=h.plugins,C=void 0===_?[]:_,g=h.isStrict,K=void 0!==g&&g,E=h.isDebug,S=void 0!==E&&E,w=h.errorHandler,b=void 0===w?null:w,O=h.isHot,N=h.bindCtxToMethod,I=void 0!==N&&N,U=h.computedCompare,D=void 0===U||U,A=h.watchCompare,x=void 0===A||A,T=h.watchImmediate,R=void 0!==T&&T,k=h.alwaysGiveState,M=void 0===k||k,$=h.reComputed,j=void 0===$||$;try{throw Error()}catch(e){!function(e){function t(e,t){for(var r=0;r<o;r++)if(n[r].includes(e)){a=n[r+t];break}}var r=Te.info,n=e.stack.split("\n"),o=n.length,a="";function i(){Wo(Te.isHot=!0)}t("startup",2),a||t("runConcent",0);var c=Date.now();if(Jo)if(Jo!==a){var s="invalid run api call!(it can only be called once, changing 'call run' line location in HMR will cause this error also, \n    try refresh browser to reload your app to avoid this tip)";if(c-r.latestStartupTime<1e3)throw Error(s);Y()?(i(),Jo=a):G(s)}else i();else Jo=a,r.firstStartupTime=c,r.latestStartupTime=c}(e)}void 0!==O&&(Te.isHot=O),Te.reComputed=j;try{console.log("%c window.name:"+window.name,"color:green;border:1px solid green"),Yo("cc version "+Te.info.version),Te.errorHandler=b;var F=Te.runtimeVar;if(F.alwaysGiveState=M,F.isStrict=K,F.isDebug=S,F.computedCompare=D,F.watchCompare=x,F.watchImmediate=R,F.bindCtxToMethod=I,Ho(y),function(e){Po(e,"state"),delete e[V],delete e[q],void 0===e[Q]&&(e[Q]={}),void 0===e[H]&&(e[H]={});for(var t=Lo(e),r=t.length,n=0;n<r;n++){var o=t[n];bo(o,e[o])}}(o),function(t){Po(t,"reducer"),void 0===t[H]&&(t[H]={}),void 0===t[Q]&&(t[Q]={}),Lo(t).forEach(function(e){return Uo(e,t[e])})}(i),function(t){Po(t,"computed"),Lo(t).forEach(function(e){return jo(e,t[e])})}(d),function(t){Po(t,"watch"),Object.keys(t).forEach(function(e){return Ro(e,t[e])})}(f),function(r){if(r){if(!Fo(r))throw Error("init "+tt);Lo(r).forEach(function(t){st(t,!1);var e=r[t];e&&Promise.resolve().then(e).then(function(e){yr(t)(e)})}),Te.init._init=r}}(s),function(e){if(0<e.length){var t=Te.middlewares;t.length=0,e.forEach(function(e){return t.push(e)})}}(m),!Te.refs[B]){var L=Eo();Vo(L)}var P=function(e){Xo("CC_CONTEXT",Te,e),Xo("ccc",Te,e),Xo("cccc",Te.computed._computedValue,e),Xo("sss",Te.store._state,e)};window.mcc?setTimeout(function(){P(window.mcc[z()])},1200):P(),Te.isStartup=!0,qo(C)}catch(e){if(!b)throw e;b(e)}}var Qo=ie;function ea(t,e){if(!Te.isStartup)throw Error("configure must be called after run!");if(!Qo(e))throw Error("param config "+tt);if(t===Q)throw Error("configuring global module is not allowed");var r=e.state,n=e.reducer,o=e.computed,a=e.watch,i=e.init,c=e.isClassSingle;if(n&&!Qo(n))throw Error("config.reducer "+tt);if(bo(t,r,!0),Uo(t,n),o&&jo(t,o),a&&Ro(t,a),Te.moduleSingleClass[t]=!0===c,i){if("function"!=typeof i)throw Error("init value must be a function!");Promise.resolve().then(i).then(function(e){yr(t)(e)})}Te.moduleName_isConfigured_[t]=!0,Qe(14,t)}function ta(n,o){var a={};return F(n).forEach(function(e){function t(){return r.apply(void 0,arguments)}var r=n[e];t.__fnName=e,t.__stateModule=o,a[e]=t}),a}function ra(e){throw Error("[[run]]: param error, "+e+" "+tt)}var na=ie,oa=F,aa=u;function ia(e,t){var r=P(e);return delete r.__checkStartUp,delete r.__calledBy,Ko(r,t)}var ca=E,sa=P,ua=T.createElement("span",{style:{display:"none"}}),da=function(I){function e(e,t){var r;r=I.call(this,e,t)||this;var n=sa(e.register),o=n.module,a=n.renderKeyClasses,i=n.tag,c=n.lite,s=n.compareProps,u=void 0===s||s,d=n.setup,l=n.bindCtxToMethod,f=n.watchedKeys,p=void 0===f?"*":f,y=n.connect,v=void 0===y?{}:y,m=n.isSingle,h=n.storedKeys,_=void 0===h?[]:h,C=n.state||{};"function"==typeof C&&(C=C());var g=e.ccClassKey,K=e.ccKey,E=e.ccOption,S=void 0===E?{}:E,w=p,b=g,O=v;if(!0!==e.__$$regDumb){var N=xr(o,g,a,U,p,_,v,!0);w=N._watchedKeys,b=N._ccClassKey,O=N._connect}return $n(Fe(r),{isSingle:m,ccKey:K,connect:O,state:C,module:o,storedKeys:_,watchedKeys:w,tag:i,ccClassKey:b,ccOption:S,type:U},c),r.__$$compareProps=u,zn(Fe(r),d,l),r}je(e,I);var t=e.prototype;return t.componentDidMount=function(){to(this)},t.shouldComponentUpdate=function(e,t){var r=!!this.__$$compareProps&&ca(_n(e),_n(this.props));return this.state!==t||r},t.componentDidUpdate=function(){ro(this)},t.componentWillUnmount=function(){I.prototype.componentWillUnmount&&I.prototype.componentWillUnmount.call(this),po(this)},t.render=function(){var e=this.props;this.ctx.prevProps=this.ctx.props,this.ctx.props=_n(e);var t=e.render,r=t||e.children;if("function"==typeof r){var n=e.register,o=void 0===n?{}:n,a=this.ctx;return!0!==e.__$$regDumb&&o.mapProps?(a.mapped=o.mapProps(a)||{},r(a.mapped)||ua):r(a)||ua}if(T.isValidElement(r))throw Error("CcFragment's children can not b a react dom ");return r},e}(T.Component);function la(e,t){var r=P(e),n=r.watchedKeys,o=r.render,a=r.connect,i=xr(r.module,t,r.renderKeyClasses,U,void 0===n?"*":n,r.storedKeys,void 0===a?{}:a,!0),c=i._watchedKeys,s=i._ccClassKey,u=i._connect;function d(t){return function(e){return r.props=e,function(t,e){var r=e.mapProps,n=e.props,o=void 0===n?{}:n,a={__$$regDumb:!0,props:o,ccOption:o.ccOption,ccClassKey:e.ccClassKey,render:function(e){return r?(e.mapped=r(e),T.createElement(t,e.mapped)):T.createElement(t,e)},ccKey:o.ccKey,register:e};return T.createElement(da,a)}(t,r)}}return r.module=i._module,r.watchedKeys=c,r.ccClassKey=s,r.connect=u,o?d(o):function(e){return d(e)}}var fa=Te.ccUkey_ref_,pa=1,ya={};var va=function(n,o){return function(e,t){n.state=Object.assign({},n.state,e);var r=Object.assign({},n);o(r),t&&t(r.state)}},ma=function(r,n){return function(e){var t=Object.assign({},r);n(t),e&&e(t.state)}};function ha(e,t,r){this.setState=va(e,t),this.forceUpdate=ma(e,t),this.state=e.state,this.isFirstRendered=!0,this.props=r}function _a(e,l){var f=P(e),t=f.state,r=void 0===t?{}:t,n=f.props,p=void 0===n?{}:n,o=f.mapProps,a=f.layoutEffect,i=void 0!==a&&a,c=f.extra,s=void 0===c?{}:c,y=r;"function"==typeof r&&(y=r(),f.state=y);var u=T.useState;if(!u)throw Error("make sure your react version is LTE 16.8");function d(){var e=f.watchedKeys,t=f.storedKeys,r=f.connect,n=f.setup,o=f.lite;pa+=1;var a=xr(f.module,l,f.renderKeyClasses,O,void 0===e?"*":e,void 0===t?[]:t,void 0===r?{}:r,!0),i=a._module,c=a._watchedKeys,s=a._ccClassKey,u=a._connect;v=new ha(_,C,p);var d=Object.assign({},f,{module:i,watchedKeys:c,state:y,type:O,ccClassKey:s,connect:u,ccOption:p.ccOption});$n(v,d,o),zn(v,n,K),ya[g]=v.ctx.ccUniqueKey}var v,m=pa,h=u({cursor:m,state:r}),_=h[0],C=h[1],g=_.cursor,K=f.bindCtxToMethod;if(g===m)d();else if(!(v=fa[ya[g]])&&Date.now()-Te.info.latestStartupTime<1e3)d();else{var E=v.ctx;E.reactSetState=va(_,C),E.reactForceUpdate=ma(_,C)}var S=v.ctx;S.prevProps=S.props,S.props=p,S.extra=s,v.props=p;var w=i?T.useLayoutEffect:T.useEffect;if(w(function(){v.isFirstRendered||ro(v)}),w(function(){if(!1===v.isFirstRendered){var e=v.ctx;qr(v,e.isSingle,e.ccClassKey,e.ccKey,e.ccUniqueKey)}else v.isFirstRendered=!1,to(v);return function(){po(v)}},[]),o){var b=o(S);if(!ie(b))throw Error("mapProps must return an plain json object");S.mapped=b}return S}function Ca(){throw Error("api doc: cc.setState(module:string, state:object, renderKey:string, delayMs?:number, skipMiddleware?:boolean, throwError?:boolean)")}function ga(e){return Te.store.getState(e)}var Ka=Te.computed._computedValue;var Ea=Te.ccUkey_ref_,Sa=Te.ccClassKey_ccClassContext_;function wa(){var r=[],n=Te.ccUkey_ref_;return F(n).forEach(function(e){var t=n[e];t&&!t.__$$isUnmounted&&r.push(t)}),r}function ba(e,t,r){var n=void 0===r?{}:r,o=n.state,a=n.reducer,i=n.computed,c=n.watch,s=n.init;if(!Te.isStartup)throw Error("cc is not startup yet");ct(e),st(t,!1);var u=function(e){return JSON.parse(JSON.stringify(e))}(Te.store.getState(t));o&&Object.assign(u,o);var d=ta(Te.reducer._reducer[t]||{},e);a&&Object.assign(d,ta(a,e));var l=Te.computed._computedRaw[t]||{};i&&Object.assign(l,i);var f=Te.watch._watchRaw[t]||{};c&&Object.assign(f,c);var p=Te.init._init[t];s&&(p=s);var y={state:u,reducer:d,computed:l,watch:f};p&&(y.init=p),ea(e,y)}function Oa(s,e){void 0===s&&(s={}),void 0===e&&(e={}),na(s)||ra("store"),na(e)||ra("option");var u={store:{},reducer:{},watch:{},computed:{},init:{},moduleSingleClass:{}};oa(s).forEach(function(e){var t=s[e],r=t.state,n=t.reducer,o=t.watch,a=t.computed,i=t.init,c=t.isClassSingle;r&&(u.store[e]=r),n&&(u.reducer[e]=n),o&&(u.watch[e]=o),a&&(u.computed[e]=a),i&&(u.init[e]=i),u.moduleSingleClass[e]=!0===c}),aa(u.init)&&(u.init=null),Zo(u,e)}function Na(e,t){return ia({connect:e},t)}function Ia(e,t){return la({connect:e},t)}function Ua(e,o){var a=P(e);function t(r){var e=a.memo,t=void 0===e||e;function n(){return function(e){a.props=e;var t=_a(a,o);return T.createElement(r,a.mapProps?t.mapped:t)}}return delete a.memo,t&&T.memo?T.memo(n()):n()}"function"==typeof a.state&&(a.state=a.state());var r=a.render;return r?t(r):function(e){return t(e)}}function Da(e,t,r,n,o){void 0===o&&(o=!1);try{Vt().ctx.setGlobalState(e,t,r,n)}catch(e){if(o)throw e;j(e.message)}}function Aa(e,t,r,n,o,a){void 0===n&&(n=-1),void 0===a&&(a=!1),void 0===e&&void 0===t&&Ca(),"string"!=typeof e&&Ca(),Bt(e,t,r,n,o)}function xa(e,t,r,n){Vt().ctx.set(e,t,r,n)}function Ta(e,t){if(!e.includes("/"))throw Error("keyPath must start with module");var r=e.split("/"),n=ga(r[0]);return En(e,t,!1,n,!1).state}function Ra(e){return Va[e].connectedState||{}}function ka(e){return e?Ka[e]:Ka}function Ma(e){if(void 0===e)throw Error("api doc: cc.emit(event:string|{name:string, identity?:string, ctx?:boolean}, ...args)");try{for(var t,r=Vt(),n=arguments.length,o=Array(1<n?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];(t=r.ctx).emit.apply(t,[e].concat(o))}catch(e){j(e)}}function $a(e,t){try{Vt().ctx.off(e,t)}catch(e){if(t.throwError)throw e;j(e.message)}}function ja(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];(function(e){var r=[],t=Sa[e];return t&&t.ccKeys.forEach(function(e){var t=Ea[e];t&&r.push(t)}),r})(e).forEach(function(e){var t;e.__$$isUnmounted||e.ctx.execute&&(t=e.ctx).execute.apply(t,r)})}function Fa(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];wa().forEach(function(e){var t;e.ctx.execute&&(t=e.ctx).execute.apply(t,r)})}function La(e,t,r){return{fn:e,depKeys:t,compare:r}}function Pa(e,t){return void 0===t&&(t=!0),{fn:function(){return e},depKeys:[],compare:t}}function Ha(e,t,r,n){return{fn:e,depKeys:t,compare:r,immediate:n}}function qa(e,t,r){return{fn:e,depKeys:t,compare:r,immediate:!0}}var Va=Te.ccClassKey_ccClassContext_,Ba=Zo,Ga=ia,za=la,Wa=ea,Ya=ga,Xa=Te.store.getGlobalState,Ja=Io,Za=Te,Qa=Eo,ei=wa,ti=Te.reducer._caller,ri=Wo,ni=da,oi=c,ai=Te.store.appendState,ii=_a,ci={cloneModule:ba,emit:Ma,off:$a,connect:Na,connectDumb:Ia,register:Ga,registerDumb:za,registerHookComp:Ua,configure:Wa,dispatch:Ja,startup:Ba,run:Oa,setGlobalState:Da,setState:Aa,set:xa,setValue:Ta,getGlobalState:Xa,getState:Ya,getComputed:ka,getConnectedState:Ra,ccContext:Za,createDispatcher:Qa,execute:ja,executeAll:Fa,getRefs:ei,reducer:ti,clearContextIfHot:ri,CcFragment:ni,cst:oi,appendState:ai,useConcent:ii,bindCcToMcc:si,defComputed:La,defComputedVal:Pa,defWatch:Ha,defWatchImmediate:qa};function si(e){if(!di)throw Error("current env is not multi concent ins mode");if(di[e])throw Error("ccNamespace["+e+"] already existed in window.mcc");!function(e){w=e}(e),K(e,ci,di)}function ui(){var e=w?window.mcc[w]:window.cc;if(e&&e.ccContext&&e.ccContext.info){var t=e.ccContext.info.version,r=Za.info.version;if(t!==r)throw Error("a existed version concent "+t+" is different with current about to import concent "+r+", \n        it may caused by some of your concent-eco-module with older version concent, please reinstall them (concent-*** module)")}}var di=window.mcc;di?setTimeout(function(){if(!z())throw Error("detect window.mcc, but user forget call bindCcToMcc in bundle entry");ui()},1e3):(ui(),K("cc",ci)),e.startup=Ba,e.cloneModule=ba,e.run=Oa,e.connect=Na,e.connectDumb=Ia,e.register=Ga,e.registerDumb=za,e.registerHookComp=Ua,e.configure=Wa,e.setGlobalState=Da,e.setState=Aa,e.set=xa,e.setValue=Ta,e.getState=Ya,e.getGlobalState=Xa,e.getConnectedState=Ra,e.getComputed=ka,e.emit=Ma,e.off=$a,e.dispatch=Ja,e.ccContext=Za,e.createDispatcher=Qa,e.execute=ja,e.executeAll=Fa,e.getRefs=ei,e.reducer=ti,e.clearContextIfHot=ri,e.CcFragment=ni,e.cst=oi,e.appendState=ai,e.useConcent=ii,e.defComputed=La,e.defComputedVal=Pa,e.defWatch=Ha,e.defWatchImmediate=qa,e.bindCcToMcc=si,e.default=ci,Object.defineProperty(e,"__esModule",{value:!0})});
