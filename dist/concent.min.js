!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["exports","react","react-dom"],t):t(e.concent={},e.React,e.ReactDOM)}(this,function(e,D,r){"use strict";D=D&&D.hasOwnProperty("default")?D.default:D,r=r&&r.hasOwnProperty("default")?r.default:r;var t,n,o,W={},pe="$$global",V="$$default",q="$$cc",H="$$concent_void_module_624313307",a="$$CONCENT_ROUTER",A="$$CcClass",x="$$CcFrag",ye="$$CcHook",m="$$Cc",B="$$Dispatcher",c="__cc_dispatcher_container_designed_by_zzk_qq_is_624313307__",_e=Symbol("__for_sync_param_ccsync__"),U=10,O=11,N=13,M="dispatch",ve="setState",me="setModuleState",he="forceUpdate",w="invoke",K="sync",h="module",Ce="ref",F="watch",Ke={CC_MODULE_NAME_DUPLICATE:1002,CC_MODULE_NOT_FOUND:1012,CC_DISPATCH_STRING_INVALID:1013,CC_DISPATCH_PARAM_INVALID:1014,CC_MODULE_NOT_CONNECTED:1015,CC_CLASS_KEY_DUPLICATE:1100,CC_CLASS_INSTANCE_KEY_DUPLICATE:1200,CC_CLASS_INSTANCE_MORE_THAN_ONE:1205,CC_STORED_KEYS_NEED_CCKEY:1207,CC_REDUCER_NOT_A_FUNCTION:1503},i=((t={})[Ke.CC_MODULE_NAME_DUPLICATE]="module name duplicate!",t[Ke.CC_MODULE_NOT_FOUND]="module not found!",t[Ke.CC_DISPATCH_STRING_INVALID]="when type param is string, it must be one of these format: (fnName)„ÄÅ(moduleName)/(fnName)",t[Ke.CC_DISPATCH_PARAM_INVALID]="dispatch param type is invalid, it must be string or object",t[Ke.CC_MODULE_NOT_CONNECTED]="module not been connected by ref",t[Ke.CC_CLASS_INSTANCE_KEY_DUPLICATE]="props.ccKey duplicate",t[Ke.CC_CLASS_INSTANCE_MORE_THAN_ONE]="ccClass is declared as singleton, trying new another one instance is not allowed! ",t[Ke.CC_STORED_KEYS_NEED_CCKEY]="you must explicitly specify a ccKey for ccInstance when set storedKeys!",t[Ke.CC_CLASS_KEY_DUPLICATE]="ccClassKey duplicate!",t[Ke.CC_REDUCER_NOT_A_FUNCTION]="reducer must be a function!",t),u=Object.freeze({MODULE_GLOBAL:pe,MODULE_DEFAULT:V,MODULE_CC:q,MODULE_VOID:H,MODULE_CC_ROUTER:a,CC_CLASS:A,CC_FRAGMENT:x,CC_HOOK:ye,CC_PREFIX:m,CC_DISPATCHER:B,CC_DISPATCHER_BOX:c,CCSYNC_KEY:_e,SIG_FN_START:U,SIG_FN_END:O,SIG_FN_QUIT:12,SIG_FN_ERR:N,SIG_MODULE_CONFIGURED:14,SIG_STATE_CHANGED:15,RENDER_NO_OP:1,RENDER_BY_KEY:2,RENDER_BY_STATE:3,FOR_ONE_INS_FIRSTLY:1,FOR_ALL_INS_OF_A_MOD:2,EFFECT_AVAILABLE:1,EFFECT_STOPPED:0,DISPATCH:M,SET_STATE:ve,SET_MODULE_STATE:me,FORCE_UPDATE:he,INVOKE:w,SYNC:K,CATE_MODULE:h,CATE_REF:Ce,FN_CU:"computed",FN_WATCH:F,ERR:Ke,ERR_MESSAGE:i}),s=((n={})[pe]={},n[V]={},n[q]={},n),d=((o={})[pe]={},o[V]={},o[q]={},o),f={},l={},L={_computedValueOri:d,_computedValue:s,_computedRaw:l,_computedDep:f,getRootComputedValue:function(){return s},getRootComputedDep:function(){return f},getRootComputedRaw:function(){return l}},p={},y={},C={_watchRaw:y,_watchDep:p,getRootWatchDep:function(){return p},getRootWatchRaw:function(){return y}},_={alwaysGiveState:!0,isStrict:!1,isDebug:!1,computedCompare:!0,watchCompare:!0,watchImmediate:!1,bindCtxToMethod:!1},v=Symbol("cuk"),g="1",ge="2",Se="is not a plain json object!",S="should be an string array or *!",E=console.error;function $(e){return null!=e&&0<te(e).length}function b(e){return!$(e)}function Ee(e,t){if(void 0===t&&(t=!1),!e)return!1;var n="object"==typeof e;if(n){var r=Array.isArray(e);return t?r:n&&!r}return!1}function I(e,t){var n="";n="string"==typeof e?e:i[e]||"",t&&(n+=t),n||(n="undefined message for code:"+e);var r=Error(n);return r.code=e,r}function j(e,t,n,r,o,a,c){var i;return(i={})[v]=1,i.needCompute=n,i.fn=r,i.newState=o,i.oldState=a,i.fnCtx=c,i.isLazy=e,i.result=t,i}function R(e,t){return e+"$"+t}function T(e){return e?" --verbose-info: "+e:""}function k(e){return void 0===e&&(e="green"),"color:"+e+";border:1px solid "+e}function P(e){return"%c"+e}var z=function(e){return"------------ CC "+e+" ------------"};function G(e){E(z("WARNING")),e instanceof Error?(E(e.message),E(e.stack)):E(e)}function Y(e){console.log(z("TIP")),console.log("%c"+e,"color:green;border:1px solid green;")}function X(e){if(E(z("WARNING")),E(e),_.isStrict)throw e}function J(e,t,n){void 0===n&&(n={});var r=e[t];return r||(r=e[t]=n),r}function Q(e,t){return J(e,t,[])}function Z(e){void 0===e&&(e=52);var t=Math.random();return parseInt(t*e)}function ee(t,n,r){if(void 0===n&&(n=[]),Array.isArray(t)){var o=[];n.forEach(function(e){t.includes(e)&&o.push(e)}),t.length=0,o.forEach(function(e){return t.push(e)})}else Object.keys(t).forEach(function(e){n.includes(e)||(r?t[e]=r:delete t[e])})}function te(e){return Object.keys(e)}function ne(e){var t=null;return e&&(e.currentTarget&&e.type?t=e:e.nativeEvent&&e.target&&(e.currentTarget=e.target,t=e)),t}function re(t,n,e){function r(e){e?e[t]=n:window[t]=n}window?r(e):setTimeout(function(){r(e)},3e3)}function oe(e,t){for(var n in e)if(!(n in t))return!0;for(var r in t)if(e[r]!==t[r])return!0;return!1}function $e(e,t){var n=[];return e.forEach(function(e){t.includes(e)||n.push(e)}),n}function ae(e){return void 0===e&&(e={}),"string"==typeof e?{module:e}:Object.assign({module:V},e)}var ce="";function ie(){return ce}function ue(){var t=null;return{commit:function(e){t||(t={}),Object.assign(t,e)},getFnCommittedState:function(){return t}}}function se(){var e=!1;return!window||("previewFrame"===window.name||window.__SANDBOX_DATA__||window.BrowserFS)&&(e=!0),e}function de(e){return{payload:null,renderKey:"",delay:-1,module:e,fnName:""}}function fe(e){void 0===e&&(e={});var t="function"==typeof e?e():e;if(!Ee(t))throw Error("state "+Se);return t}function le(e,t){var n=t.split(".");return function e(t,n,r,o){var a=n[o];return r===o?t[a]:e(t[a],n,r,++o)}(e,n,n.length-1,0)}function we(e){return"-"===e?"*":e}var be={module:{computed:{},watch:{}},ref:{computed:{},watch:{},effect:{}}};function xe(e,t,n){var r=t[e];return{retKey:e,fn:r.fn,depKeys:r.depKeys,isLazy:n,sort:r.sort}}var Ue=function(e,t){return e.sort-t.sort};function Oe(e,t,n,r,o,a,c,i){var u=r[o],s=[];if(!u)return{pickedFns:s,setted:[],changed:[]};var d=u.retKey_fn_,f=u.retKey_lazy_,l=u.stateKey_retKeys_,p=u.fnCount;if(e){var y=te(d),_=te(c),v=_;return"computed"===n?{pickedFns:y.map(function(e){return xe(e,d,f[e])}).sort(Ue),setted:_,changed:v}:(y.forEach(function(e){var t=d[e];t.immediate&&s.push({retKey:e,fn:t.fn,depKeys:t.depKeys,sort:t.sort})}),s.sort(Ue),{pickedFns:s,setted:_,changed:v})}var m=function(n,r){var o=[],a=[];return te(r).forEach(function(e){var t=r[e];void 0!==t&&(a.push(e),t!==n[e]&&o.push(e))}),{changed:o,setted:a}}(a,c),h=m.setted,C=m.changed;if(0===h.length)return{pickedFns:s,setted:[],changed:[]};var K=h.join(",")+"|"+C.join(",")+"|"+o,g=be[t][n],S=i?J(g,i):g,E=S[K];return E?{pickedFns:E.map(function(e){return xe(e,d,f[e])}),setted:h,changed:C}:(function(s,o,d,f,a,l,c){if(0===o.length)return;var e=a["*"];if(e){var i=0<d.length;e.forEach(function(e){var t=f[e],n=t.fn,r=t.compare,o=t.depKeys,a=t.sort,c={retKey:e,fn:n,depKeys:o,isLazy:l[e],sort:a};r?i&&s.push(c):s.push(c)})}s.length<c&&function(){var u={},e=o.length,t=function(e){var i=o[e],t=a[i];return t?(t.forEach(function(e){if(!u[e]){var t=f[e],n=t.fn,r=t.compare,o=t.depKeys,a=t.sort,c=!0;r&&!d.includes(i)&&(c=!1),c&&(u[e]=!0,s.push({retKey:e,fn:n,depKeys:o,isLazy:l[e],sort:a}))}}),s.length===c?"break":void 0):"continue"};e:for(var n=0;n<e;n++){var r=t(n);switch(r){case"continue":continue;case"break":break e}}}();s.sort(Ue)}(s,h,C,d,l,f,p),S[K]=s.map(function(e){return e.retKey}),{pickedFns:s,setted:h,changed:C})}function Ne(e,t,n){var r=t[n];return void 0!==r&&(e[n]=r,!0)}function Ie(t,n,e,r){void 0===n&&(n=[]),void 0===e&&(e=!1),void 0===r&&(r=!1);var o={},a=[];if(!Ee(t))return{partialState:e?null:o,isStateEmpty:!0,ignoredStateKeys:a};var c=!0,i=te(t);return i.length<n.length?i.forEach(function(e){n.includes(e)?Ne(o,t,e)&&(c=!1):r&&a.push(e)}):(n.forEach(function(e){Ne(o,t,e)&&(c=!1)}),r&&(a=$e(i,n))),c&&e&&(o=null),{partialState:o,isStateEmpty:c,ignoredStateKeys:a}}function De(e,n){return new Proxy(e,{get:function(e,t){return n.includes(t)||n.push(t),e[t]},set:function(e,t){return e[t]=e[t],!0}})}function Ae(e,t,n,r){if(_.alwaysGiveState)return[n,r];var o=t[0];return 1===t.length&&"*"!==o&&o===e?[n[o],r[o]]:[n,r]}function Re(e,t,n,r,o){if(0!==o.length){var a,c=J(a=t===Ce?J(e.computedDep,e.module):J(L._computedDep,n),"stateKey_retKeys_"),i=J(a,"retKey_stateKeys_");o.forEach(function(e){var t=Q(c,e);Array.isArray(t)&&!t.includes(r)&&t.push(r)}),i[r]=o}}function Me(e,t,n,r,o,a){var c=Ae(e,t,r,o);return n(c[0],c[1],a)}for(var Te,ke=function(S,E,$,w,b,e,x,U,O,N,I,D,A){for(var R=0,M=e,T=!0,k=!1,t=function(){var v=1===++R&&N,e=b(M,v),t=e.pickedFns,m=e.setted,h=e.changed;if(!t.length)return"break";var n=ue(),C=n.commit,r=n.getFnCommittedState,o=ue(),K=o.commit,a=o.getFnCommittedState;if(t.forEach(function(e){var t=e.retKey,n=e.fn,r=e.depKeys,o=e.isLazy,a={retKey:t,callInfo:O,isFirstCall:N,commit:C,commitCu:K,setted:m,changed:h,cuVal:A,stateModule:E,refModule:$,oldState:w,committedState:M,refCtx:S},c=v&&"-"===r;if("computed"===I)if(o&&(delete a.commit,delete a.commitCu),c){var i=[],u=De(x,i),s=Me(t,r,n,u,u,a);A[t]=j(!1,s),Re(S,D,E,t,i)}else if(o){var d=Ae(t,r,x,w);A[t]=j(o,null,!0,n,d[0],d[1],a)}else{var f=Me(t,r,n,x,w,a);A[t]=j(!1,f)}else{var l,p=x,y=[],_=w;c&&(_=p=De(x,y)),l=Me(t,r,n,p,_,a),Re(S,D,E,t,y),!1===l&&(T=!1)}}),M=r()){var c=function(e,t){void 0===t&&(t=!1),M=e,t&&0===te(e).length?M=null:(Object.assign(x,M),Object.assign(U,M),k=!0)},i=Ie(M,"ref"===D?S.privStateKeys:W[E],!0,!0),u=i.partialState,s=i.ignoredStateKeys;if(u)if(I===F){var d=function(e,t,n){return(t===Ce?e.computedDep[e.module]||{}:L._computedDep[n]||{}).stateKey_retKeys_}(S,D,E);if(d){var f=[],l={};te(u).forEach(function(e){d[e]?f.push(e):l[e]=u[e]}),0<f.length&&G("these state keys["+f.join(",")+"] will been ignored, cause they are also appeared in computed depKeys,\n              cc suggest you move the logic to computed file."),c(l,!0)}else c(u)}else c(u);if(s.length){var p="they are not "+(D===Ce?"private":"module")+", fn is "+D+" "+I;G("these state keys["+s.join(",")+"] are invalid, "+p)}}var y=a();if(y){var _;if("ref"===D)_="computed"===I?S.computedRetKeyFns:S.watchRetKeyFns;else{var g=L.getRootComputedDep()[E]||{};_=g.retKey_fn_||null}_&&te(y).forEach(function(e){_[e]?A[e]=j(!1,y[e]):G("fnCtx.commitCu commit an invalid retKey["+e+"] for moduleComputed")})}10<R&&(G("fnCtx.commit may goes endless loop, please check your code"),M=null)};M;){if("break"===t())break}return{shouldCurrentRefUpdate:T,hasDelta:k}},We=L._computedValue,Fe=te,Le={},je=function(n,e,t){var r=void 0===t?{}:t,o=r.refCtx,a=void 0===o?null:o,c=r.callInfo,i=void 0===c?{}:c,u=r.noSave,s=void 0!==u&&u,d=ze(n),f=We[n],l=L.getRootComputedDep(),p=C.getRootWatchDep(),y=a?a.module:null,_=Object.assign({},d,e),v=Object.assign({},e),m=v;return ke(a,n,y,d,function(e,t){return Oe(t,h,"computed",l,n,d,e)},m,_,v,i,!1,"computed",h,f),ke(a,n,y,d,function(e,t){return Oe(t,h,"watch",p,n,d,e)},m,_,v,i,!1,"watch",h,f),s||Pe(n,v),v},Pe=function(t,e,n){void 0===n&&(n=!1);var r=e;if(n){var o=Ie(e,W[t],!0);r=o.partialState}if(r){var a=ze(t),c=Ve(t);Fe(r).forEach(function(e){c[e]=a[e],qe(t,e),a[e]=r[e]})}return r},ze=function(e){return Be[e]},Ve=function(e){return Ge[e]},qe=function(e,t){Ye[e][t]++},He=function(){var e;return(e={})[q]={},e[H]={},e[pe]={},e[V]={},e},Be=He(),Ge=He(),Ye={},Xe={getDispatcher:function(){return Le[B]},isHotReloadMode:function(){return!!Xe.isHot||window&&(window.webpackHotUpdate||se())},runtimeVar:_,isHot:!1,reComputed:!0,isStartup:!1,moduleSingleClass:{},moduleName_stateFn_:{},moduleName_ccClassKeys_:{},moduleName_stateKeys_:W,moduleName_isConfigured_:{},ccClassKey_ccClassContext_:{},globalStateKeys:[],store:{appendState:function(e,t){var n=Q(W,e);te(t).forEach(function(e){n.includes(e)||n.push(e)}),Xe.store.setState(e,t)},_state:Be,_prevState:Ge,_stateVer:Ye,getState:function(e){return e?ze(e):Be},getPrevState:function(e){return e?Ve(e):Ge},getStateVer:function(e){return e?Ye[e]:Ye},setState:function(e,t,n){return je(e,t,n)},setGlobalState:function(e){return je(pe,e)},saveSharedState:Pe,getGlobalState:function(){return Be[pe]}},reducer:{_reducer:(Te={},Te[pe]={},Te[q]={},Te),_caller:{},_fnName_fullFnNames_:{},_module_fnNames_:{}},computed:L,watch:C,refStore:{_state:{},setState:function(e,t){var n=Xe.refStore._state,r=Object.assign({},n[e],t);n[e]=r}},init:{_init:{}},ccUKey_ref_:Le,event_handlers_:{},ccUKey_handlerKeys_:{},handlerKey_handler_:{},waKey_uKeyMap_:{},waKey_effectUKeyMap_:{},refs:Le,info:{packageLoadTime:Date.now(),firstStartupTime:"",latestStartupTime:"",version:"2.3.8",author:"fantasticsoul",emails:["624313307@qq.com","zhongzhengkai@gmail.com"],tag:"yuna"},fragmentNameCount:0,featureStr_classKey_:{},userClassKey_featureStr_:{},errorHandler:null,middlewares:[],plugins:[],pluginNameMap:{}},Je=localStorage.length,Qe=Xe.refStore._state,Ze=0;Ze<Je;Ze++){var et=localStorage.key(Ze);if(et.startsWith("CCSS_"))try{Qe[et.substr(5)]=JSON.parse(localStorage.getItem(et))}catch(e){console.error(e)}}var tt=[],nt=function(e){return e.toLowerCase()===q},rt=function(e){return/^[\$\#\&a-zA-Z0-9_-]+$/.test(e)},ot=T,at=I;function ct(e){if(!rt(e))throw Error("module["+e+"] writing is invalid!");if(nt(e))throw Error("'$$cc' is a built-in module name for concent")}function it(e,t,n){void 0===t&&(t=!0),void 0===n&&(n="");var r=n||"module["+e+"]",o=Xe.store._state;if(ct(e),e!==pe)if(t){if($(o[e]))throw at(Ke.CC_MODULE_NAME_DUPLICATE,ot(r))}else if(!o[e])throw at(Ke.CC_MODULE_NOT_FOUND,ot(r))}function ut(t,e){var n=Array.isArray(e);if(!n&&"*"!==e)throw Error("storedKeys type err, "+S);n&&e.forEach(function(e){if(t.includes(e))throw Error("the item["+e+"] of storedKeys is not a module state key!")})}var st={},dt=function(e,t,n){if(e.code!==Ke.CC_MODULE_NAME_DUPLICATE||!Xe.isHotReloadMode())throw e;var r=function(e){e||(e="");for(var t=e.split("\n"),n=t.length,o="",a=0;a<n;a++)if(t[a].includes(".checkModuleNameAndState")){!function(){var e=t[a+3].split(":"),n=e.length-1,r=[];e.forEach(function(e,t){t!==n&&r.push(e)}),o=r.join(":")}();break}return o}(e.stack),o=n+"|--link--|"+t,a=st[o];if(a){if(r!==a)throw e}else st[o]=r},ft={};function lt(e){ft[e]={}}var pt=Xe.waKey_uKeyMap_;function yt(n,e,t){void 0===t&&(t=!0),lt(n);var r=n===H?{}:e;try{!function(e,t,n){if(it(e,n),!Ee(t))throw Error("module["+e+"]'s state "+Se)}(n,r,t)}catch(e){dt(e,n,"state")}var o=Xe.store,a=o.getState(),c=o.getStateVer();o.getPrevState()[n]=Object.assign({},a[n]=r),c[n]=te(r).reduce(function(e,t){return pt[n+"/"+t]={},e[t]=1,e},{});var i=Object.keys(r);if(Xe.moduleName_stateKeys_[n]=i,n===pe){var u=Xe.globalStateKeys;i.forEach(function(e){u.includes(e)||u.push(e)})}}function _t(e,t){void 0===t&&(t=!1);var n=Xe.ccUKey_ref_,r=Xe.moduleName_ccClassKeys_,o=Xe.ccClassKey_ccClassContext_,a=[];if(e){if(!Xe.store._state[e])throw Error("module["+e+"] is not declared in store");var c=r[e];if(c&&0!==c.length){var i=c[0],u=o[i];if(!u)throw Error("no ccClassContext found for ccClassKey "+i+"!");a=u.ccKeys}if(e===V&&(a=a.filter(function(e){return!e.startsWith(x)})),0===a.length){if(!1!==t){throw Error("[[pickOneRef]]: no ref found for module["+e+"]!,if this message doesn't matter, you can ignore it")}a=[B]}}else a=[B];var s=n[a[0]];if(!s)throw Error("cc found no ref!");return s}var vt=R,mt=G,ht=function(){return Promise.resolve()};function Ct(e,t,n,r,o){void 0===n&&(n="");var a=void 0===o?{}:o,c=a.ccClassKey,i=a.ccKey,u=a.throwError,s=a.refModule,d=void 0===s?"":s;if(void 0===e&&void 0===t)throw Error("params type error");var f,l="",p="";try{if(c&&i){var y=vt(c,i),_=Xe.refs[y];if(!_)return mt("no ref found for ccUniqueKey:"+y+"!"),ht();f=_.ctx.dispatch}else{if("string"==typeof e)if(e.includes("/")){var v=e.split("/");l=v[0],p=v[1]}else p=e;var m;if(!(m=l&&"*"!==l?_t(l):d?_t(d):_t()))return mt("no ref found"),ht();f=m.ctx.dispatch}if("*"!==l)return f(e,t,n,r);var h=Xe.reducer._fnName_fullFnNames_[p];if(!h)return;var C=[];return h.forEach(function(e){C.push(f(e,t,n,r))}),Promise.all(C)}catch(e){if(u)throw e;return mt(e.message),ht()}}function Kt(e,t,n,r,o){return Ct(e,t,n,r,o)}function gt(a,e){void 0===e&&(e={});var t="module["+a+"] reducer";if(!Ee(e))throw Error(t+" "+Se);it(a,!1,t+" is invalid");var n=Xe.reducer,r=n._reducer,o=n._caller,c=n._fnName_fullFnNames_,i=n._module_fnNames_,u=Object.assign({},e);r[a]=u;var s=J(o,a),d=Q(i,a);u.setState||(u.setState=function(e){return e}),te(u).forEach(function(e){d.includes(e)||d.push(e);var r=a+"/"+e,t=Q(c,e);t.includes(r)||t.push(r),s[e]=function(e,t,n){return Kt(r,e,t,n)};var o=u[e];if("function"!=typeof o)throw Error("reducer key["+e+"] 's value is not a function");var n=o;o.__fnName&&(u[e]=n=function(e,t,n){return o(e,t,n)}),n.__fnName=e,n.__stateModule=a,n.__ctName=o.__ctName||o.constructor.name})}var St=0,Et=["a","A","b","B","c","C","d","D","e","E","f","F","g","G","h","H","i","I","j","J","k","K","l","L","m","M","n","N","o","O","p","P","q","Q","r","R","s","S","t","T","u","U","v","V","w","W","x","X","y","Y","z","Z"];function $t(e){return St++,(e||function(e){void 0===e&&(e=6);for(var t="",n=0;n<e;n++)t+=Et[Z()];return t}())+"_"+St}var wt=Xe.moduleName_stateKeys_,bt=Xe.runtimeVar;function xt(e,t,n,r,o,a,c){var i=t.refCtx,u=t.type;if(e!==Ce||i.__$$isBSe){if(n){var s,d,f,l=typeof n;if("string"==l)s=Ee(r)?((d={})[n]=r,d):((f={})[n]={fn:r,depKeys:o,compare:a,immediate:c},f);else if(Ee(n))s=n;else if("function"==l&&!Ee(s=n(i)))throw Error("type of "+u+" callback result must be an object");s?function(U,O,N){var e=bt.computedCompare,t=bt.watchCompare,I=bt.watchImmediate,D="computed"===O.type?e:t,A=O.module;te(N).forEach(function(c){var e=N[c],t=typeof e,n=e;if("function"==t&&(n={fn:e}),Ee(n)){var r=n,o=r.fn,a=r.depKeys,i=void 0===a?"-":a,u=r.immediate,s=void 0===u?I:u,d=r.compare,f=void 0===d?D:d,l=r.lazy,p=r.sort,y=$t("mark");if("*"===i||"-"===i){var _=Nt(O,A,c),v=_.stateKey;Ut(U,O,y,v),Ot(U,O,A,v,o,i,s,f,l,p)}else{if(i&&!Array.isArray(i))throw Error("depKeys must an string array or *");if(i&&0!==i.length){var m="",h=c;if(c.includes("/")){var C=c.split("/"),K=C[0],g=C[1];m=K,h=g}Ut(U,O,y,h);var S={};i.forEach(function(e){var t=Nt(O,A,e),n=t.isStateKey,r=t.stateKey,o=t.module;if(m&&o!==m)throw Error("including slash both in retKey["+c+"] and depKey["+e+"] founded, but their module is different");var a=Q(S,o);if(!n)throw Error("depKey["+e+"] invalid, module["+o+"] doesn't include its stateKey["+r+"]");a.push(r)}),te(S).forEach(function(e){Ot(U,O,e,h,o,S[e],s,f,l,p)})}else{var E=Nt(O,A,c),$=E.isStateKey,w=E.stateKey,b=E.module,x=[];!i&&$&&(x=[w]),Ut(U,O,y,w),Ot(U,O,b,w,o,x,s,f,l,p)}}}else G("retKey["+c+"] item type error")})}(e,t,s):G(e+" "+u+" param type error")}}else G(e+" "+u+" must be been called in setup block")}function Ut(e,t,n,r){if(e===Ce){var o=t.refCtx,a=o.retKey_fnUid_,c=t.type,i=c+"_"+r;if(a[i])throw Error("ccUKey["+o.ccUniqueKey+"], retKey["+r+"] duplicate in ref "+c);a[i]=n}}function Ot(e,t,n,r,o,a,c,i,u,s){var d=J(t.dep,n,{retKey_fn_:{},retKey_lazy_:{},stateKey_retKeys_:{},retKey_stateKeys_:{},fnCount:0}),f=d.retKey_fn_,l=d.stateKey_retKeys_,p=d.retKey_lazy_,y=d.retKey_stateKeys_,_={fn:o,immediate:c,compare:i,depKeys:a,sort:s||t.sort};f[r]?e!==Ce&&(f[r]=_,p[r]=t.isLazyComputed||u):(f[r]=_,p[r]=t.isLazyComputed||u,d.fnCount++),e===Ce&&(t.retKeyFns[r]=f[r]);var v=t.refCtx;if(v&&("computed"===t.type?v.hasComputedFn=!0:v.hasWatchFn=!0),"-"!==a){var m="*"===a?["*"]:a;"*"===a&&(y[r]=wt[n]),m.forEach(function(e){var t=Q(l,e);t.includes(r)||t.push(r)})}}function Nt(e,t,n){var r,o=t,a=n;if(n.includes("/")){var c=n.split("/"),i=c[0];i&&(o=i),a=c[1]}if(o===e.module)r=e.stateKeys;else{if(!(r=wt[o]))throw I(Ke.CC_MODULE_NOT_FOUND,T("module["+o+"]"));if(!e.connect[o])throw I(Ke.CC_MODULE_NOT_CONNECTED,T("module["+o+"], stateKey["+a+"]"))}return{isStateKey:r.includes(a),stateKey:a,module:o}}function It(e,o){var t={};return te(e).forEach(function(r){o[r]=j(),Object.defineProperty(t,r,{get:function(){var e=o[r]||{},t=e.isLazy;if(!t)return e.result;if(t&&e.needCompute){var n=(0,e.fn)(e.newState,e.oldState,e.fnCtx);e.result=n,e.needCompute=!1}return e.result},set:function(e){var t=o[r];e[v]?e.isLazy?(t.isLazy=!0,t.needCompute=!0,t.newState=e.newState,t.oldState=e.oldState,t.fn=e.fn,t.fnCtx=e.fnCtx):(t.isLazy=!1,t.result=e.result):G("computed value can not been changed manually")}})}),t}var Dt=J,At=Ee;function Rt(n,e){if(e){var t="module["+n+"] computed";if(!At(e))throw Error(t+" "+Se);it(n,!1,t+" is invalid");var r=Xe.computed,o=Xe.store.getState(),a=r.getRootComputedValue(),c=r.getRootComputedDep();r.getRootComputedRaw()[n]=e;var i=o[n];xt(h,{sort:0,module:n,stateKeys:te(i),dep:c},e);var u=Xe.getDispatcher(),s=Object.assign({},i),d=Dt(r._computedValueOri,n);a[n]=It(e,d);var f=a[n];ke(u&&u.ctx,n,u&&u.ctx.module,i,function(e,t){return Oe(t,h,"computed",c,n,i,e)},i,i,s,de(n),!0,"computed",h,f)}}var Mt=Ee,Tt=J,kt=te;function Wt(n,e,t){if(void 0===t&&(t=!1),e){var r="module["+n+"] watch";if(!Mt(e))throw Error(r+" "+Se);it(n,!1,r+" is invalid");var o=Xe.watch.getRootWatchDep(),a=Xe.watch.getRootWatchRaw(),c=Xe.computed.getRootComputedValue();if(t){var i=a[n];i?Object.assign(i,e):a[n]=e}else a[n]=e;var u=(0,Xe.store.getState)(n);xt(h,{module:n,stateKeys:kt(u),dep:o},e);var s=Xe.getDispatcher(),d=Object.assign({},u),f=Tt(c,n);ke(s&&s.ctx,n,s&&s.ctx.module,u,function(e,t){return Oe(t,h,"watch",o,n,u,e)},u,u,d,de(n),!0,"watch",h,f)}}var Ft=[U,O,12,N,14,15],Lt={};function jt(t,n){Lt[t].forEach(function(e){e({sig:t,payload:n})})}function Pt(e,t){function n(e,t){var n=Lt[e];n?n.push(t):console.warn("invalid sig["+e+"]")}Array.isArray(e)?e.forEach(function(e){n(e,t)}):n(e,t)}Ft.forEach(function(e){return Lt[e]=[]});var zt=function(e){if(!Xe.errorHandler)throw e;Xe.errorHandler(e)},Vt=0,qt={},Ht={},Bt={},Gt={};function Yt(){return++Vt}function Xt(e,t,n,r){if(n){var o=r[e];o||(o=r[e]={});var a=o[t];a?Object.assign(a,n):o[t]=n}}function Jt(e,t,n){Xt(e,t,n,qt)}function Qt(e,t,n){return Jt(e,t,n),function(e){var t=function(e){return qt[e]}(e),n=[];return te(t).forEach(function(e){n.push({module:e,state:t[e]})}),n}(e)}function Zt(e){delete qt[e]}var en={},tn=function(e,t,n){void 0===n&&(n=1e3);var r=en[t];r&&clearTimeout(r),en[t]=setTimeout(function(){delete en[t],e()},n)};function nn(e,n,r,t,o,a,c){if(void 0===c&&(c=!1),!e.hasWatchFn)return!0;var i=Object.assign({},t),u=e.watchDep,s=e.module,d=e.ccUniqueKey,f=e.refComputed,l=Object.assign({},r,t),p=ke(e,n,s,r,function(e,t){return Oe(t,"ref","watch",u,n,r,e,d)},t,l,i,o,a,"watch",Ce,f),y=p.shouldCurrentRefUpdate;return c&&p.hasDelta&&Object.assign(t,i),y}function rn(e,n,r,t,o,a,c){void 0===a&&(a=!1),void 0===c&&(c=!1);var i=Object.assign({},t);if(!e.hasComputedFn)return i;var u=e.computedDep,s=e.module,d=e.refComputed,f=e.ccUniqueKey,l=Object.assign({},r,t);return ke(e,n,s,r,function(e,t){return Oe(t,Ce,"computed",u,n,r,e,f)},t,l,i,o,a,"computed",Ce,d),c&&Object.assign(t,i),i}var on=te,an=Xe.ccUKey_ref_,cn=Xe.waKey_uKeyMap_,un=Xe.waKey_effectUKeyMap_;function sn(o,e,a,c){var t=on(e),n=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=[]),e+"/"+t.sort().join(",")+"/"+n+"/"+("*"===r?"*":r.sort().join(","))}(o,t,a,c),r=function(e,t){return ft[e][t]}(o,n);if(r)return{sharedStateKeys:t,result:r};var i={},u=[],s=[];t.forEach(function(e){var t=o+"/"+e;Object.assign(i,cn[t],un[t])});function d(e,t){e?u.push(t):s.push(t)}function f(e,t){var n=e.ctx,r=n.ccClassKey;if(a){var o=n.renderKey===a;"*"===c?o&&d(t,e):c.includes(r)?o&&d(t,e):d(t,e)}else d(t,e)}var l=on(i);l.forEach(function(e){var t=an[e];if(t){var n=t.ctx,r=!!n.connect[o];n.module===o&&f(t,!0),r&&f(t,!1)}});var p={belong:u,connect:s};return function(e,t,n){ft[e][t]=n}(o,n,p),{sharedStateKeys:t,result:p}}var dn=Ee,fn=G,ln=$,pn=function(e,t){return e+"/"+Object.keys(t).sort().join("|")},yn=te,_n=1,vn=2,mn=he,hn=ve,Cn=me,Kn=w,gn=K,Sn=15,En=1,$n=2,wn=3,bn=Xe.store,xn=bn.setState,Un=bn.getPrevState,On=bn.saveSharedState,Nn=Xe.middlewares,In=Xe.ccClassKey_ccClassContext_,Dn=Xe.refStore,An=Xe.moduleName_stateKeys_;function Rn(e,t,c){var n=void 0===t?{}:t,i=n.module,r=n.skipMiddleware,u=void 0!==r&&r,s=n.payload,o=n.reactCallback,d=n.type,a=n.calledBy,f=void 0===a?hn:a,l=n.fnName,p=void 0===l?"":l,y=n.renderKey,_=void 0===y?"":y,v=n.delay,m=void 0===v?-1:v;if(void 0!==e)if(dn(e)){var h=c.ctx,C=h.module,K=h.ccUniqueKey,g=h.ccKey,S=function(e,t){return e===t?_n:vn}(i,C),E={payload:s,renderKey:_,ccKey:g,module:i,fnName:p},$=function(e,t,n){var r=Ie(t,An[e],!0).partialState;if(r)return xn(e,r,n);return r}(i,e,{refCtx:S===_n?c.ctx:null,callInfo:E,noSave:!0});Object.assign(e,$),Mn(c,E,_,f,e,S,o,function(n,r,o){var a={calledBy:f,type:d,payload:s,renderKey:_,delay:m,ccKey:g,ccUniqueKey:K,committedState:r,refModule:C,module:i,fnName:p,sharedState:$||{},modState:function(e,t){a.committedState[e]=t,a.sharedState[e]=t}};!function(e,n,r){var o=!1;if(!0!==e){var a=Nn.length;if(0<a){o=!0;var c=0;!function e(){if(c===a)r(o);else{var t=Nn[c];c++,"function"==typeof t?t(n,e):(fn("found one middleware is not a function"),e())}}()}else r()}else r(o)}(u,a,function(e){o&&o();var t=$;e?t=On(i,a.sharedState,!0):$&&On(i,$),n===En&&!t||jt(Sn,{committedState:r,sharedState:t,module:i,type:function(e,t){return[mn,hn,Cn,Kn,gn].includes(e)?"ccApi/"+e:"dispatch/"+t}(f,d),ccUniqueKey:K,renderKey:_}),t&&function(e,t,n,r,o,a,c){var i=function(){!function(r,e,o,t,a,n){if(!o)return;var c=e.ctx,i=c.ccUniqueKey,u=t===_n,s=sn(a,o,n,In[c.ccClassKey].renderKeyClasses),d=s.sharedStateKeys,f=s.result,l=f.connect;f.belong.forEach(function(e){var t=e.ctx.ccUniqueKey;u&&t===i||Mn(e,r,null,"broadcastState",o,_n)});var p=Un(a);l.forEach(function(e){if(!0!==e.__$$isUnmounted){var t=e.ctx;rn(t,a,p,o,r);var n=nn(t,a,p,o,r);t.__$$settedList.push({module:a,keys:d}),n&&t.__$$ccForceUpdate()}})}(e,t,n,r,o,a)};if(0<c){var u=pn(t.ctx.ccUniqueKey,n);tn(i,u,c)}else i()}(E,c,t,S,i,_,m)})})}else fn("your committed state "+Se)}function Mn(e,t,n,r,o,a,c,i){var u=e.state,s=e.ctx;if(!0===e.__$$isUnmounted||a!==_n||r!==mn&&!ln(o))return c&&c(u),i&&i(En,o);var d=s.module,f=s.storedKeys,l=s.ccUniqueKey,p=wn;if(n&&(p=$n,s.renderKey!==n))return i&&i(En,o);if(0<f.length){var y=Ie(o,f),_=y.partialState;if(!y.isStateEmpty){if(!0===s.persistStoredKeys){var v=Ie(u,f),m=Object.assign({},v.partialState,_);localStorage.setItem("CCSS_"+l,JSON.stringify(m))}Dn.setState(l,_)}}function h(){s.__$$settedList.push({module:d,keys:yn(C)}),s.__$$ccSetState(C,c,K)}var C=rn(s,d,u,o,t),K=nn(s,d,u,C,t,!1,!0);i?i(p,C,h):h()}function Tn(e,t,n,r,o){void 0===r&&(r=-1);try{_t(e).ctx.changeState(t,{ccKey:"[[top api:setState]]",module:e,renderKey:n,delay:r,skipMiddleware:o})}catch(e){X(e)}}var kn=G,Wn=Ee,Fn=te,Ln=Xe.store,jn=Ln.getState,Pn=Ln.setState,zn=Xe.reducer._reducer,Vn=Xe.computed._computedValue,qn=I,Hn=T;function Bn(e,t){void 0===t&&(t=!0);try{return it(e,!1,"module["+e+"] is not configured in store"),!0}catch(e){return function(e,t){if(void 0===t&&(t=!0),t)throw e;Xn(e)}(e,t),!1}}function Gn(o,a){return function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e?a(e):o.apply(void 0,n)}}function Yn(e,t,n,r){var o;return!0===e?(function(e){Bt[e]=!0}(o=Yt()),r[o]=1):r[o=t||Yt()]||(r[o]=1),{_chainId:o,_oriChainId:n||o}}function Xn(e,t){e&&(t?t(e):(kn(e),Xe.errorHandler&&Xe.errorHandler(e)))}function Jn(e,t,n){return function(r,o,a,c){return new Promise(function(e,t){var n=Object.assign(a,{__innerCb:Gn(e,t)});r(o,n,c)}).catch(zt)}(nr,e,t,n)}function Qn(e,t,n){return Jn(e,{callerRef:t.callerRef,context:!0,module:t.module,calledBy:t.calledBy,fnName:e.name,delay:t.delay,renderKey:t.renderKey,chainId:t.chainId,oriChainId:t.oriChainId,chainId_depth_:t.chainId_depth_,isSilent:t.isSilent},n)}function Zn(a,c){return function(e,t,n){var r=a.ctx;if(c){var o=Object.assign({},r.state,e);c.state=o}n?(r.renderCount+=1,r.reactSetState(e,t)):(Object.assign(a.state,e),r.state=a.state)}}function er(n){return function(e){var t=n.ctx;t.renderCount+=1,t.reactForceUpdate(e)}}function tr(h,e){var t=void 0===e?{}:e,C=t.chainId,K=t.oriChainId,g=t.isLazy,n=t.delay,S=void 0===n?-1:n,r=t.isSilent,E=void 0!==r&&r,o=t.chainId_depth_,$=void 0===o?{}:o;return function(e,t,n,r){var o=g,a=E,c="",i=null!=r?r:S;if(Wn(n)){var u=n.lazy,s=n.silent,d=n.renderKey,f=n.delay;void 0!==u&&(o=u),void 0!==s&&(a=s),void 0!==d&&(c=d),void 0!==f&&(i=f)}else c=n;var l,p,y=Yn(o,C,K,$),_=typeof e,v={callerRef:h,calledBy:w,module:h.ctx.module,isSilent:a,chainId:y._chainId,oriChainId:y._oriChainId,chainId_depth_:$,delay:i,renderKey:c},m=Error("param type error, correct usage: invoke(userFn:function, ...args:any[]) or invoke(option:[module:string, fn:function], ...args:any[])");if("function"==_)return e.__fnName&&(e.name=e.__fnName),Qn(e,v,t);if("object"!=_)throw m;if(p=Array.isArray(e)?(l=e[1],e[0]):(l=e.fn,e.module),"function"!=typeof l)throw m;return p&&(v.module=p),Qn(l,v,t)}}function nr(l,e,p){var y=e.callerRef,_=y.ctx.module,t=e.module,v=void 0===t?_:t,n=e.context,m=void 0!==n&&n,h=e.__innerCb,C=e.type,K=e.calledBy,g=e.fnName,r=e.delay,S=void 0===r?-1:r,E=e.renderKey,$=e.chainId,w=e.oriChainId,b=e.chainId_depth_,x=e.isSilent;!function(e,t,n,r){var o=n;Bn(e,!1)?(e!==t&&n&&(kn(function(e,t){return"param module["+e+"] must equal current ref's module["+t+"] when pass param reactCallback, or it will never been triggered! "}(e,t)),o=null),r(null,o)):r(Error("inputModule:"+e+" invalid"),null)}(v,_,e.cb,function(e,r){if(e)return Xn(e,h);var o,t=jn(v),n={};if(o=$===w&&1===b[$],m){b[$]=b[$]+1;var a=rr(y,!1,x,v,E,S,$,w,b),c=rr(y,!1,!0,v,E,S,$,w,b),i=rr(y,!0,x,v,E,S,$,w,b),u=tr(y,{delay:S,chainId:$,oriChainId:w,chainId_depth_:b}),s=tr(y,{isLazy:!0,delay:S,oriChainId:w,chainId_depth_:b}),d=tr(y,{isLazy:!1,delay:S,isSilent:!0,oriChainId:w,chainId_depth_:b}),f=function(e){return Gt[e]}($)||{};n={module:v,callerModule:_,committedStateMap:f,committedState:f[v]||{},invoke:u,lazyInvoke:s,silentInvoke:d,invokeLazy:s,invokeSilent:d,dispatch:a,lazyDispatch:i,silentDispatch:c,dispatchLazy:i,dispatchSilent:c,rootState:jn(),globalState:jn(pe),moduleState:t,moduleComputed:Vn[v]||{},setState:function(e){return a("setState",e,{silent:x,renderKey:E,delay:S})},refCtx:y.ctx}}!1===x&&jt(U,{isSourceCall:o,calledBy:K,module:v,chainId:$,fn:l}),new Promise(function(e){return e(l(p,t,n))}).then(function(e){b[$]=b[$]-1;var t=1===b[$];!function(e,t,n){Xt(e,t,n,Gt)}($,v,e);var n=[];!1===x&&(jt(O,{isSourceCall:o,calledBy:K,module:v,chainId:$,fn:l}),!function(e){return!0===Bt[e]}($)?n=[{module:v,state:e}]:t?function(e){return!0===Ht[e]}($)||(n=Qt($,v,e),Zt($)):Jt($,v,e)),n.forEach(function(e){e.state&&Rn(e.state,{renderKey:E,module:e.module,reactCallback:r,type:C,calledBy:K,fnName:g,delay:S,payload:p},y)}),o&&(Zt($),function(e){delete Gt[e]}($)),h&&h(null,e)}).catch(function(e){jt(N,{isSourceCall:o,calledBy:K,module:v,chainId:$,fn:l}),Xn(e,h)})})}function rr(b,x,U,O,N,I,D,A,R){return void 0===N&&(N=""),void 0===I&&(I=-1),void 0===R&&(R={}),function(e,n,t,r){void 0===e&&(e={});var o=x,a=U,c="",i=r||I;if(Wn(t)){c=N;var u=t.lazy,s=t.silent,d=t.renderKey,f=t.delay;void 0!==u&&(o=u),void 0!==s&&(a=s),void 0!==d&&(c=d),void 0!==f&&(i=f)}else c=t||N;function l(){return tr(b,{chainId:v,oriChainId:m,isLazy:o,chainId_depth_:R})(e,n,c,i)}var p,y,_=Yn(o,D,A,R),v=_._chainId,m=_._oriChainId,h=typeof e,C=O;if(h&&"object"==h){if(Array.isArray(h))return l();var K=e.module;K&&(C=K),p=e.type,y=e.cb}else{if("string"!=h&&"function"!=h)return Promise.reject(qn(Ke.CC_DISPATCH_PARAM_INVALID));var g=e;if("function"==h){var S=e.__fnName;if(!S)return l();g=S,1==R[m]&&(C=e.__stateModule)}var E=g.split("").filter(function(e){return"/"===e}).length;if(0===E)p=g;else{if(1!==E)return Promise.reject(qn(Ke.CC_DISPATCH_STRING_INVALID,Hn(g)));var $=g.split("/"),w=$[0];w&&(C=w),p=$[1]}}return"*"===C?Ct("*/"+p,n,{silent:a,lazy:o,renderKey:c},i,{refModule:b.ctx.module}):new Promise(function(e,t){!function(e){var t=void 0===e?{}:e,n=t.callerRef,r=t.module,o=t.renderKey,a=t.isSilent,c=t.type,i=t.payload,u=t.cb,s=t.__innerCb,d=t.delay,f=void 0===d?-1:d,l=t.chainId,p=t.oriChainId,y=t.chainId_depth_,_=zn[r];if(!_)return s(Error("no reducerMap found for module:["+r+"]"));var v=_[c];if(!v)return s(Error("no reducer fn found for ["+r+"/"+c+"], is these fn you want:"+Object.keys(_)));nr(v,{callerRef:n,module:r,type:c,cb:u,context:!0,__innerCb:s,calledBy:M,delay:f,renderKey:o,isSilent:a,chainId:l,oriChainId:p,chainId_depth_:y},i)}({callerRef:b,module:C,type:p,payload:n,cb:y,__innerCb:Gn(e,t),delay:i,renderKey:c,isSilent:a,chainId:v,oriChainId:m,chainId_depth_:R})}).catch(zt)}}function or(a){return function(t){try{Tn(a,t)}catch(e){var n=jn(a);if(!n)return kn("invalid module "+a);var r=Ie(t,Fn(n),!1,!0),o=r.ignoredStateKeys;r.isStateEmpty||Pn(a,r.partialState),0<o.length&&kn("invalid keys:"+o.join(",")+", their value is undefined or they are not declared in module"+a),Y("no ccInstance found for module["+a+"] currently, cc will just store it, lately ccInstance will pick this state to render")}}}var ar=function(o){return function(e,t){var n=o.ctx,r=Object.assign({},o.state,e);n.type===ye?(o.state=n.state=r,n.__boundSetState(r),t&&t(r)):(n.state=r,o.__$$isMounted?o.state=r:Object.assign(o.state,e),n.__boundSetState(r,t))}},cr=function(r){return function(e){var t=r.ctx;if(t.type===ye){var n=Object.assign({},r.state);t.__boundSetState(n),e&&e(n)}else t.__boundForceUpdate(e)}},ir=Ee,ur=fe;function sr(t,e){if(Xe.isStartup){if(!ir(e))throw Error("param config "+Se);if(t===pe)throw Error("configuring global module is not allowed");var n=e.reducer,r=e.computed,o=e.watch,a=e.init,c=e.isClassSingle,i=ur(e.state);if(n&&!ir(n))throw Error("config.reducer "+Se);if(yt(t,i,!0),gt(t,n),r&&Rt(t,r),o&&Wt(t,o),Xe.moduleSingleClass[t]=!0===c,a){if("function"!=typeof a)throw Error("init value must be a function!");Promise.resolve().then(a).then(function(e){or(t)(e)})}Xe.moduleName_isConfigured_[t]=!0,jt(14,t)}else tt.push({module:t,config:e})}function dr(r,o){var a={};return te(r).forEach(function(e){function t(){return n.apply(void 0,arguments)}var n=r[e];t.__fnName=e,t.__stateModule=o,a[e]=t}),a}function fr(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}function lr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var pr=te,yr=Ee,_r=Xe.store._state;var vr=b,mr=I,hr=Xe.featureStr_classKey_,Cr=Xe.userClassKey_featureStr_,Kr=Xe.ccClassKey_ccClassContext_,gr=0;var Sr=Xe.moduleName_stateKeys_,Er=Xe.moduleName_ccClassKeys_,$r=Xe.moduleSingleClass,wr=Xe.ccClassKey_ccClassContext_,br=Xe.computed._computedValue,xr=function(e,t){var n=!1,r=!1;if(!Array.isArray(e))return{duplicate:n,notArray:!0,keyElementNotString:r};if(!Array.isArray(t))return{duplicate:n,notArray:!0,keyElementNotString:r};var o=e.length,a=t.length;e:for(var c=0;c<o;c++){var i=e[c];if("string"!=typeof i){r=!0;break e}for(var u=0;u<a;u++){var s=t[u];if("string"!=typeof s){r=!0;break e}if(s===i){n=!0;break e}}}return{duplicate:n,notArray:!1,keyElementNotString:r}},Ur=T;function Or(e,t,n,r,o,a,c,i,u){void 0===e&&(e=V),void 0===a&&(a=[]),!0===i&&function(){if(!0!==Xe.isStartup)throw Error("you must startup cc by call startup method before register ReactClass to cc!")}();var s="cc"===u;it(e,!1,"module["+e+"] is not configured in store"),ut(Sr[e],a);var d=c;Array.isArray(c)?(d={},c.forEach(function(e){return d[e]="-"})):c[pe]||(c[pe]="-");var f,l=function(e,t,n){if(!n)return[];if("*"===n)return Sr[e];var r=xr(n,[]);if(r.notArray||r.keyElementNotString)throw Error("watchedKeys "+S+" "+Ur("ccClassKey:"+t));return n}(e,t,o),p=function(o,e,t,a){if(!yr(o))throw Error("CcFragment or CcClass's prop connect type error, it "+Se);function c(e){return i+" module["+e+"]'s value must be * or array of string"}var i="CcFragment or CcClass's prop connect is invalid,",n=pr(o);n.sort();var u=[],s={};if(n.forEach(function(t){var n=_r[t],r=a+"_"+t+"/";if(void 0===n)throw Error(i+" module["+t+"] not found in cc store ");var e=o[t];if("string"==typeof e){if("*"!==e&&"-"!==e)throw Error(c(t));u.push(r+"*"),pr(n).forEach(function(e){return s[t+"/"+e]=e})}else{if(!Array.isArray(e))throw Error(c(t));e.forEach(function(e){if(!n.hasOwnProperty(e))throw Error(i+" module["+t+"]'s key["+e+"] not declared in cc store ");r+=e+",",s[t+"/"+e]=e}),u.push(r)}}),u.push("|"),"*"===e)u.push(a+"_$"+t+"/*");else{e.sort();var r=t+"/"+e.join(",");u.push(r)}return{featureStr:u.join("@"),connectedModuleKeyMapping:s,connectedModuleNames:n}}(d,l),y=p.connectedModuleKeyMapping,_=p.connectedModuleNames,v=function(e,t,n,r,o,a,c){if(void 0===c&&(c=""),!c){if(t===V&&vr(n)&&0===r.length)return o+"0";var i=o+":"+a,u=hr[i];return u||(hr[i]=u=""+o+ ++gr)}if(c.startsWith(m))throw Error("user can not specify a classKey["+c+"] starts with $$Cc");if(!e&&c.toLowerCase()==B.toLowerCase())throw Error(B+" is cc built-in ccClassKey name, if you want to customize your dispatcher, \n      you can set autoCreateDispatcher=false in StartupOption, and use createDispatcher then.");if(Kr[c]){if(Cr[c]!==a)throw mr(Ke.CC_CLASS_KEY_DUPLICATE,"ccClassKey:["+c+"] duplicate")}else Cr[c]=a;return c}(s,e,d,l,r,p.featureStr,t);if(n){if(!Array.isArray(n)&&"*"!==n)throw Error("renderKeyClasses type err, it is must be an array or string *");f=n}else f=[v];return function(e,t,n,r,o,a,c){var i=wr[e];i||(i=function(e,t,n,r,o){return{module:e,ccClassKey:t,renderKeyClasses:n,originalWatchedKeys:o,watchedKeys:r,ccKeys:[],connectedState:{},connectedModuleKeyMapping:null,connectedModule:{}}}(n,e,t,o,r),wr[e]=i);var u={},s={};if(a){var d=Xe.store._state,f=i.connectedState;c.forEach(function(e){f[e]=d[e],s[e]=br[e],u[e]=1}),i.connectedModuleKeyMapping=a,i.connectedModule=u,i.connectedComputed=s}}(v,f,e,o,l,y,_),function(e,t){var n=Q(Er,e);if(!0===$r[e]&&1<=n.length)throw Error("module["+e+"] is declared as single, only on ccClassKey can been registered to it, and now a ccClassKey["+n[0]+"] has been registered!");n.includes(t)||n.push(t)}(e,v),{_module:e,_connect:d,_watchedKeys:l,_ccClassKey:v}}var Nr=Xe.event_handlers_,Ir=Xe.handlerKey_handler_,Dr=Xe.ccUKey_handlerKeys_,Ar=Xe.ccUKey_ref_,Rr=function(e,t,n){return e+"$"+t+"$"+n},Mr=Q,Tr=G;function kr(e,t,n,r,o){void 0===o&&(o=null);var a=Nr[e];if(a){var c=a;return r?c=a.filter(function(e){return e.ccUniqueKey===r}):n?c=a.filter(function(e){return e.ccClassKey===n}):t&&(c=a.filter(function(e){return e.module===t})),void 0!==o&&(c=c.filter(function(e){return e.identity===o})),c}return[]}function Wr(e){var o={},r=[];e.forEach(function(e){var t=e.ccUniqueKey,n=e.event;delete Ir[e.handlerKey],o[t]=1,r.includes(n)||r.push(n)}),r.forEach(function(e){var r=Nr[e];r&&(r.forEach(function(e,t){var n=e.ccUniqueKey;1===o[n]&&(r[t]=null,delete Dr[n])}),Nr[e]=r.filter(function(e){return null!==e}))})}function Fr(e,t,n,r,o,a){var c=Mr(Nr,r);if("function"!=typeof a)return Tr("event "+r+"'s handler is not a function!");var i=Rr(n,r,o),u=Mr(Dr,n),s=c.findIndex(function(e){return e.handlerKey===i}),d={event:r,module:e,ccClassKey:t,ccUniqueKey:n,identity:o,handlerKey:i,fn:a};-1<s?c[s]=d:(c.push(d),u.push(i)),Ir[i]=d}function Lr(e){for(var t=arguments.length,a=Array(1<t?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];var r,o,c,i,u=null,s=null;"string"==typeof e?r=e:(r=e.name,u=e.identity,o=e.module,c=e.ccClassKey,i=e.ccUniqueKey,s=e.canPerform),kr(r,o,c,i,u).forEach(function(e){var t=e.handlerKey,n=Ar[e.ccUniqueKey];if(n&&t){if(n.__$$isUnmounted)return;var r=Ir[t];if(r){if(s&&!s(n))return;var o=r.fn;n.__$$isMounted?o.apply(void 0,a):n.ctx.__$$onEvents.push({fn:o,args:a})}}})}function jr(e,t){Wr(kr(e,t.module,t.ccClassKey,t.ccUniqueKey,t.identity))}function Pr(e){var t=Dr[e];if(t){var n=[];t.forEach(function(e){return n.push(Ir[e])}),Wr(n)}}function zr(e){if(e&&"object"==typeof e){var t;if(Array.isArray(e))t={name:e[0],identity:e[1]};else t=Object.assign({},e);return t}return{name:e}}var Vr=Object.freeze({bindEventHandlerToCcContext:Fr,findEventHandlersToPerform:Lr,findEventHandlersToOff:jr,offEventHandlersByCcUniqueKey:Pr,getEventItem:zr}),qr=Xe.waKey_uKeyMap_,Hr=Xe.moduleName_stateKeys_;function Br(e,t,n,r){var o=e.ctx;if(o.__$$renderStatus===g){var a=o.ccUniqueKey;if(r){var c=o.module;if(Hr[c].includes(n)){var i=o.__$$nextCompareWaKeys;o.__$$compareWaKeys[n]=o.__$$curWaKeys[n]=qr[c+"/"+n][a]=1,i[n]||(i[n]=2,o.__$$nextCompareWaKeyCount++)}}else{var u=t+"/"+n,s=o.__$$curConnWaKeys,d=o.__$$compareConnWaKeys,f=o.__$$nextCompareConnWaKeys,l=o.__$$nextCompareConnWaKeyCount;console.log(u),d[t][n]=s[t][n]=qr[u][a]=1;var p=f[t];p[n]||(p[n]=2,l[t]++)}}}function Gr(n,e,r,o){return new Proxy(e,{get:function(e,t){return Br(n,r,t,o),e[t]},set:function(e,t,n){return e[t]=n,!0}})}var Yr=1;function Xr(c,i){return void 0===i&&(i=!1),function(e,t,n,r,o){var a=o||Yr++;xt(Ce,{type:"computed",isLazyComputed:i,refCtx:c,sort:a,stateKeys:c.stateKeys,retKeyFns:c.computedRetKeyFns,module:c.module,connect:c.connect,dep:c.computedDep},e,t,n,r)}}var Jr=Xe.computed,Qr=Jr._computedValueOri,Zr=Jr._computedValue,eo=Jr._computedDep;function to(e,t,n,r,o){(e.retKey_stateKeys_[r]||[]).forEach(function(e){Br(t,n,e,o)})}function no(r,o,a,c){void 0===a&&(a=!0),void 0===c&&(c=!1);var e=c?r.ctx.refComputedOri:Qr[o],i=c?r.ctx.refComputedValue:Zr[o];return e?new Proxy(e,{get:function(e,t){if(c){var n=r.ctx.computedDep;Object.keys(n).forEach(function(e){to(n[e],r,e,t,a)})}else to(eo[o],r,o,t,a);return i[t]},set:function(e,t,n){return e[t]=n,!0}}):{}}var ro=G,oo=R;function ao(e){return e?e.props||e:{}}var co=Xe.store.getState;var io=function(e,t,n){var r=n.module,o=n.state,a=!1,c="",i="",u="",s=null,d=-1,f=!1,l=e[_e],p=e.type,y=!1;if(void 0!==l){var _,v,m;if(d=e.delay,i=e.rkey,a="int"===p,f="bool"===p,(c=l).includes("/")){var h=c.split("/");_=h[1],v=c,m=h[0]}else v=r+"/"+(_=c),m=r;var C=co(m);u="bool"===p?!le(m!==r?C:o,_):function(e){var t=ne(e);return t?t.currentTarget.value:e}(t);var K=e.val;if(void 0===K);else if("function"==typeof K){var g=K(u,_,{module:m,moduleState:C,fullKeyPath:v,state:o,refCtx:n});if(null!=g)if("as"===p)u=g;else{var S=typeof g;"boolean"==S?y=!g:"object"==S?(y=!0,s=g):G("syncKey["+l+"] cb result type error.")}else"as"===p&&(y=!0)}else u=K}else{var E=ne(t);if(!E)return null;var $=E.currentTarget;u=$.value;var w=$.dataset;if(a="int"===p||void 0!==w.ccint,!(c=w.ccsync))return null;i=w.ccrkey;var b=w.ccdelay;if(b)try{d=parseInt(b)}catch(e){}}return{currentTarget:{value:u,extraState:s,noAutoExtract:y,dataset:{ccsync:c,ccint:a,ccdelay:d,ccrkey:i}},isToggleBool:f}};var uo=function(e,t,n,r,o){var a=t;!0!==n||Number.isNaN(a=parseInt(t))&&(G(t+" can not convert to int but you set ccint as true!ÔºÅ"),a=t);var c=null,i=[];if(e.includes("/")){var u=e.split("/"),s=u[1];c=u[0],i=s.includes(".")?s.split("."):[s]}else i=e.includes(".")?e.split("."):[e];if(1===i.length){var d,f,l=i[0];return!0!==o?{module:c,state:(d={},d[l]=a,d)}:{module:c,state:(f={},f[l]=!r[l],f)}}var p,y=i[0],_=i.slice(1),v=r[y];return function e(t,n,r,o,a,c){void 0===c&&(c=!1);var i=n[o];if(r===o)if(!0===c){var u=t[i];"boolean"!=typeof u?G("key["+i+"]'s value type is not boolean"):t[i]=!u}else t[i]=a;else e(t[i],n,r,++o,a,c)}(v,_,_.length-1,0,a,o),{module:c,state:(p={},p[y]=v,p)}},so=Xe.store.getState;function fo(e,t,n){var r=t.ctx,o=r.module,a=io(e,n,r);if(a){var c=a.currentTarget,i=c.dataset,u=c.value,s=c.extraState,d=c.noAutoExtract;n&&n.stopPropagation&&n.stopPropagation();var f=i.ccsync,l=i.ccint,p=i.ccdelay,y=i.ccrkey;if(f.startsWith("/")&&(i.ccsync=""+o+f),f.includes("/")){var _=f.split("/")[0];it(_,!1);var v=r.ccKey,m=r.ccUniqueKey;if(d)return void(s&&Rn(s,{calledBy:K,ccKey:v,ccUniqueKey:m,module:_,renderKey:y,delay:p},t));var h=_!==o?so(_):t.state;Rn(uo(f,u,l,h,a.isToggleBool).state,{calledBy:K,ccKey:v,ccUniqueKey:m,module:_,renderKey:y,delay:p},t)}else{if(d)return void(s&&t.setState(s,null,y,p));var C=uo(f,u,l,t.state,a.isToggleBool);t.setState(C.state,null,y,p)}}}var lo=Xe.reducer,po=lo._module_fnNames_,yo=lo._caller,_o=Xe.refStore,vo=Xe.ccClassKey_ccClassContext_,mo=Xe.moduleName_stateKeys_,ho=Xe.store.getState,Co=Xe.moduleName_ccClassKeys_,Ko=Xe.waKey_uKeyMap_,go=Xe.waKey_effectUKeyMap_,So=te,Eo=I,$o=T,wo=Q,bo=J,xo=G,Uo=b,Oo=0;var No=function(){},Io=function(e){return"type of defineEffect "+e+" param must be"},Do=function(e){return"-"===e.watchedKeys?So(e.__$$renderStatus===g?e.__$$compareWaKeys:e.__$$curWaKeys):e.watchedKeys},Ao=function(t,e){function n(e){return So(t.__$$renderStatus===g?t.__$$compareConnWaKeys[e]:t.__$$curConnWaKeys[e])}function r(e){if(c)return n(e);var t=o[e];return"*"===t?mo[e]:"-"===t?n(e):t}var o=t.connect,a=t.connectedModules,c=Array.isArray(o);if(e)return r(e);var i={};return a.forEach(function(e){return i[e]=r(e)}),i};function Ro(n,r,e){("*"===e?mo[r]:e).forEach(function(e){var t=Ko[r+"/"+e];t?t[n]=1:xo("invalid watchedKey["+e+"] of module["+r+"]")})}function Mo(c,e,t){var n;void 0===t&&(t=5);var r=e.isSingle,o=e.ccClassKey,a=e.ccKey,i=void 0===a?"":a,u=e.module,s=e.type,d=e.state,f=e.storedKeys,l=void 0===f?[]:f,p=e.persistStoredKeys,y=void 0!==p&&p,_=e.watchedKeys,v=e.connect,m=void 0===v?{}:v,h=e.tag,C=void 0===h?"":h,K=e.ccOption,g=void 0===K?{}:K,S=u,E=c.ctx,$=Uo(E),w=c.setState,b=c.forceUpdate;!$&&E.ccUniqueKey?(w=E.__boundSetState,b=E.__boundForceUpdate):s!==ye&&(w=c.setState.bind(c),b=c.forceUpdate.bind(c));var x={};x.persistStoredKeys=void 0===g.persistStoredKeys?y:g.persistStoredKeys,x.tag=g.tag||C;var U=function(e,t,n,r){var o;if(e)n&&ro("now the ccClass is singleton, you needn't supply ccKey to instance props, cc will ignore the ccKey["+n+"]"),o=t;else if(n)o=oo(t,n);else{var a=$t(r);o=oo(t,a)}return o}(r,o,i,x.tag);if(x.renderKey=g.renderKey||U,x.storedKeys=function(e,t,n,r){var o=n||r;return o?"*"===o?Object.keys(e).filter(function(e){return!t.includes(e)}):(ut(t,o),o):[]}(d,mo[S],g.storedKeys,l),i&&!o)throw Error("missing ccClassKey while init a cc ins with ccKey["+i+"]");if(0<x.storedKeys.length&&!i)throw Eo(Ke.CC_STORED_KEYS_NEED_CCKEY,$o("ccClassKey["+o+"]"));var O=ho(u),N=_o._state[U]||{},I=Object.assign({},d,N,O),D=So(c.state=I),A=vo[o].connectedState,R=So(m),M={},T=Gr(c,O,u,!0),k={};R.forEach(function(e){return k[e]=no(c,e,!1)});var W=no(c,u),F=no(c,pe),L=Gr(c,ho(pe),pe,!1),j=$e(So(d),mo[S]),P=wo(Co,u);P.includes(o)||P.push(o);function z(e,t){Rn(e,t,c)}function V(e,t,n,r,o,a){z(t,{calledBy:n,module:e,renderKey:o,delay:a,reactCallback:r})}function q(e,t,n,r,o){V(e,t,me,n,r,o)}function H(e,t,n,r,o){"string"==typeof e?q(e,t,n,r,o):V(S,e,ve,t,n,r)}function B(e,t,n){V(S,c.state,he,e,t,n)}var G=[],Y=[],X={effectItems:G,eid_effectReturnCb_:{},effectPropsItems:Y,eid_effectPropsReturnCb_:{}},J={},Q=ao(c.props),Z=((n={type:s,isSingle:r,module:u,ccClassKey:o,ccKey:i,ccUniqueKey:U,renderCount:1,initTime:Date.now(),watchedKeys:_,privStateKeys:j,connect:m,connectedModules:R,__$$onEvents:[],__$$hasModuleState:0<mo[u].length,__$$renderStatus:ge,__$$curWaKeys:{},__$$compareWaKeys:{},__$$compareWaKeyCount:0,__$$nextCompareWaKeys:{},__$$nextCompareWaKeyCount:0,__$$curConnWaKeys:{},__$$compareConnWaKeys:{},__$$compareConnWaKeyCount:{},__$$nextCompareConnWaKeys:{},__$$nextCompareConnWaKeyCount:{},persistStoredKeys:x.persistStoredKeys,storedKeys:x.storedKeys,renderKey:x.renderKey,tag:x.tag,prevProps:Q,props:Q,mapped:{},prevState:I,state:I,moduleState:T,mstate:O,globalState:L,connectedState:M,extra:{},staticExtra:{},refComputed:{},refComputedValue:{},refComputedOri:{},moduleComputed:W,globalComputed:F,connectedComputed:k,moduleReducer:{},connectedReducer:{},reducer:{}}).mapped={},n.stateKeys=D,n.computedDep={},n.computedRetKeyFns={},n.watchDep={},n.watchRetKeyFns={},n.execute=null,n.effectMeta=X,n.retKey_fnUid_={},n.reactSetState=No,n.__boundSetState=w,n.reactForceUpdate=No,n.__boundForceUpdate=b,n.setState=H,n.setModuleState=q,n.forceUpdate=B,n.changeState=z,n.refs=J,n.useRef=function(t){return function(e){return J[t]={current:e}}},n.__$$ccSetState=Zn(c),n.__$$ccForceUpdate=er(c),n.__$$settedList=[],n.__$$prevMoStateVer={},n);c.setState=H,c.forceUpdate=B,Z.initState=function(e){return c.__$$isMounted?xo("ctx.initState can only been called before first render period!"):Ee(d)?(c.state=Object.assign({},d,e,N,T),void(Z.prevState=Z.state=c.state)):xo("state "+Se)};var ee=rr(c,!1,!1,S);if(Z.dispatch=ee,1<t&&(Z.lazyDispatch=rr(c,!0,!1,S),Z.silentDispatch=rr(c,!1,!0,S),Z.dispatchLazy=Z.lazyDispatch,Z.dispatchSilent=Z.silentDispatch,Z.invoke=tr(c),Z.lazyInvoke=tr(c,{isLazy:!0}),Z.silentInvoke=tr(c,{isLazy:!1,isSilent:!0}),Z.invokeLazy=Z.lazyInvoke,Z.invokeSilent=Z.silentInvoke,Z.setGlobalState=function(e,t,n,r){V(pe,e,ve,t,n,r)}),2<t){var te=function(e,t,n,r,o){var a;if("string"==typeof e)return fo.bind(null,((a={})[_e]=e,a.type=o,a.val=t,a.delay=r,a.rkey=n,a),c);fo({type:"val"},c,e)};Z.sync=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=-1),te(e,t,n,r,"val")},Z.syncBool=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=-1),te(e,t,n,r,"bool")},Z.syncInt=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=-1),te(e,t,n,r,"int")},Z.syncAs=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=-1),te(e,t,n,r,"as")},Z.set=function(e,t,n,r){var o;void 0===n&&(n=""),void 0===r&&(r=-1),fo(((o={})[_e]=e,o.type="val",o.val=t,o.delay=r,o.rkey=n,o),c)},Z.setBool=function(e,t,n){var r;void 0===t&&(t=""),void 0===n&&(n=-1),fo(((r={})[_e]=e,r.type="bool",r.delay=n,r.rkey=t,r),c)}}if(3<t&&(Z.emit=function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Lr.apply(Vr,[zr(e)].concat(n))},Z.off=function(e,t){var n=void 0===t?{}:t,r=n.module,o=n.ccClassKey,a=n.ccUniqueKey,c=void 0===a?U:a,i=zr(e);jr(i.name,{module:r,ccClassKey:o,ccUniqueKey:c,identity:i.identity})},Z.on=function(e,t){var n=zr(e),r=n.identity;Fr(S,o,U,n.name,void 0===r?null:r,t)}),4<t){Z.execute=function(e){return Z.execute=e},Z.watch=function(a){return function(e,t,n,r,o){xt(Ce,{type:"watch",refCtx:a,stateKeys:a.stateKeys,retKeyFns:a.watchRetKeyFns,module:a.module,connect:a.connect,dep:a.watchDep},e,t,n,r,o)}}(Z),Z.computed=Xr(Z),Z.lazyComputed=Xr(Z,!0);var ne=function(u,s){return function(e,t,n,r){if(void 0===n&&(n=!0),void 0===r&&(r=!0),"function"!=typeof e)throw Error(Io("first")+" function");var o=t,a=s?n:r;if(null!=t&&!Array.isArray(t))throw Error(Io("second")+" one of them(array, null, undefined)");var c=null;!s&&o&&(c=[],o.forEach(function(e){var t;t=e.includes("/")?e:S+"/"+e,c.push(t),bo(go,t)[U]=1}));var i={fn:e,isProp:s,depKeys:o,moDepKeys:c,eId:Symbol("__autoGen_"+ ++Oo+"__"),compare:n,immediate:a};u.push(i)}};Z.effect=ne(G,!1),Z.effectProps=ne(Y,!0)}var re=Z.moduleReducer,oe=Z.connectedReducer,ae=Z.__$$curConnWaKeys,ce=Z.__$$compareConnWaKeys,ie=Z.__$$compareConnWaKeyCount,ue=Z.__$$nextCompareConnWaKeys,se=Z.__$$nextCompareConnWaKeyCount,de=R.slice();de.includes(u)?xo("module["+u+"] is in belongTo and connect both, it will cause redundant render."):de.push(u);var fe=!1;if(de.forEach(function(o){var e;e=o===u?re:bo(oe,o);var t=m[o];if(t){var n=A[o];"-"===t?(fe=!0,ae[o]={},ce[o]={},ie[o]=0,ue[o]={},se[o]=0,n=Gr(c,n,o)):Ro(U,o,t),M[o]=n}(po[o]||[]).forEach(function(r){e[r]=function(e,t,n){return ee(o+"/"+r,e,t,n)}})}),Z.reducer=yo,"-"===_?(c.state=Gr(c,I,u,fe=!0),Z.state=c.state):Ro(U,u,_),Z.__$$autoWatch=fe,Z.getWatchedKeys=function(){return Do(c.ctx||Z)},Z.getConnectWatchedKeys=function(e){return Ao(c.ctx||Z,e)},$)c.ctx=Z;else{var le=c.ctx;Object.assign(c.ctx,Z,{__$$curWaKeys:le.__$$curWaKeys,__$$compareWaKeys:le.__$$compareWaKeys,__$$compareWaKeyCount:le.__$$compareWaKeyCount,__$$nextCompareWaKeys:le.__$$nextCompareWaKeys,__$$nextCompareWaKeyCount:le.__$$nextCompareWaKeyCount,__$$curConnWaKeys:le.__$$curConnWaKeys,__$$compareConnWaKeys:le.__$$compareConnWaKeys,__$$compareConnWaKeyCount:le.__$$compareConnWaKeyCount,__$$nextCompareConnWaKeys:le.__$$nextCompareConnWaKeys,__$$nextCompareConnWaKeyCount:le.__$$nextCompareConnWaKeyCount})}}var To=Xe.store.getState;var ko=te,Wo=Xe.runtimeVar;function Fo(n,e,t){var r=n.ctx;if(n.__$$isUnmounted=!1,r.__$$isBSe=!(n.__$$isMounted=!1),e){if("function"!=typeof e)throw Error("type of setup must be function");var o=e(r)||{};if(!Ee(o))throw Error("type of setup return result must be an plain json object");(!0===t||!0===Wo.bindCtxToMethod&&!1!==t)&&ko(o).forEach(function(e){var t=o[e];"function"==typeof t&&(o[e]=t.bind(n,r))}),r.settings=o}r.__$$isBSe=!1,r.refComputedValue=It(r.computedRetKeyFns,r.refComputedOri),r.refComputed=no(n,null,!0,!0),function(e){var r=e.ctx,t=r.hasComputedFn,n=r.hasWatchFn,o=r.connect,a=r.module,c=de(a),i=te(o),u=r.state;t&&(rn(r,a,u,u,c,!0,!0),i.forEach(function(e){var t=To(e),n=de(e);rn(r,e,t,t,n,!0,!0)})),n&&(nn(r,a,u,u,c,!0,!0),i.forEach(function(e){var t=To(e),n=de(e);nn(r,e,t,t,n,!0,!0)}))}(n)}var Lo=Xe.moduleName_stateKeys_,jo=Xe.store,Po=jo.getPrevState,zo=jo.getState,Vo=jo.getStateVer,qo=function(e,t){return G("effect: key["+e+"] is invalid, its "+t+" has not been declared in' store!")};function Ho(e,t){function n(a,c,i){return function(e){var t=e.fn,n=e.eId;if(!i||!1!==e.immediate){var r=a[n];r&&r(u);var o=t(u,c);a[n]=o}}}var u=e.ctx,r=u.effectMeta,o=r.effectItems,a=r.eid_effectReturnCb_,c=r.effectPropsItems,i=r.eid_effectPropsReturnCb_,m=u.__$$prevMoStateVer,h=u.__$$settedList,C=u.module;if(t)o.forEach(n(a,!0,!0)),c.forEach(n(i,!0,!0));else{var K=u.prevState,g=e.state,S=[];o.forEach(function(e){var t=e.moDepKeys,n=e.compare,r=e.fn,o=e.eId;if(t){var a=t.length;if(0===a)return;for(var c=function(e){return e.reduce(function(t,e){var n=e.module;return e.keys.forEach(function(e){return t[n+"/"+e]=1}),t},{})}(h),i=!1,u=0;u<a;u++){var s=t[u];if(n){var d=void 0,f=void 0,l=s.split("/"),p=l[0],y=l[1];if(p!==C){var _=Po(p),v=Vo(p);if(m[y]===v[y])continue;if(m[y]=v[y],!_){qo(s,"module["+p+"]");continue}if(!Lo[p].includes(y)){qo(s,"unmoduledKey["+y+"]");continue}d=zo(p),f=_}else d=g,f=K;if(f[y]!==d[y]){i=!0;break}}else if(c[s]){i=!0;break}}i&&S.push({fn:r,eId:o})}else S.push({fn:r,eId:o})}),S.forEach(n(a,!1,!1));var s=u.prevProps,d=u.props,f=[];c.forEach(function(e){var t=e.depKeys,n=e.fn,r=e.eId;if(t){var o=t.length;if(0===o)return;for(var a=!1,c=0;c<o;c++){var i=t[c];if(s[i]!==d[i]){a=!0;break}}a&&f.push({fn:n,eId:r})}else f.push({fn:n,eId:r})}),f.forEach(n(i,!1,!1)),h.length=0}}var Bo=G,Go=I,Yo=T,Xo=P,Jo=k,Qo=Xe.runtimeVar,Zo=Xe.ccClassKey_ccClassContext_,ea=Xe.ccUKey_ref_,ta={};function na(e,t,n,r){function o(){ea[e]=t,n.push(e)}!function(e){void 0===ta[e]?ta[e]=1:ta[e]+=1}(e),r?setTimeout(o,r):o()}function ra(e,t,n,r,o){var a=Zo[n],c=a.ccKeys;Qo.isDebug&&console.log(Xo("register ccKey "+o+" to CC_CONTEXT"),Jo());var i=Xe.isHotReloadMode();if(c.includes(o)){var u=function(){throw Go(Ke.CC_CLASS_INSTANCE_KEY_DUPLICATE,Yo("ccClass:"+n+",ccKey:"+o))};if(i){var s=function(e){return void 0===ta[e]?0:ta[e]}(o);if(t&&0<s)throw Go(Ke.CC_CLASS_INSTANCE_MORE_THAN_ONE,Yo("ccClass:"+n));1<s&&u(),Bo("\n        found ccKey["+r+"] duplicated in hot reload mode, please make sure your ccKey is unique manually,\n        "+Yo("ccClassKey:"+n+" ccKey:"+r+" ccUniqueKey:"+o)+"\n      "),na(o,e,c,600)}else u()}else na(o,e,c);return a}var oa=Xe.waKey_uKeyMap_;function aa(t,e,n,r){var o=!1,a=te(t);a.forEach(function(e){2===t[e]&&(o=!0,delete oa[n+"/"+e][r])}),e<a.length&&(o=!0),o&&lt(n)}function ca(e){var t=e.ctx;if(t.__$$renderStatus=ge,t.__$$autoWatch){var n=t.connectedModules,r=t.connect,o=t.ccUniqueKey,a=t.__$$compareConnWaKeys,c=t.__$$compareConnWaKeyCount;aa(t.__$$compareWaKeys,t.__$$compareWaKeyCount,t.module,o),n.forEach(function(e){"-"===r[e]&&aa(a[e],c[e],e,o)})}}function ia(e){ca(e),e.__$$isMounted=!0,e.__$$isUnmounted=!1;var t=e.ctx,n=t.__$$onEvents;ra(e,t.isSingle,t.ccClassKey,t.ccKey,t.ccUniqueKey),0<n.length&&(n.forEach(function(e){return e.fn.apply(void 0,e.args)}),n.length=0),Ho(e,!0)}function ua(e){ca(e),Ho(e),e.ctx.prevState=e.state}var sa=Xe.ccUKey_ref_,da=Xe.ccUKey_handlerKeys_,fa=Xe.runtimeVar,la=Xe.ccClassKey_ccClassContext_,pa=Xe.handlerKey_handler_;function ya(e,t){fa.isDebug&&console.log(P(t+" unset ref"),k("purple")),delete sa[t];var n=la[e].ccKeys,r=n.indexOf(t);r<0||n.splice(r,1),function(e){void 0===ta[e]?ta[e]=0:ta[e]-=1}(t);var o=da[t];o&&o.forEach(function(e){delete pa[e]})}var _a=te;function va(n,r){function e(e){var t=n[e];"function"==typeof t&&t(r)}Object.getOwnPropertySymbols(n).forEach(e),_a(n).forEach(e)}function ma(e){e.__$$isUnmounted=!0;var t=e.ctx,n=t.ccUniqueKey,r=t.ccClassKey;if(e.__$$isMounted){var o=t.effectMeta,a=o.eid_effectPropsReturnCb_;va(o.eid_effectReturnCb_,t),va(a,t),Pr(n)}ya(r,n)}function ha(e){var t=e.ctx;if(t.__$$renderStatus=g,1!==t.renderCount&&t.__$$autoWatch){t.__$$hasModuleState&&(Object.assign(e.state,t.mstate),e.state=Gr(e,e.state,t.module,!0),t.state=e.state,t.__$$curWaKeys={},t.__$$compareWaKeys=t.__$$nextCompareWaKeys,t.__$$compareWaKeyCount=t.__$$nextCompareWaKeyCount,t.__$$nextCompareWaKeys={},t.__$$nextCompareWaKeyCount=0);var n=t.connect;t.connectedModules.forEach(function(e){"-"===n[e]&&(t.__$$curConnWaKeys[e]={},t.__$$compareConnWaKeys[e]=t.__$$nextCompareConnWaKeys[e],t.__$$compareConnWaKeyCount[e]=t.__$$nextCompareConnWaKeyCount[e],t.__$$nextCompareConnWaKeys[e]={},t.__$$nextCompareConnWaKeyCount[e]=0)})}}var Ca=function(e){return"CC("+e+")"},Ka=we,ga=oe,Sa=fe,Ea=Xe.runtimeVar,$a=k,wa=P,ba=function(e){return Error("can not defined setup both in register options and class body --verbose:"+e)};function xa(e,t){var n=void 0===e?{}:e,r=n.module,o=void 0===r?V:r,a=n.state,u=void 0===a?{}:a,c=n.watchedKeys,s=void 0===c?"-":c,i=n.storedKeys,d=void 0===i?[]:i,f=n.setup,l=void 0===f?null:f,p=n.persistStoredKeys,y=n.connect,_=void 0===y?{}:y,v=n.tag,m=n.lite,h=n.isPropsProxy,C=void 0!==h&&h,K=n.isSingle,g=void 0!==K&&K,S=n.renderKeyClasses,E=n.__checkStartUp,$=void 0===E||E,w=n.compareProps,b=void 0===w||w,x=n.__calledBy;void 0===t&&(t="");try{var U=Or(o,t,S,A,Ka(s),d,_,$,x),O=U._module,N=U._ccClassKey,I=U._connect;return function(n){if(n.prototype&&n.prototype.$$attach)throw Error("register a cc class is prohibited!");var e=!1===C?n:D.Component,i=e.$$setup,t=function(c){function e(e,t){var n;try{n=c.call(this,e,t)||this;var r=Sa(u),o=Object.assign(n.state||{},r);n.$$attach=n.$$attach.bind(lr(n));var a=Object.assign({},e,{isSingle:g,module:O,tag:v,state:o,type:A,watchedKeys:s,ccClassKey:N,connect:I,storedKeys:d,persistStoredKeys:p});if(Mo(lr(n),a,m),n.ctx.reactSetState=ar(lr(n)),n.ctx.reactForceUpdate=cr(lr(n)),l&&(n.$$setup||i))throw ba("ccUniqueKey "+n.ctx.ccUniqueKey);C||(n.$$setup&&(n.$$setup=n.$$setup.bind(lr(n))),Fo(lr(n),l||n.$$setup||i,!1))}catch(e){zt(e)}return n}fr(e,c);var t=e.prototype;return t.shouldComponentUpdate=function(e,t){var n=this.ctx.childRef;if(n&&n.shouldComponentUpdate)return n.shouldComponentUpdate(e,t);if(c.prototype.shouldComponentUpdate)return c.prototype.shouldComponentUpdate.call(this,e,t);var r=!!b&&ga(this.props,e);return this.state!==t||r},t.$$attach=function(e){var t=this.ctx;if(((t.childRef=e).ctx=t).reactSetState=e.setState.bind(e),t.reactForceUpdate=e.forceUpdate.bind(e),e.setState=t.setState,e.forceUpdate=t.forceUpdate,t.__$$ccSetState=Zn(e,this),t.__$$ccForceUpdate=er(e),e.state||(e.state={}),Object.assign(e.state,this.state),ha(e),e.$$setup&&(e.$$setup=e.$$setup.bind(e)),l&&(e.$$setup||i))throw ba("ccUniqueKey "+t.ccUniqueKey);Fo(e,l||e.$$setup||i,!1)},t.componentDidMount=function(){c.prototype.componentDidMount&&c.prototype.componentDidMount.call(this),ia(this)},t.componentDidUpdate=function(){c.prototype.componentDidUpdate&&c.prototype.componentDidUpdate.call(this),ua(this)},t.componentWillUnmount=function(){c.prototype.componentWillUnmount&&c.prototype.componentWillUnmount.call(this),ma(this)},t.render=function(){return this.ctx.prevProps=this.ctx.props,this.ctx.props=this.props,Ea.isDebug&&console.log(wa("@@@ render "+Ca(N)),$a()),!1===C?(ha(this),c.prototype.render.call(this)):D.createElement(n,{ctx:this.ctx,$$attach:this.$$attach})},e}(e);return t.displayName=N===B?"CcDispatcher":Ca(N),t}}catch(e){zt(e)}}function Ua(e){var t=function(e){function t(){return e.apply(this,arguments)||this}return fr(t,e),t.prototype.render=function(){return this.props.children||D.createElement("span",{style:{display:"none"}})},t}(D.Component);if(Xe.refs[B]){if(!Xe.isHotReloadMode())throw Error("CcDispatcher can only be initialize one time");Y("hot reload mode, CC_DISPATCHER existed")}var n=e||t;return xa({isSingle:!0,__checkStartUp:!1,__calledBy:"cc"},B)(n)}var Oa=Ee,Na=te;function Ia(e,t){if(!Oa(e))throw Error(t+" "+Se)}function Da(e){if(!Oa(e))throw Error("StartupOption.moduleSingleClass "+Se);!function(t,n){Object.keys(n).forEach(function(e){t[e]=n[e]})}(Xe.moduleSingleClass,e)}function Aa(e){if(0<e.length){var o=Xe.plugins;o.length=0,Ft.forEach(function(e){return Lt[e].length=0});var a={};e.forEach(function(e){if(o.push(e),!e.install)throw Error("a plugin must export install handler!");var t=e.install(Pt),n=Error("plugin.install must return result:{name:string, options?:object}");if(!t)throw n;var r=t.name;if(!r)throw n;if(a[r])throw Error("pluginName["+r+"] duplicate");a[r]=1}),Xe.pluginNameMap=a}}var Ra=function(e){var t=document.querySelector("#"+c);if(!t){(t=document.createElement("div")).id=c;var n=t.style;n.position="fixed",n.left=0,n.top=0,n.display="none",n.zIndex=-888666,document.body.appendChild(t)}r.render(D.createElement(e),t)},Ma=!1;function Ta(e,r){void 0===e&&(e=!1),ee(Xe.event_handlers_),ee(Xe.ccUKey_handlerKeys_);var o=Xe.ccClassKey_ccClassContext_,t=Xe.ccUKey_ref_;if(Object.keys(o).forEach(function(e){var t=o[e],n=[];0<r.length&&t.ccKeys.forEach(function(e){r.includes(e)&&n.push(e)}),ee(t.ccKeys,n)}),ee(Xe.handlerKey_handler_),ee(t,[B].concat(r)),e){var n=Xe.computed,a=Xe.watch,c=n._computedValue,i=a._watchDep;te(Xe.store._state).forEach(function(e){e!==q&&(c[e]&&(Xe.computed._computedDep[e]={retKey_fn_:{},retKey_lazy_:{},stateKey_retKeys_:{},retKey_stateKeys_:{},fnCount:0},Rt(e,n._computedRaw[e])),i[e]&&(i[e]={retKey_fn_:{},retKey_lazy_:{},stateKey_retKeys_:{},retKey_stateKeys_:{},fnCount:0},Wt(e,a._watchRaw[e])))})}}function ka(){var n=Xe.ccUKey_ref_,r=[];return te(n).forEach(function(e){var t=n[e];t&&t.ctx.type===x&&!0!==t.props.__$$regDumb&&!0===t.__$$isMounted&&0==t.__$$isUnmounted&&r.push(e)}),r}function Wa(){ee(Xe.globalStateKeys);var e=te(Xe.moduleName_isConfigured_).concat([V,q,pe,a]);ee(Xe.reducer._reducer,e),ee(Xe.store._state,e,{}),ee(Xe.computed._computedDep,e),ee(Xe.computed._computedValue,e),ee(Xe.watch._watchDep,e),ee(Xe.middlewares),ee(Xe.waKey_uKeyMap_),be={module:{computed:{},watch:{}},ref:{computed:{},watch:{},effect:{}}};var t=ka();return Ta(!1,t),t}function Fa(e){void 0===e&&(e=!1),Xe.info.latestStartupTime=Date.now();var t=[];return Xe.isStartup?Xe.isHotReloadMode()?e?(console.warn("attention: make sure [[clearContextIfHot]] been called before app rendered!"),Ma=!0,t=Wa()):(Ma?Ma=!1:(function(){if(!Xe.refs[B]){var e=Ua();Ra(e)}}(),t=ka(),Ta(Xe.reComputed,t)),t):(console.warn("clear failed because of not running under hot reload mode!"),t):(Ma=!0,t)}var La=ae,ja=fe;function Pa(e){var t=e.props,n=La(t.register),r=n.module,o=n.renderKeyClasses,a=n.tag,c=n.lite,i=n.compareProps,u=void 0===i||i,s=n.setup,d=n.bindCtxToMethod,f=n.watchedKeys,l=void 0===f?"-":f,p=n.connect,y=void 0===p?{}:p,_=n.isSingle,v=n.storedKeys,m=void 0===v?[]:v,h=ja(n.state),C=t.ccClassKey,K=t.ccKey,g=t.ccOption,S=void 0===g?{}:g,E=l,$=C,w=y;if(!0!==t.__$$regDumb){var b=Or(r,C,o,x,we(l),m,y,!0);E=l,$=b._ccClassKey,w=b._connect}Mo(e,{isSingle:_,ccKey:K,connect:w,state:h,module:r,storedKeys:m,watchedKeys:E,tag:a,ccClassKey:$,ccOption:S,type:x},c),e.ctx.reactSetState=ar(e),e.ctx.reactForceUpdate=cr(e),e.__$$compareProps=u,Fo(e,s,d)}var za=Y,Va=re,qa="";function Ha(e,t){var n=void 0===e?{}:e,r=n.store,o=void 0===r?{}:r,a=n.reducer,c=void 0===a?{}:a,i=n.init,u=void 0===i?null:i,s=n.computed,d=void 0===s?{}:s,f=n.watch,l=void 0===f?{}:f,p=n.moduleSingleClass,y=void 0===p?{}:p,_=void 0===t?{}:t,v=_.plugins,m=void 0===v?[]:v,h=_.middlewares,C=void 0===h?[]:h,K=_.isStrict,g=void 0!==K&&K,S=_.isDebug,E=void 0!==S&&S,$=_.errorHandler,w=void 0===$?null:$,b=_.isHot,x=_.bindCtxToMethod,U=void 0!==x&&x,O=_.computedCompare,N=void 0===O||O,I=_.watchCompare,D=void 0===I||I,A=_.watchImmediate,R=void 0!==A&&A,M=_.alwaysGiveState,T=void 0===M||M,k=_.reComputed,W=void 0===k||k;try{throw Error()}catch(e){var F=function(e){function t(e,t){for(var n=0;n<o;n++)if(r[n].includes(e)){a=r[n+t];break}}var n=Xe.info,r=e.stack.split("\n"),o=r.length,a="";function c(){return Fa(Xe.isHot=!0)}t("startup",2),a||t("runConcent",0);var i=Date.now(),u=[],s=!0;if(qa)if(qa!==a){var d="invalid run api call!(it can only be called once, changing 'call run' line location in HMR will cause this error also, \n    try refresh browser to reload your app to avoid this tip)";if(i-n.latestStartupTime<1e3)throw Error(d);se()?(u=c(),qa=a):(X(d),s=!1)}else u=c();else qa=a,n.firstStartupTime=i,n.latestStartupTime=i;return{canStartup:s,ccFragKeys:u}}(e),L=F.ccFragKeys;if(!F.canStartup)return;try{console.log("%c window.name:"+window.name,"color:green;border:1px solid green"),za("cc version "+Xe.info.version),void 0!==b&&(Xe.isHot=b),Xe.reComputed=W,Xe.errorHandler=w;var j=Xe.runtimeVar;if(j.alwaysGiveState=T,j.isStrict=g,j.isDebug=E,j.computedCompare=N,j.watchCompare=D,j.watchImmediate=R,j.bindCtxToMethod=U,Da(y),function(e){Ia(e,"state"),delete e[H],delete e[q],void 0===e[pe]&&(e[pe]={}),void 0===e[V]&&(e[V]={});for(var t=Na(e),n=t.length,r=0;r<n;r++){var o=t[r];yt(o,e[o])}}(o),function(t){Ia(t,"reducer"),void 0===t[V]&&(t[V]={}),void 0===t[pe]&&(t[pe]={}),Na(t).forEach(function(e){return gt(e,t[e])})}(c),function(t){Ia(t,"computed"),Na(t).forEach(function(e){return Rt(e,t[e])})}(d),function(t){Ia(t,"watch"),Object.keys(t).forEach(function(e){return Wt(e,t[e])})}(l),function(n){if(n){if(!Oa(n))throw Error("init "+Se);Na(n).forEach(function(t){it(t,!1);var e=n[t];e&&Promise.resolve().then(e).then(function(e){or(t)(e)})}),Xe.init._init=n}}(u),function(e){if(0<e.length){var t=Xe.middlewares;t.length=0,e.forEach(function(e){return t.push(e)})}}(C),!Xe.refs[B]){var P=Ua();Ra(P)}var z=function(e){Va("CC_CONTEXT",Xe,e),Va("ccc",Xe,e),Va("cccc",Xe.computed._computedValue,e),Va("sss",Xe.store._state,e)};window.mcc?setTimeout(function(){z(window.mcc[ie()])},1200):z(),Xe.isStartup=!0,Aa(m),L.forEach(function(e){var t=Xe.ccUKey_ref_[e];ma(t),Pa(t),ia(t)})}catch(e){if(!w)throw e;w(e)}}}function Ba(e){throw Error("[[run]]: param error, "+e+" "+Se)}var Ga=Ee,Ya=te,Xa=b,Ja=fe;function Qa(e,t){var n=ae(e);return delete n.__checkStartUp,delete n.__calledBy,xa(n,t)}var Za=oe,ec=D.createElement("span",{style:{display:"none"}}),tc=function(r){function e(e,t){var n;return Pa(lr(n=r.call(this,e,t)||this)),n}fr(e,r);var t=e.prototype;return t.componentDidMount=function(){ia(this)},t.shouldComponentUpdate=function(e,t){var n=!!this.__$$compareProps&&Za(ao(e),ao(this.props));return this.state!==t||n},t.componentDidUpdate=function(){ua(this)},t.componentWillUnmount=function(){r.prototype.componentWillUnmount&&r.prototype.componentWillUnmount.call(this),ma(this)},t.render=function(){var e=this.props;this.ctx.prevProps=this.ctx.props,this.ctx.props=ao(e);var t=e.render,n=t||e.children;if("function"==typeof n){ha(this);var r=e.register,o=void 0===r?{}:r,a=this.ctx;return!0!==e.__$$regDumb&&o.mapProps?(a.mapped=o.mapProps(a)||{},n(a.mapped)||ec):n(a)||ec}if(D.isValidElement(n))throw Error("CcFragment's children can not b a react dom ");return n},e}(D.Component);function nc(e,t){var n=ae(e),r=n.renderKeyClasses,o=n.module,a=n.watchedKeys,c=void 0===a?"-":a,i=n.storedKeys,u=n.render,s=n.connect,d=void 0===s?{}:s,f=we(c),l=Or(o,t,r,x,f,i,d,!0),p=l._ccClassKey,y=l._connect;function _(t){return function(e){return n.props=e,function(t,e){var n=e.mapProps,r=e.props,o=void 0===r?{}:r,a={__$$regDumb:!0,props:o,ccOption:o.ccOption,ccClassKey:e.ccClassKey,render:function(e){return n?(e.mapped=n(e),D.createElement(t,e.mapped)):D.createElement(t,e)},ccKey:o.ccKey,register:e};return D.createElement(tc,a)}(t,n)}}return n.module=l._module,n.watchedKeys=c,n.ccClassKey=p,n.connect=y,u?_(u):function(e){return _(e)}}var rc=Xe.ccUKey_ref_,oc=1;function ac(e,t,n){this.setState=t,this.forceUpdate=t,this.state=e,this.isFirstRendered=!0,this.props=n}function cc(e,t,n,r,o,a,c,i,u,s){var d=n||fe(r),f=o.bindCtxToMethod,l=o.watchedKeys,p=void 0===l?"-":l,y=o.storedKeys,_=void 0===y?[]:y,v=o.connect,m=void 0===v?{}:v,h=o.setup,C=o.lite;oc+=1;var K=Or(o.module,s,o.renderKeyClasses,ye,we(p),_,m,!0),g=K._module,S=K._ccClassKey,E=K._connect,$=e||new ac(a,c,i),w=Object.assign({},o,{module:g,watchedKeys:p,state:d,type:ye,ccClassKey:S,connect:E,ccOption:i.ccOption});$.props=i,Mo($,w,C),$.ctx.reactSetState=ar($),$.ctx.reactForceUpdate=cr($);var b=$.ctx;return b.props=i,b.extra=u,Fo($,h,f),t.current=$.ctx.ccUniqueKey,b.useRef=function(e){var t=D.useRef(null);return b.refs[e]=t},$}function ic(e,t){e.__boundSetState=t,e.__boundForceUpdate=t}var uc="react version is LTE 16.8";function sc(e,t){var n=ae(e),r=n.state,o=void 0===r?{}:r,a=n.props,c=void 0===a?{}:a,i=n.mapProps,u=n.layoutEffect,s=void 0!==u&&u,d=n.extra,f=void 0===d?{}:d,l=D.useState;if(!l)throw Error(uc);function p(e){return cc(e,g,m,o,n,C,K,c,f,t)}var y,_=oc,v=l(_)[0]===_,m=v?fe(o):0,h=l(m),C=h[0],K=h[1],g=D.useRef(null);if(v)y=p();else if(y=rc[g.current]){var S=y.ctx;S.prevProps=S.props,y.props=S.props=c,S.extra=f}else y=p();var E=y.ctx,$=s?D.useLayoutEffect:D.useEffect;if($(function(){y.isFirstRendered||ua(y),ic(E,K)}),$(function(){return!1===y.isFirstRendered?p(y):y.isFirstRendered=!1,ic(E,K),ia(y),function(){ma(y)}},[]),i){var w=i(E);if(!Ee(w))throw Error("mapProps ret "+Se);E.mapped=w}return ha(y),E}function dc(){throw Error("api doc: cc.setState(module:string, state:object, renderKey:string, delayMs?:number, skipMiddleware?:boolean, throwError?:boolean)")}function fc(e){return Xe.store.getState(e)}var lc=Xe.computed._computedValue;var pc=Xe.ccUKey_ref_,yc=Xe.ccClassKey_ccClassContext_;function _c(){var n=[],r=Xe.ccUKey_ref_;return te(r).forEach(function(e){var t=r[e];t&&!t.__$$isUnmounted&&n.push(t)}),n}function vc(e,t,n){var r=void 0===n?{}:n,o=r.state,a=r.reducer,c=r.computed,i=r.watch,u=r.init;if(!Xe.isStartup)throw Error("cc is not startup yet");ct(e),it(t,!1);var s=Xe.moduleName_stateFn_[t];if(!s)throw Error("target module["+t+"] state must be a function when use cloneModule");var d=s();Object.assign(d,fe(o));var f=dr(Xe.reducer._reducer[t]||{},e);a&&Object.assign(f,dr(a,e));var l=Xe.computed._computedRaw[t]||{};c&&Object.assign(l,c);var p=Xe.watch._watchRaw[t]||{};i&&Object.assign(p,i);var y=Xe.init._init[t];u&&(y=u);var _={state:d,reducer:f,computed:l,watch:p};y&&(_.init=y),sr(e,_)}function mc(t,e){function r(e,t){var n=t.state,r=t.reducer,o=void 0===r?{}:r,a=t.watch,c=t.computed,i=t.init,u=t.isClassSingle;if(s.store[e])throw Error("run api error: module"+e+" duplicate");s.store[e]=Ja(n),"function"==typeof n&&(Xe.moduleName_stateFn_[e]=n),s.reducer[e]=o,a&&(s.watch[e]=a),c&&(s.computed[e]=c),i&&(s.init[e]=i),s.moduleSingleClass[e]=!0===u}void 0===t&&(t={}),void 0===e&&(e={}),Ga(t)||Ba("store"),Ga(e)||Ba("options");var s={store:{},reducer:{},watch:{},computed:{},init:{},moduleSingleClass:{}};Ya(t).forEach(function(e){return r(e,t[e])}),tt.forEach(function(e){var t=e.module,n=e.config;Y("configure pending module["+t+"]"),r(t,n)}),tt.length=0,Xa(s.init)&&(s.init=null),Ha(s,e)}function hc(e,t){return Qa({connect:e},t)}function Cc(e,t){return nc({connect:e},t)}function Kc(e,o){var a=ae(e);function t(n){var e=a.memo,t=void 0===e||e;function r(){return function(e){a.props=e;var t=sc(a,o);return D.createElement(n,a.mapProps?t.mapped:t)}}return delete a.memo,t&&D.memo?D.memo(r()):r()}"function"==typeof a.state&&(a.state=a.state());var n=a.render;return n?t(n):function(e){return t(e)}}function gc(e,t,n,r,o){void 0===o&&(o=!1);try{_t().ctx.setGlobalState(e,t,n,r)}catch(e){if(o)throw e;G(e.message)}}function Sc(e,t,n,r,o,a){void 0===r&&(r=-1),void 0===a&&(a=!1),void 0===e&&void 0===t&&dc(),"string"!=typeof e&&dc(),Tn(e,t,n,r,o)}function Ec(e,t,n,r){_t().ctx.set(e,t,n,r)}function $c(e,t){if(!e.includes("/"))throw Error("keyPath must start with module");var n=e.split("/"),r=fc(n[0]);return uo(e,t,!1,r,!1).state}function wc(e){return Tc[e].connectedState||{}}function bc(e){return e?lc[e]:lc}function xc(e){if(void 0===e)throw Error("api doc: cc.emit(event:string|{name:string, identity?:string, ctx?:boolean}, ...args)");try{for(var t,n=_t(),r=arguments.length,o=Array(1<r?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];(t=n.ctx).emit.apply(t,[e].concat(o))}catch(e){G(e)}}function Uc(e,t){try{_t().ctx.off(e,t)}catch(e){if(t.throwError)throw e;G(e.message)}}function Oc(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];(function(e){var n=[],t=yc[e];return t&&t.ccKeys.forEach(function(e){var t=pc[e];t&&n.push(t)}),n})(e).forEach(function(e){var t;e.__$$isUnmounted||e.ctx.execute&&(t=e.ctx).execute.apply(t,n)})}function Nc(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];_c().forEach(function(e){var t;e.ctx.execute&&(t=e.ctx).execute.apply(t,n)})}function Ic(e,t,n,r){return{fn:e,depKeys:t,compare:n,sort:r||Qc++}}function Dc(e,t,n,r){return{fn:e,depKeys:t,compare:n,lazy:!0,sort:r||Qc++}}function Ac(e,t,n){return void 0===t&&(t=!0),{fn:function(){return e},depKeys:[],compare:t,sort:n||Qc++}}function Rc(e,t,n,r,o){return{fn:e,depKeys:t,compare:n,immediate:r,sort:o||Qc++}}function Mc(e,t,n,r){return{fn:e,depKeys:t,compare:n,immediate:!0,sort:r||Qc++}}var Tc=Xe.ccClassKey_ccClassContext_,kc=Qa,Wc=nc,Fc=sr,Lc=fc,jc=Xe.store.getGlobalState,Pc=Kt,zc=Xe,Vc=Ua,qc=_c,Hc=Xe.reducer._caller,Bc=Fa,Gc=tc,Yc=u,Xc=Xe.store.appendState,Jc=sc,Qc=1,Zc={cloneModule:vc,emit:xc,off:Uc,connect:hc,connectDumb:Cc,register:kc,registerDumb:Wc,registerHookComp:Kc,configure:Fc,dispatch:Pc,run:mc,setGlobalState:gc,setState:Sc,set:Ec,setValue:$c,getGlobalState:jc,getState:Lc,getComputed:bc,getConnectedState:wc,ccContext:zc,createDispatcher:Vc,execute:Oc,executeAll:Nc,getRefs:qc,reducer:Hc,clearContextIfHot:Bc,CcFragment:Gc,cst:Yc,appendState:Xc,useConcent:Jc,bindCcToMcc:ei,defComputed:Ic,defLazyComputed:Dc,defComputedVal:Ac,defWatch:Rc,defWatchImmediate:Mc};function ei(e){if(!ni)throw Error("current env is not multi concent ins mode");if(ni[e])throw Error("ccNamespace["+e+"] already existed in window.mcc");!function(e){ce=e}(e),re(e,Zc,ni)}function ti(){var e=ce?window.mcc[ce]:window.cc;if(e&&e.ccContext&&e.ccContext.info){var t=e.ccContext.info.version,n=zc.info.version;if(t!==n)throw Error("a existed version concent "+t+" is different with current about to import concent "+n+", \n        it may caused by some of your concent-eco-module with older version concent, please reinstall them (concent-*** module)")}}var ni=window.mcc;ni?setTimeout(function(){if(!ie())throw Error("detect window.mcc, but user forget call bindCcToMcc in bundle entry");ti()},1e3):(ti(),re("cc",Zc)),e.cloneModule=vc,e.run=mc,e.connect=hc,e.connectDumb=Cc,e.register=kc,e.registerDumb=Wc,e.registerHookComp=Kc,e.configure=Fc,e.setGlobalState=gc,e.setState=Sc,e.set=Ec,e.setValue=$c,e.getState=Lc,e.getGlobalState=jc,e.getConnectedState=wc,e.getComputed=bc,e.emit=xc,e.off=Uc,e.dispatch=Pc,e.ccContext=zc,e.createDispatcher=Vc,e.execute=Oc,e.executeAll=Nc,e.getRefs=qc,e.reducer=Hc,e.clearContextIfHot=Bc,e.CcFragment=Gc,e.cst=Yc,e.appendState=Xc,e.useConcent=Jc,e.defComputed=Ic,e.defLazyComputed=Dc,e.defComputedVal=Ac,e.defWatch=Rc,e.defWatchImmediate=Mc,e.bindCcToMcc=ei,e.default=Zc,Object.defineProperty(e,"__esModule",{value:!0})});
