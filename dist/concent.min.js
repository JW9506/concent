!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["exports","react","react-dom"],t):t(e.concent={},e.React,e.ReactDOM)}(this,function(e,I,r){"use strict";I=I&&I.hasOwnProperty("default")?I.default:I,r=r&&r.hasOwnProperty("default")?r.default:r;var t,n,o,m={$$default:[]},pe="$$global",V="$$default",q="$$cc",H="$$concent_void_module_624313307",a="$$CONCENT_ROUTER",A="$$CcClass",x="$$CcFrag",ye="$$CcHook",h="$$Cc",B="$$Dispatcher",c="__cc_dispatcher_container_designed_by_zzk_qq_is_624313307__",_e=Symbol("__for_sync_param_ccsync__"),U=10,O=11,N=13,T="dispatch",ve="setState",me="setModuleState",he="forceUpdate",w="invoke",K="sync",C="module",Ce="ref",W="computed",F="watch",Ke={CC_MODULE_NAME_DUPLICATE:1002,CC_MODULE_NOT_FOUND:1012,CC_DISPATCH_STRING_INVALID:1013,CC_DISPATCH_PARAM_INVALID:1014,CC_MODULE_NOT_CONNECTED:1015,CC_CLASS_KEY_DUPLICATE:1100,CC_CLASS_INSTANCE_KEY_DUPLICATE:1200,CC_CLASS_INSTANCE_MORE_THAN_ONE:1205,CC_STORED_KEYS_NEED_CCKEY:1207,CC_REDUCER_NOT_A_FUNCTION:1503},i=((t={})[Ke.CC_MODULE_NAME_DUPLICATE]="module name duplicate!",t[Ke.CC_MODULE_NOT_FOUND]="module not found!",t[Ke.CC_DISPATCH_STRING_INVALID]="when type param is string, it must be one of these format: (fnName)„ÄÅ(moduleName)/(fnName)",t[Ke.CC_DISPATCH_PARAM_INVALID]="dispatch param type is invalid, it must be string or object",t[Ke.CC_MODULE_NOT_CONNECTED]="module not been connected by ref",t[Ke.CC_CLASS_INSTANCE_KEY_DUPLICATE]="props.ccKey duplicate",t[Ke.CC_CLASS_INSTANCE_MORE_THAN_ONE]="ccClass is declared as singleton, trying new another one instance is not allowed! ",t[Ke.CC_STORED_KEYS_NEED_CCKEY]="you must explicitly specify a ccKey for ccInstance when set storedKeys!",t[Ke.CC_CLASS_KEY_DUPLICATE]="ccClassKey duplicate!",t[Ke.CC_REDUCER_NOT_A_FUNCTION]="reducer must be a function!",t),u=Object.freeze({MODULE_GLOBAL:pe,MODULE_DEFAULT:V,MODULE_CC:q,MODULE_VOID:H,MODULE_CC_ROUTER:a,CC_CLASS:A,CC_FRAGMENT:x,CC_HOOK:ye,CC_PREFIX:h,CC_DISPATCHER:B,CC_DISPATCHER_BOX:c,CCSYNC_KEY:_e,SIG_FN_START:U,SIG_FN_END:O,SIG_FN_QUIT:12,SIG_FN_ERR:N,SIG_MODULE_CONFIGURED:14,SIG_STATE_CHANGED:15,RENDER_NO_OP:1,RENDER_BY_KEY:2,RENDER_BY_STATE:3,FOR_ONE_INS_FIRSTLY:1,FOR_ALL_INS_OF_A_MOD:2,EFFECT_AVAILABLE:1,EFFECT_STOPPED:0,DISPATCH:T,SET_STATE:ve,SET_MODULE_STATE:me,FORCE_UPDATE:he,INVOKE:w,SYNC:K,CATE_MODULE:C,CATE_REF:Ce,FN_CU:W,FN_WATCH:F,ERR:Ke,ERR_MESSAGE:i}),s=((n={})[pe]={},n[V]={},n[q]={},n),d=((o={})[pe]={},o[V]={},o[q]={},o),f={},l={},L={_computedValueOri:d,_computedValue:s,_computedRaw:l,_computedDep:f,getRootComputedValue:function(){return s},getRootComputedDep:function(){return f},getRootComputedRaw:function(){return l}},p={},y={},g={_watchRaw:y,_watchDep:p,getRootWatchDep:function(){return p},getRootWatchRaw:function(){return y}},_={alwaysGiveState:!0,isStrict:!1,isDebug:!1,computedCompare:!0,watchCompare:!0,watchImmediate:!1,bindCtxToMethod:!1},v={},S=Symbol("cuk"),E="1",ge="2",Se="is not a plain json object!",$="should be an string array or *!",b=console.error;function D(e){return null!=e&&0<re(e).length}function R(e){return!D(e)}function Ee(e,t){if(void 0===t&&(t=!1),!e)return!1;var n="object"==typeof e;if(n){var r=Array.isArray(e);return t?r:n&&!r}return!1}function M(e,t){var n="";n="string"==typeof e?e:i[e]||"",t&&(n+=t),n||(n="undefined message for code:"+e);var r=Error(n);return r.code=e,r}function j(e,t,n,r,o,a,c){var i;return(i={})[S]=1,i.needCompute=n,i.fn=r,i.newState=o,i.oldState=a,i.fnCtx=c,i.isLazy=e,i.result=t,i}function k(e,t){return e+"$"+t}function P(e){return e?" --verbose-info: "+e:""}function z(e){return void 0===e&&(e="green"),"color:"+e+";border:1px solid "+e}function G(e){return"%c"+e}var Y=function(e){return"------------ CC "+e+" ------------"};function X(e){b(Y("WARNING")),e instanceof Error?(b(e.message),b(e.stack)):b(e)}function J(e){console.log(Y("TIP")),console.log("%c"+e,"color:green;border:1px solid green;")}function Q(e){if(b(Y("WARNING")),b(e),_.isStrict)throw e}function Z(e,t,n){void 0===n&&(n={});var r=e[t];return r||(r=e[t]=n),r}function ee(e,t){return Z(e,t,[])}function te(e){void 0===e&&(e=52);var t=Math.random();return parseInt(t*e)}function ne(t,n,r){if(void 0===n&&(n=[]),Array.isArray(t)){var o=[];n.forEach(function(e){t.includes(e)&&o.push(e)}),t.length=0,o.forEach(function(e){return t.push(e)})}else Object.keys(t).forEach(function(e){n.includes(e)||(r?t[e]=r:delete t[e])})}function re(e){return Object.keys(e)}function oe(e){var t=null;return e&&(e.currentTarget&&e.type?t=e:e.nativeEvent&&e.target&&(e.currentTarget=e.target,t=e)),t}function ae(t,n,e){function r(e){e?e[t]=n:window[t]=n}window?r(e):setTimeout(function(){r(e)},3e3)}function ce(e,t){for(var n in e)if(!(n in t))return!0;for(var r in t)if(e[r]!==t[r])return!0;return!1}function $e(e,t){var n=[];return e.forEach(function(e){t.includes(e)||n.push(e)}),n}function ie(e){return void 0===e&&(e={}),"string"==typeof e?{module:e}:Object.assign({module:V},e)}var ue="";function se(){return ue}function de(){var t=null;return{commit:function(e){t||(t={}),Object.assign(t,e)},clear:function(){return t=null},getFnCommittedState:function(){return t}}}function fe(){var e=!1;return!window||("previewFrame"===window.name||window.__SANDBOX_DATA__||window.BrowserFS)&&(e=!0),e}function le(e){return{payload:null,renderKey:"",delay:-1,module:e,fnName:""}}function we(e){void 0===e&&(e={});var t="function"==typeof e?e():e;if(!Ee(t))throw Error("state "+Se);return t}function be(e,t){var n=t.split(".");return function e(t,n,r,o){var a=n[o];return r===o?t[a]:e(t[a],n,r,++o)}(e,n,n.length-1,0)}function xe(e){return"-"===e?"*":e}var Ue={module:{computed:{},watch:{}},ref:{computed:{},watch:{},effect:{}}};function Oe(e,t,n){var r=t[e];return{retKey:e,fn:r.fn,depKeys:r.depKeys,isLazy:n,sort:r.sort}}var Ne=function(e,t){return e.sort-t.sort};function De(e,t,n,r,o,a,c,i){var u=r[o],s=[];if(!u)return{pickedFns:s,setted:[],changed:[]};var d=u.retKey_fn_,f=u.retKey_lazy_,l=u.stateKey_retKeys_,p=u.fnCount;if(e){var y=re(d),_=re(c),v=_;return"computed"===n?{pickedFns:y.map(function(e){return Oe(e,d,f[e])}).sort(Ne),setted:_,changed:v}:(y.forEach(function(e){var t=d[e];t.immediate&&s.push({retKey:e,fn:t.fn,depKeys:t.depKeys,sort:t.sort})}),s.sort(Ne),{pickedFns:s,setted:_,changed:v})}var m=function(n,r){var o=[],a=[];return re(r).forEach(function(e){var t=r[e];void 0!==t&&(a.push(e),t!==n[e]&&o.push(e))}),{changed:o,setted:a}}(a,c),h=m.setted,C=m.changed;if(0===h.length)return{pickedFns:s,setted:[],changed:[]};var K=h.join(",")+"|"+C.join(",")+"|"+o,g=Ue[t][n],S=i?Z(g,i):g,E=S[K];return E?{pickedFns:E.map(function(e){return Oe(e,d,f[e])}),setted:h,changed:C}:(function(s,o,d,f,a,l,c){if(0===o.length)return;var e=a["*"];if(e){var i=0<d.length;e.forEach(function(e){var t=f[e],n=t.fn,r=t.compare,o=t.depKeys,a=t.sort,c={retKey:e,fn:n,depKeys:o,isLazy:l[e],sort:a};r?i&&s.push(c):s.push(c)})}s.length<c&&function(){var u={},e=o.length,t=function(e){var i=o[e],t=a[i];return t?(t.forEach(function(e){if(!u[e]){var t=f[e],n=t.fn,r=t.compare,o=t.depKeys,a=t.sort,c=!0;r&&!d.includes(i)&&(c=!1),c&&(u[e]=!0,s.push({retKey:e,fn:n,depKeys:o,isLazy:l[e],sort:a}))}}),s.length===c?"break":void 0):"continue"};e:for(var n=0;n<e;n++){var r=t(n);switch(r){case"continue":continue;case"break":break e}}}();s.sort(Ne)}(s,h,C,d,l,f,p),S[K]=s.map(function(e){return e.retKey}),{pickedFns:s,setted:h,changed:C})}function Ie(e,t,n){var r=t[n];return void 0!==r&&(e[n]=r,!0)}function Ae(t,n,e,r){void 0===n&&(n=[]),void 0===e&&(e=!1),void 0===r&&(r=!1);var o={},a=[];if(!Ee(t))return{partialState:e?null:o,isStateEmpty:!0,ignoredStateKeys:a};var c=!0,i=re(t);return i.length<n.length?i.forEach(function(e){n.includes(e)?Ie(o,t,e)&&(c=!1):r&&a.push(e)}):(n.forEach(function(e){Ie(o,t,e)&&(c=!1)}),r&&(a=$e(i,n))),c&&e&&(o=null),{partialState:o,isStateEmpty:c,ignoredStateKeys:a}}function Re(e,n){return new Proxy(e,{get:function(e,t){return n.includes(t)||n.push(t),e[t]},set:function(e,t){return e[t]=e[t],!0}})}function Te(e,t,n,r){var o=e.ctx;if(o.__$$renderStatus===E){var a=o.ccUniqueKey;if(r){var c=o.module;if(m[c].includes(n)){var i=o.__$$nextCompareWaKeys;o.__$$compareWaKeys[n]=o.__$$curWaKeys[n]=v[c+"/"+n][a]=1,i[n]||(i[n]=2,o.__$$nextCompareWaKeyCount++)}}else{var u=o.__$$nextCompareConnWaKeys,s=o.__$$nextCompareConnWaKeyCount;o.__$$compareConnWaKeys[t][n]=o.__$$curConnWaKeys[t][n]=v[t+"/"+n][a]=1;var d=u[t];d[n]||(d[n]=2,s[t]++)}}}var Me=L._computedValueOri,ke=L._computedValue,We=L._computedDep;function Fe(e,t,n,r,o){(e.retKey_stateKeys_[r]||[]).forEach(function(e){Te(t,n,e,o)})}function Le(r,o,a,c){void 0===a&&(a=!0),void 0===c&&(c=!1);var e=c?r.ctx.refComputedOri:Me[o],i=c?r.ctx.refComputedValue:ke[o];return e?new Proxy(e,{get:function(e,t){if(c){var n=r.ctx.computedDep;Object.keys(n).forEach(function(e){Fe(n[e],r,e,t,a)})}else Fe(We[o],r,o,t,a);return i[t]},set:function(e,t,n){return e[t]=n,!0}}):{}}var je={};function Pe(e,t,n,r){if(_.alwaysGiveState)return[n,r];var o=t[0];return 1===t.length&&"*"!==o&&o===e?[n[o],r[o]]:[n,r]}function ze(e,t,n,r,o,a,c){if(void 0===c&&(c=!0),0!==a.length){var i,u;if(t===Ce){var s=e.computedDep,d=n===W?s:e.watchDep;u=Z(s,r),i=Z(d,r)}else{var f=L._computedDep,l=n===W?f:g._watchDep;u=Z(f,r),i=Z(l,r)}var p=Z(i,"stateKey_retKeys_"),y=Z(i,"retKey_stateKeys_"),_=function(e){var n=ee(y,o);e.forEach(function(e){var t=ee(p,e);Array.isArray(t)&&!t.includes(o)&&t.push(o),n.includes(e)||n.push(e)})};c?_(a):a.forEach(function(e){var t=Z(u,"retKey_stateKeys_");_(t[e]||[])})}}function Ve(e,t,n,r,o,a){var c=Pe(e,t,r,o);return n(c[0],c[1],a)}for(var qe,He=function(e,b,x,U,p,t,O,y,N,D,I,A,R){void 0===e&&(e={});for(var T=e.ctx,_=0,M=t,k=!0,v=!1,n=function(){var C=1===++_&&D,e=p(M,C),t=e.pickedFns,K=e.setted,g=e.changed;if(!t.length)return"break";var n=de(),S=n.commit,r=n.getFnCommittedState,o=de(),E=o.commit,$=o.getFnCommittedState,w=o.clear;if(t.forEach(function(e){var n=e.retKey,t=e.fn,r=e.depKeys,o=e.isLazy,a=je,c={retKey:n,callInfo:N,isFirstCall:D,commit:S,commitCu:E,setted:K,changed:g,cuVal:R,stateModule:b,refModule:x,oldState:U,committedState:M,refCtx:T},i=C&&"-"===r,u=[],s=[];if(i&&(c.cuVal=function(e,n){var r=ke[e];return new Proxy(Me[e],{get:function(e,t){return n.push(t),r[t]},set:function(){return!0}})}(b,u)),"computed"===I)if(o&&(delete c.commit,delete c.commitCu),i){var d=Re(O,s),f=Ve(n,r,t,d,d,c);R[n]=j(!1,f),ze(T,A,W,b,n,s),ze(T,A,W,b,n,u,!1),u.forEach(function(e){var t=ee(a,e);t.includes(n)||t.push(n)})}else if(o){var l=Pe(n,r,O,U);R[n]=j(o,null,!0,t,l[0],l[1],c)}else{var p=Ve(n,r,t,O,U,c);R[n]=j(!1,p)}else{var y=O,_=U;i&&(_=y=Re(O,s)),!1===Ve(n,r,t,y,_,c)&&(k=!1),i&&(ze(T,A,F,b,n,s),ze(T,A,F,b,n,u,!1));var v=$();if(v){var m;if("ref"===A)m="computed"===I?T.computedRetKeyFns:T.watchRetKeyFns;else{var h=L.getRootComputedDep()[b]||{};m=h.retKey_fn_||null}m&&re(v).forEach(function(e){m[e]?(R[e]=j(!1,v[e]),i&&(u.includes(e)||u.push(e))):X("fnCtx.commitCu commit an invalid retKey["+e+"] for moduleComputed")}),w()}i&&u.forEach(function(t){ze(T,A,W,b,t,s),ze(T,A,W,b,t,u,!1),(a[t]||[]).forEach(function(e){ze(T,A,W,b,e,[t],!1)})})}}),M=r()){var a=function(e,t){void 0===t&&(t=!1),M=e,t&&0===re(e).length?M=null:(Object.assign(O,M),Object.assign(y,M),v=!0)},c=Ae(M,"ref"===A?T.privStateKeys:m[b],!0,!0),i=c.partialState,u=c.ignoredStateKeys;if(i)if(I===F){var s=function(e,t,n){return(t===Ce?e.computedDep[e.module]||{}:L._computedDep[n]||{}).stateKey_retKeys_}(T,A,b);if(s){var d=[],f={};re(i).forEach(function(e){s[e]?d.push(e):f[e]=i[e]}),0<d.length&&X("these state keys["+d.join(",")+"] will been ignored, cause they are also appeared in computed depKeys,\n              cc suggest you move the logic to computed file."),a(f,!0)}else a(i)}else a(i);if(u.length){var l="they are not "+(A===Ce?"private":"module")+", fn is "+A+" "+I;X("these state keys["+u.join(",")+"] are invalid, "+l)}}10<_&&(X("fnCtx.commit may goes endless loop, please check your code"),M=null)};M;){if("break"===n())break}return{shouldCurrentRefUpdate:k,hasDelta:v}},Be=L._computedValue,Ge=re,Ye={},Xe=function(){return Ye[B]},Je=function(n,e,t){var r=void 0===t?{}:t,o=r.ref,a=void 0===o?null:o,c=r.callInfo,i=void 0===c?{}:c,u=r.noSave,s=void 0!==u&&u,d=Ze(n),f=Be[n],l=L.getRootComputedDep(),p=g.getRootWatchDep(),y=a||Xe(),_=y.module,v=Object.assign({},d,e),m=Object.assign({},e),h=m;return He(y,n,_,d,function(e,t){return De(t,C,"computed",l,n,d,e)},h,v,m,i,!1,"computed",C,f),He(y,n,_,d,function(e,t){return De(t,C,"watch",p,n,d,e)},h,v,m,i,!1,"watch",C,f),s||Qe(n,m),m},Qe=function(t,e,n){void 0===n&&(n=!1);var r=e;if(n){var o=Ae(e,m[t],!0);r=o.partialState}if(r){var a=Ze(t),c=et(t);Ge(r).forEach(function(e){c[e]=a[e],tt(t,e),a[e]=r[e]})}return r},Ze=function(e){return rt[e]},et=function(e){return ot[e]},tt=function(e,t){at[e][t]++},nt=function(){var e;return(e={})[q]={},e[H]={},e[pe]={},e[V]={},e},rt=nt(),ot=nt(),at={},ct={getDispatcher:Xe,isHotReloadMode:function(){return!!ct.isHot||window&&(window.webpackHotUpdate||fe())},runtimeVar:_,isHot:!1,reComputed:!0,isStartup:!1,moduleSingleClass:{},moduleName_stateFn_:{},moduleName_ccClassKeys_:{},moduleName_stateKeys_:m,moduleName_isConfigured_:{},ccClassKey_ccClassContext_:{},globalStateKeys:[],store:{appendState:function(e,t){var n=ee(m,e);re(t).forEach(function(e){n.includes(e)||n.push(e)}),ct.store.setState(e,t)},_state:rt,_prevState:ot,_stateVer:at,getState:function(e){return e?Ze(e):rt},getPrevState:function(e){return e?et(e):ot},getStateVer:function(e){return e?at[e]:at},setState:function(e,t,n){return Je(e,t,n)},setGlobalState:function(e){return Je(pe,e)},saveSharedState:Qe,getGlobalState:function(){return rt[pe]}},reducer:{_reducer:(qe={},qe[pe]={},qe[q]={},qe),_caller:{},_fnName_fullFnNames_:{},_module_fnNames_:{}},computed:L,watch:g,refStore:{_state:{},setState:function(e,t){var n=ct.refStore._state,r=Object.assign({},n[e],t);n[e]=r}},init:{_init:{}},ccUKey_ref_:Ye,event_handlers_:{},ccUKey_handlerKeys_:{},handlerKey_handler_:{},waKey_uKeyMap_:v,waKey_effectUKeyMap_:{},refs:Ye,info:{packageLoadTime:Date.now(),firstStartupTime:"",latestStartupTime:"",version:"2.3.17",author:"fantasticsoul",emails:["624313307@qq.com","zhongzhengkai@gmail.com"],tag:"yuna"},fragmentNameCount:0,featureStr_classKey_:{},userClassKey_featureStr_:{},errorHandler:null,middlewares:[],plugins:[],pluginNameMap:{}},it=localStorage.length,ut=ct.refStore._state,st=0;st<it;st++){var dt=localStorage.key(st);if(dt.startsWith("CCSS_"))try{ut[dt.substr(5)]=JSON.parse(localStorage.getItem(dt))}catch(e){console.error(e)}}var ft=[],lt=function(e){return e.toLowerCase()===q},pt=function(e){return/^[\$\#\&a-zA-Z0-9_-]+$/.test(e)},yt=P,_t=M;function vt(e){if(!pt(e))throw Error("module["+e+"] writing is invalid!");if(lt(e))throw Error("'$$cc' is a built-in module name for concent")}function mt(e,t,n){void 0===t&&(t=!0),void 0===n&&(n="");var r=n||"module["+e+"]",o=ct.store._state;if(vt(e),e!==pe)if(t){if(D(o[e]))throw _t(Ke.CC_MODULE_NAME_DUPLICATE,yt(r))}else if(!o[e])throw _t(Ke.CC_MODULE_NOT_FOUND,yt(r))}function ht(t,e){var n=Array.isArray(e);if(!n&&"*"!==e)throw Error("storedKeys type err, "+$);n&&e.forEach(function(e){if(t.includes(e))throw Error("the item["+e+"] of storedKeys is not a module state key!")})}var Ct={},Kt=function(e,t,n){if(e.code!==Ke.CC_MODULE_NAME_DUPLICATE||!ct.isHotReloadMode())throw e;var r=function(e){e||(e="");for(var t=e.split("\n"),n=t.length,o="",a=0;a<n;a++)if(t[a].includes(".checkModuleNameAndState")){!function(){var e=t[a+3].split(":"),n=e.length-1,r=[];e.forEach(function(e,t){t!==n&&r.push(e)}),o=r.join(":")}();break}return o}(e.stack),o=n+"|--link--|"+t,a=Ct[o];if(a){if(r!==a)throw e}else Ct[o]=r},gt={};function St(e){gt[e]={}}var Et=ct.waKey_uKeyMap_;function $t(n,e,t){void 0===t&&(t=!0),St(n);var r=n===H?{}:e;try{!function(e,t,n){if(mt(e,n),!Ee(t))throw Error("module["+e+"]'s state "+Se)}(n,r,t)}catch(e){Kt(e,n,"state")}var o=ct.store,a=o.getState(),c=o.getStateVer();o.getPrevState()[n]=Object.assign({},a[n]=r),c[n]=re(r).reduce(function(e,t){return Et[n+"/"+t]={},e[t]=1,e},{});var i=Object.keys(r);if(ct.moduleName_stateKeys_[n]=i,n===pe){var u=ct.globalStateKeys;i.forEach(function(e){u.includes(e)||u.push(e)})}}function wt(e,t){void 0===t&&(t=!1);var n=ct.ccUKey_ref_,r=ct.moduleName_ccClassKeys_,o=ct.ccClassKey_ccClassContext_,a=[];if(e){if(!ct.store._state[e])throw Error("module["+e+"] is not declared in store");var c=r[e];if(c&&0!==c.length){var i=c[0],u=o[i];if(!u)throw Error("no ccClassContext found for ccClassKey "+i+"!");a=u.ccKeys}if(e===V&&(a=a.filter(function(e){return!e.startsWith(x)})),0===a.length){if(!1!==t){throw Error("[[pickOneRef]]: no ref found for module["+e+"]!,if this message doesn't matter, you can ignore it")}a=[B]}}else a=[B];var s=n[a[0]];if(!s)throw Error("cc found no ref!");return s}var bt=k,xt=X,Ut=function(){return Promise.resolve()};function Ot(e,t,n,r,o){void 0===n&&(n="");var a=void 0===o?{}:o,c=a.ccClassKey,i=a.ccKey,u=a.throwError,s=a.refModule,d=void 0===s?"":s;if(void 0===e&&void 0===t)throw Error("params type error");var f,l="",p="";try{if(c&&i){var y=bt(c,i),_=ct.refs[y];if(!_)return xt("no ref found for ccUniqueKey:"+y+"!"),Ut();f=_.ctx.dispatch}else{if("string"==typeof e)if(e.includes("/")){var v=e.split("/");l=v[0],p=v[1]}else p=e;var m;if(!(m=l&&"*"!==l?wt(l):d?wt(d):wt()))return xt("no ref found"),Ut();f=m.ctx.dispatch}if("*"!==l)return f(e,t,n,r);var h=ct.reducer._fnName_fullFnNames_[p];if(!h)return;var C=[];return h.forEach(function(e){C.push(f(e,t,n,r))}),Promise.all(C)}catch(e){if(u)throw e;return xt(e.message),Ut()}}function Nt(e,t,n,r,o){return Ot(e,t,n,r,o)}function Dt(a,e){void 0===e&&(e={});var t="module["+a+"] reducer";if(!Ee(e))throw Error(t+" "+Se);mt(a,!1,t+" is invalid");var n=ct.reducer,r=n._reducer,o=n._caller,c=n._fnName_fullFnNames_,i=n._module_fnNames_,u=Object.assign({},e);r[a]=u;var s=Z(o,a),d=ee(i,a);u.setState||(u.setState=function(e){return e}),re(u).forEach(function(e){d.includes(e)||d.push(e);var r=a+"/"+e,t=ee(c,e);t.includes(r)||t.push(r),s[e]=function(e,t,n){return Nt(r,e,t,n)};var o=u[e];if("function"!=typeof o)throw Error("reducer key["+e+"] 's value is not a function");var n=o;o.__fnName&&(u[e]=n=function(e,t,n){return o(e,t,n)}),n.__fnName=e,n.__stateModule=a,n.__ctName=o.__ctName||o.constructor.name})}var It=0,At=["a","A","b","B","c","C","d","D","e","E","f","F","g","G","h","H","i","I","j","J","k","K","l","L","m","M","n","N","o","O","p","P","q","Q","r","R","s","S","t","T","u","U","v","V","w","W","x","X","y","Y","z","Z"];function Rt(e){return It++,(e||function(e){void 0===e&&(e=6);for(var t="",n=0;n<e;n++)t+=At[te()];return t}())+"_"+It}var Tt=ct.moduleName_stateKeys_,Mt=ct.runtimeVar;function kt(e,t,n,r,o,a,c){var i=t.refCtx,u=t.type;if(e!==Ce||i.__$$isBSe){if(n){var s,d,f,l=typeof n;if("string"==l)s=Ee(r)?((d={})[n]=r,d):((f={})[n]={fn:r,depKeys:o,compare:a,immediate:c},f);else if(Ee(n))s=n;else if("function"==l&&!Ee(s=n(i)))throw Error("type of "+u+" callback result must be an object");s?function(O,N,D){var e=Mt.computedCompare,t=Mt.watchCompare,I=Mt.watchImmediate,A="computed"===N.type?e:t,R=N.module;re(D).forEach(function(c,e){var t=D[c],n=typeof t,r=t;if("function"==n&&(r={fn:t}),Ee(r)){var o=r,a=o.fn,i=o.depKeys,u=void 0===i?"-":i,s=o.immediate,d=void 0===s?I:s,f=o.compare,l=void 0===f?A:f,p=o.lazy,y=r.sort||N.sort||e,_=Rt("mark");if("*"===u||"-"===u){var v=Lt(N,R,c),m=v.stateKey;Wt(O,N,_,m),Ft(O,N,R,m,a,u,d,l,p,y)}else{if(u&&!Array.isArray(u))throw Error("depKeys must an string array or *");if(u&&0!==u.length){var h="",C=c;if(c.includes("/")){var K=c.split("/"),g=K[0],S=K[1];h=g,C=S}Wt(O,N,_,C);var E={};u.forEach(function(e){var t=Lt(N,R,e),n=t.isStateKey,r=t.stateKey,o=t.module;if(h&&o!==h)throw Error("including slash both in retKey["+c+"] and depKey["+e+"] founded, but their module is different");var a=ee(E,o);if(!n)throw Error("depKey["+e+"] invalid, module["+o+"] doesn't include its stateKey["+r+"]");a.push(r)}),re(E).forEach(function(e){Ft(O,N,e,C,a,E[e],d,l,p,y)})}else{var $=Lt(N,R,c),w=$.isStateKey,b=$.stateKey,x=$.module,U=[];!u&&w&&(U=[b]),Wt(O,N,_,b),Ft(O,N,x,b,a,U,d,l,p,y)}}}else X("retKey["+c+"] item type error")})}(e,t,s):X(e+" "+u+" param type error")}}else X(e+" "+u+" must be been called in setup block")}function Wt(e,t,n,r){if(e===Ce){var o=t.refCtx,a=o.retKey_fnUid_,c=t.type,i=c+"_"+r;if(a[i])throw Error("ccUKey["+o.ccUniqueKey+"], retKey["+r+"] duplicate in ref "+c);a[i]=n}}function Ft(e,t,n,r,o,a,c,i,u,s){var d=Z(t.dep,n,{retKey_fn_:{},retKey_lazy_:{},stateKey_retKeys_:{},retKey_stateKeys_:{},fnCount:0}),f=d.retKey_fn_,l=d.stateKey_retKeys_,p=d.retKey_lazy_,y=d.retKey_stateKeys_,_={fn:o,immediate:c,compare:i,depKeys:a,sort:s};f[r]?e!==Ce&&(f[r]=_,p[r]=t.isLazyComputed||u):(f[r]=_,p[r]=t.isLazyComputed||u,d.fnCount++),e===Ce&&(t.retKeyFns[r]=f[r]);var v=t.refCtx;if(v&&("computed"===t.type?v.hasComputedFn=!0:v.hasWatchFn=!0),"-"!==a){var m="*"===a?["*"]:a;"*"===a&&(y[r]=Tt[n]),m.forEach(function(e){var t=ee(l,e);t.includes(r)||t.push(r)})}}function Lt(e,t,n){var r,o=t,a=n;if(n.includes("/")){var c=n.split("/"),i=c[0];i&&(o=i),a=c[1]}if(o===e.module)r=e.stateKeys;else{if(!(r=Tt[o]))throw M(Ke.CC_MODULE_NOT_FOUND,P("module["+o+"]"));if(!e.connect[o])throw M(Ke.CC_MODULE_NOT_CONNECTED,P("module["+o+"], stateKey["+a+"]"))}return{isStateKey:r.includes(a),stateKey:a,module:o}}function jt(e,o){var t={};return re(e).forEach(function(r){o[r]=j(),Object.defineProperty(t,r,{get:function(){var e=o[r]||{},t=e.isLazy;if(!t)return e.result;if(t&&e.needCompute){var n=(0,e.fn)(e.newState,e.oldState,e.fnCtx);e.result=n,e.needCompute=!1}return e.result},set:function(e){var t=o[r];e[S]?e.isLazy?(t.isLazy=!0,t.needCompute=!0,t.newState=e.newState,t.oldState=e.oldState,t.fn=e.fn,t.fnCtx=e.fnCtx):(t.isLazy=!1,t.result=e.result):X("computed value can not been changed manually")}})}),t}var Pt=Z,zt=Ee;function Vt(n,e){if(e){var t="module["+n+"] computed";if(!zt(e))throw Error(t+" "+Se);mt(n,!1,t+" is invalid");var r=ct.computed,o=ct.store.getState(),a=r.getRootComputedValue(),c=r.getRootComputedDep();r.getRootComputedRaw()[n]=e;var i=o[n];kt(C,{type:W,module:n,stateKeys:re(i),dep:c},e);var u=ct.getDispatcher(),s=Object.assign({},i),d=Pt(r._computedValueOri,n);a[n]=jt(e,d);var f=a[n];He(u,n,u&&u.ctx.module,i,function(e,t){return De(t,C,"computed",c,n,i,e)},i,i,s,le(n),!0,"computed",C,f)}}var qt=Ee,Ht=Z,Bt=re;function Gt(n,e,t){if(void 0===t&&(t=!1),e){var r="module["+n+"] watch";if(!qt(e))throw Error(r+" "+Se);mt(n,!1,r+" is invalid");var o=ct.watch.getRootWatchDep(),a=ct.watch.getRootWatchRaw(),c=ct.computed.getRootComputedValue();if(t){var i=a[n];i?Object.assign(i,e):a[n]=e}else a[n]=e;var u=(0,ct.store.getState)(n);kt(C,{module:n,stateKeys:Bt(u),dep:o},e);var s=ct.getDispatcher(),d=Object.assign({},u),f=Ht(c,n);He(s,n,s&&s.ctx.module,u,function(e,t){return De(t,C,"watch",o,n,u,e)},u,u,d,le(n),!0,"watch",C,f)}}var Yt=[U,O,12,N,14,15],Xt={};function Jt(t,n){Xt[t].forEach(function(e){e({sig:t,payload:n})})}function Qt(e,t){function n(e,t){var n=Xt[e];n?n.push(t):console.warn("invalid sig["+e+"]")}Array.isArray(e)?e.forEach(function(e){n(e,t)}):n(e,t)}Yt.forEach(function(e){return Xt[e]=[]});var Zt=function(e){if(!ct.errorHandler)throw e;ct.errorHandler(e)},en=0,tn={},nn={},rn={},on={};function an(){return++en}function cn(e,t,n,r){if(n){var o=r[e];o||(o=r[e]={});var a=o[t];a?Object.assign(a,n):o[t]=n}}function un(e,t,n){cn(e,t,n,tn)}function sn(e,t,n){return un(e,t,n),function(e){var t=function(e){return tn[e]}(e),n=[];return re(t).forEach(function(e){n.push({module:e,state:t[e]})}),n}(e)}function dn(e){delete tn[e]}var fn={},ln=function(e,t,n){void 0===n&&(n=1e3);var r=fn[t];r&&clearTimeout(r),fn[t]=setTimeout(function(){delete fn[t],e()},n)};function pn(e,n,r,t,o,a,c){void 0===c&&(c=!1);var i=e.ctx;if(!i.hasWatchFn)return!0;var u=Object.assign({},t),s=i.watchDep,d=i.module,f=i.ccUniqueKey,l=i.refComputed,p=Object.assign({},r,t),y=He(e,n,d,r,function(e,t){return De(t,"ref","watch",s,n,r,e,f)},t,p,u,o,a,"watch",Ce,l),_=y.shouldCurrentRefUpdate;return c&&y.hasDelta&&Object.assign(t,u),_}function yn(e,n,r,t,o,a,c){void 0===a&&(a=!1),void 0===c&&(c=!1);var i=e.ctx,u=Object.assign({},t);if(!i.hasComputedFn)return u;var s=i.computedDep,d=i.module,f=i.refComputed,l=i.ccUniqueKey,p=Object.assign({},r,t);return He(e,n,d,r,function(e,t){return De(t,Ce,"computed",s,n,r,e,l)},t,p,u,o,a,"computed",Ce,f),c&&Object.assign(t,u),u}var _n=re,vn=ct.ccUKey_ref_,mn=ct.waKey_uKeyMap_,hn=ct.waKey_effectUKeyMap_;function Cn(o,e,c,i){var t=_n(e),n=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=[]),e+"/"+t.sort().join(",")+"/"+n+"/"+("*"===r?"*":r.sort().join(","))}(o,t,c,i),r=function(e,t){return gt[e][t]}(o,n);if(r)return{sharedStateKeys:t,result:r};var a={},u=[],s=[];t.forEach(function(e){var t=o+"/"+e;Object.assign(a,mn[t],hn[t])});function d(e,t){e?u.push(t):s.push(t)}function f(e,t){var n=e.ctx,r=n.ccClassKey,o=n.ccUniqueKey;if(c){var a=n.renderKey===c;"*"===i?a&&d(t,o):i.includes(r)?a&&d(t,o):d(t,o)}else d(t,o)}var l=_n(a),p=!1;l.forEach(function(e){var t=vn[e];if(t){var n=t.ctx,r=!!n.connect[o];n.module===o&&f(t,!0),r&&f(t,!1)}else p=!0});var y={belong:u,connect:s};return p||function(e,t,n){gt[e][t]=n}(o,n,y),{sharedStateKeys:t,result:y}}var Kn=Ee,gn=X,Sn=D,En=function(e,t){return e+"/"+Object.keys(t).sort().join("|")},$n=re,wn=1,bn=2,xn=he,Un=ve,On=me,Nn=w,Dn=K,In=15,An=1,Rn=2,Tn=3,Mn=ct.store,kn=Mn.setState,Wn=Mn.getPrevState,Fn=Mn.saveSharedState,Ln=ct.middlewares,jn=ct.ccClassKey_ccClassContext_,Pn=ct.refStore,zn=ct.moduleName_stateKeys_;function Vn(e,t,c){var n=void 0===t?{}:t,i=n.module,r=n.skipMiddleware,u=void 0!==r&&r,s=n.payload,o=n.reactCallback,d=n.type,a=n.calledBy,f=void 0===a?Un:a,l=n.fnName,p=void 0===l?"":l,y=n.renderKey,_=void 0===y?"":y,v=n.delay,m=void 0===v?-1:v;if(void 0!==e)if(Kn(e)){var h=c.ctx,C=h.module,K=h.ccUniqueKey,g=h.ccKey,S=function(e,t){return e===t?wn:bn}(i,C),E={payload:s,renderKey:_,ccKey:g,module:i,fnName:p},$=function(e,t,n){var r=Ae(t,zn[e],!0).partialState;if(r)return kn(e,r,n);return r}(i,e,{ref:c,callInfo:E,noSave:!0});Object.assign(e,$),qn(c,E,_,f,e,S,o,function(n,r,o){var a={calledBy:f,type:d,payload:s,renderKey:_,delay:m,ccKey:g,ccUniqueKey:K,committedState:r,refModule:C,module:i,fnName:p,sharedState:$||{},modState:function(e,t){a.committedState[e]=t,a.sharedState[e]=t}};!function(e,n,r){var o=!1;if(!0!==e){var a=Ln.length;if(0<a){o=!0;var c=0;!function e(){if(c===a)r(o);else{var t=Ln[c];c++,"function"==typeof t?t(n,e):(gn("found one middleware is not a function"),e())}}()}else r()}else r(o)}(u,a,function(e){var t=$;e?t=Fn(i,a.sharedState,!0):$&&Fn(i,$),o&&o(),n===An&&!t||Jt(In,{committedState:r,sharedState:t,module:i,type:function(e,t){return[xn,Un,On,Nn,Dn].includes(e)?"ccApi/"+e:"dispatch/"+t}(f,d),ccUniqueKey:K,renderKey:_}),t&&function(e,t,n,r,o,a,c){var i=function(){!function(o,e,a,t,c,n){if(!a)return;var i=ct.ccUKey_ref_,r=e.ctx,u=r.ccUniqueKey,s=t===wn,d=Cn(c,a,n,jn[r.ccClassKey].renderKeyClasses),f=d.sharedStateKeys,l=d.result,p=l.connect;l.belong.forEach(function(e){var t=i[e];if(t){var n=t.ctx.ccUniqueKey;s&&n===u||qn(t,o,null,"broadcastState",a,wn)}});var y=Wn(c);p.forEach(function(e){var t=i[e];if(t&&!0!==t.__$$isUnmounted){var n=t.ctx;yn(t,c,y,a,o);var r=pn(t,c,y,a,o);n.__$$settedList.push({module:c,keys:f}),r&&n.__$$ccForceUpdate()}})}(e,t,n,r,o,a)};if(0<c){var u=En(t.ctx.ccUniqueKey,n);ln(i,u,c)}else i()}(E,c,t,S,i,_,m)})})}else gn("your committed state "+Se)}function qn(e,t,n,r,o,a,c,i){var u=e.state,s=e.ctx;if(!0===e.__$$isUnmounted||a!==wn||r!==xn&&!Sn(o))return c&&c(u),i&&i(An,o);var d=s.module,f=s.storedKeys,l=s.ccUniqueKey,p=Tn;if(n&&(p=Rn,s.renderKey!==n))return i&&i(An,o);if(0<f.length){var y=Ae(o,f),_=y.partialState;if(!y.isStateEmpty){if(!0===s.persistStoredKeys){var v=Ae(u,f),m=Object.assign({},v.partialState,_);localStorage.setItem("CCSS_"+l,JSON.stringify(m))}Pn.setState(l,_)}}function h(){s.__$$settedList.push({module:d,keys:$n(C)}),s.__$$ccSetState(C,c,K)}var C=yn(e,d,u,o,t),K=pn(e,d,u,C,t,!1,!0);i?i(p,C,h):h()}function Hn(e,t,n,r,o){void 0===r&&(r=-1);try{wt(e).ctx.changeState(t,{ccKey:"[[top api:setState]]",module:e,renderKey:n,delay:r,skipMiddleware:o})}catch(e){Q(e)}}var Bn=X,Gn=Ee,Yn=re,Xn=ct.store,Jn=Xn.getState,Qn=Xn.setState,Zn=ct.reducer._reducer,er=ct.computed._computedValue,tr=M,nr=P;function rr(e,t){void 0===t&&(t=!0);try{return mt(e,!1,"module["+e+"] is not configured in store"),!0}catch(e){return function(e,t){if(void 0===t&&(t=!0),t)throw e;cr(e)}(e,t),!1}}function or(o,a){return function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e?a(e):o.apply(void 0,n)}}function ar(e,t,n,r){var o;return!0===e?(function(e){rn[e]=!0}(o=an()),r[o]=1):r[o=t||an()]||(r[o]=1),{_chainId:o,_oriChainId:n||o}}function cr(e,t){e&&(t?t(e):(Bn(e),ct.errorHandler&&ct.errorHandler(e)))}function ir(e,t,n){return function(r,o,a,c){return new Promise(function(e,t){var n=Object.assign(a,{__innerCb:or(e,t)});r(o,n,c)}).catch(Zt)}(lr,e,t,n)}function ur(e,t,n){return ir(e,{callerRef:t.callerRef,context:!0,module:t.module,calledBy:t.calledBy,fnName:e.name,delay:t.delay,renderKey:t.renderKey,chainId:t.chainId,oriChainId:t.oriChainId,chainId_depth_:t.chainId_depth_,isSilent:t.isSilent},n)}function sr(a,c){return function(e,t,n){var r=a.ctx;if(c){var o=Object.assign({},r.state,e);c.state=o}n?(r.renderCount+=1,r.reactSetState(e,t)):(Object.assign(a.state,e),r.state=a.state)}}function dr(n){return function(e){var t=n.ctx;t.renderCount+=1,t.reactForceUpdate(e)}}function fr(h,e){var t=void 0===e?{}:e,C=t.chainId,K=t.oriChainId,g=t.isLazy,n=t.delay,S=void 0===n?-1:n,r=t.isSilent,E=void 0!==r&&r,o=t.chainId_depth_,$=void 0===o?{}:o;return function(e,t,n,r){var o=g,a=E,c="",i=null!=r?r:S;if(Gn(n)){var u=n.lazy,s=n.silent,d=n.renderKey,f=n.delay;void 0!==u&&(o=u),void 0!==s&&(a=s),void 0!==d&&(c=d),void 0!==f&&(i=f)}else c=n;var l,p,y=ar(o,C,K,$),_=typeof e,v={callerRef:h,calledBy:w,module:h.ctx.module,isSilent:a,chainId:y._chainId,oriChainId:y._oriChainId,chainId_depth_:$,delay:i,renderKey:c},m=Error("param type error, correct usage: invoke(userFn:function, ...args:any[]) or invoke(option:[module:string, fn:function], ...args:any[])");if("function"==_)return e.__fnName&&(e.name=e.__fnName),ur(e,v,t);if("object"!=_)throw m;if(p=Array.isArray(e)?(l=e[1],e[0]):(l=e.fn,e.module),"function"!=typeof l)throw m;return p&&(v.module=p),ur(l,v,t)}}function lr(l,e,p){var y=e.callerRef,_=y.ctx.module,t=e.module,v=void 0===t?_:t,n=e.context,m=void 0!==n&&n,h=e.__innerCb,C=e.type,K=e.calledBy,g=e.fnName,r=e.delay,S=void 0===r?-1:r,E=e.renderKey,$=e.chainId,w=e.oriChainId,b=e.chainId_depth_,x=e.isSilent;!function(e,t,n,r){var o=n;rr(e,!1)?(e!==t&&n&&(Bn(function(e,t){return"param module["+e+"] must equal current ref's module["+t+"] when pass param reactCallback, or it will never been triggered! "}(e,t)),o=null),r(null,o)):r(Error("inputModule:"+e+" invalid"),null)}(v,_,e.cb,function(e,r){if(e)return cr(e,h);var o,t=Jn(v),n={};if(o=$===w&&1===b[$],m){b[$]=b[$]+1;var a=pr(y,!1,x,v,E,S,$,w,b),c=pr(y,!1,!0,v,E,S,$,w,b),i=pr(y,!0,x,v,E,S,$,w,b),u=fr(y,{delay:S,chainId:$,oriChainId:w,chainId_depth_:b}),s=fr(y,{isLazy:!0,delay:S,oriChainId:w,chainId_depth_:b}),d=fr(y,{isLazy:!1,delay:S,isSilent:!0,oriChainId:w,chainId_depth_:b}),f=function(e){return on[e]}($)||{};n={module:v,callerModule:_,committedStateMap:f,committedState:f[v]||{},invoke:u,lazyInvoke:s,silentInvoke:d,invokeLazy:s,invokeSilent:d,dispatch:a,lazyDispatch:i,silentDispatch:c,dispatchLazy:i,dispatchSilent:c,rootState:Jn(),globalState:Jn(pe),moduleState:t,moduleComputed:er[v]||{},setState:function(e){return a("setState",e,{silent:x,renderKey:E,delay:S})},refCtx:y.ctx}}!1===x&&Jt(U,{isSourceCall:o,calledBy:K,module:v,chainId:$,fn:l}),new Promise(function(e){return e(l(p,t,n))}).then(function(e){b[$]=b[$]-1;var t=1===b[$];!function(e,t,n){cn(e,t,n,on)}($,v,e);var n=[];!1===x&&(Jt(O,{isSourceCall:o,calledBy:K,module:v,chainId:$,fn:l}),!function(e){return!0===rn[e]}($)?n=[{module:v,state:e}]:t?function(e){return!0===nn[e]}($)||(n=sn($,v,e),dn($)):un($,v,e)),n.forEach(function(e){e.state&&Vn(e.state,{renderKey:E,module:e.module,reactCallback:r,type:C,calledBy:K,fnName:g,delay:S,payload:p},y)}),o&&(dn($),function(e){delete on[e]}($)),h&&h(null,e)}).catch(function(e){Jt(N,{isSourceCall:o,calledBy:K,module:v,chainId:$,fn:l}),cr(e,h)})})}function pr(b,x,U,O,N,D,I,A,R){return void 0===N&&(N=""),void 0===D&&(D=-1),void 0===R&&(R={}),function(e,n,t,r){void 0===e&&(e={});var o=x,a=U,c="",i=r||D;if(Gn(t)){c=N;var u=t.lazy,s=t.silent,d=t.renderKey,f=t.delay;void 0!==u&&(o=u),void 0!==s&&(a=s),void 0!==d&&(c=d),void 0!==f&&(i=f)}else c=t||N;function l(){return fr(b,{chainId:v,oriChainId:m,isLazy:o,chainId_depth_:R})(e,n,c,i)}var p,y,_=ar(o,I,A,R),v=_._chainId,m=_._oriChainId,h=typeof e,C=O;if(h&&"object"==h){if(Array.isArray(h))return l();var K=e.module;K&&(C=K),p=e.type,y=e.cb}else{if("string"!=h&&"function"!=h)return Promise.reject(tr(Ke.CC_DISPATCH_PARAM_INVALID));var g=e;if("function"==h){var S=e.__fnName;if(!S)return l();g=S,1==R[m]&&(C=e.__stateModule)}var E=g.split("").filter(function(e){return"/"===e}).length;if(0===E)p=g;else{if(1!==E)return Promise.reject(tr(Ke.CC_DISPATCH_STRING_INVALID,nr(g)));var $=g.split("/"),w=$[0];w&&(C=w),p=$[1]}}return"*"===C?Ot("*/"+p,n,{silent:a,lazy:o,renderKey:c},i,{refModule:b.ctx.module}):new Promise(function(e,t){!function(e){var t=void 0===e?{}:e,n=t.callerRef,r=t.module,o=t.renderKey,a=t.isSilent,c=t.type,i=t.payload,u=t.cb,s=t.__innerCb,d=t.delay,f=void 0===d?-1:d,l=t.chainId,p=t.oriChainId,y=t.chainId_depth_,_=Zn[r];if(!_)return s(Error("no reducerMap found for module:["+r+"]"));var v=_[c];if(!v)return s(Error("no reducer fn found for ["+r+"/"+c+"], is these fn you want:"+Object.keys(_)));lr(v,{callerRef:n,module:r,type:c,cb:u,context:!0,__innerCb:s,calledBy:T,delay:f,renderKey:o,isSilent:a,chainId:l,oriChainId:p,chainId_depth_:y},i)}({callerRef:b,module:C,type:p,payload:n,cb:y,__innerCb:or(e,t),delay:i,renderKey:c,isSilent:a,chainId:v,oriChainId:m,chainId_depth_:R})}).catch(Zt)}}function yr(a){return function(t){try{Hn(a,t)}catch(e){var n=Jn(a);if(!n)return Bn("invalid module "+a);var r=Ae(t,Yn(n),!1,!0),o=r.ignoredStateKeys;r.isStateEmpty||Qn(a,r.partialState),0<o.length&&Bn("invalid keys:"+o.join(",")+", their value is undefined or they are not declared in module"+a),J("no ccInstance found for module["+a+"] currently, cc will just store it, lately ccInstance will pick this state to render")}}}var _r=function(o){return function(e,t){var n=o.ctx,r=Object.assign({},o.state,e);n.type===ye?(o.state=n.state=r,n.__boundSetState(r),t&&t(r)):(n.state=r,o.__$$isMounted?o.state=r:Object.assign(o.state,e),n.__boundSetState(r,t))}},vr=function(r){return function(e){var t=r.ctx;if(t.type===ye){var n=Object.assign({},r.state);t.__boundSetState(n),e&&e(n)}else t.__boundForceUpdate(e)}},mr=Ee,hr=we;function Cr(t,e){if(ct.isStartup){if(!mr(e))throw Error("param config "+Se);if(t===pe)throw Error("configuring global module is not allowed");var n=e.reducer,r=e.computed,o=e.watch,a=e.init,c=e.isClassSingle,i=hr(e.state);if(n&&!mr(n))throw Error("config.reducer "+Se);if($t(t,i,!0),Dt(t,n),r&&Vt(t,r),o&&Gt(t,o),ct.moduleSingleClass[t]=!0===c,a){if("function"!=typeof a)throw Error("init value must be a function!");Promise.resolve().then(a).then(function(e){yr(t)(e)})}ct.moduleName_isConfigured_[t]=!0,Jt(14,t)}else ft.push({module:t,config:e})}function Kr(r,o){var a={};return re(r).forEach(function(e){function t(){return n.apply(void 0,arguments)}var n=r[e];t.__fnName=e,t.__stateModule=o,a[e]=t}),a}function gr(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}function Sr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Er=re,$r=Ee,wr=ct.store._state;var br=R,xr=M,Ur=ct.featureStr_classKey_,Or=ct.userClassKey_featureStr_,Nr=ct.ccClassKey_ccClassContext_,Dr=0;var Ir=ct.moduleName_stateKeys_,Ar=ct.moduleName_ccClassKeys_,Rr=ct.moduleSingleClass,Tr=ct.ccClassKey_ccClassContext_,Mr=ct.computed._computedValue,kr=function(e,t){var n=!1,r=!1;if(!Array.isArray(e))return{duplicate:n,notArray:!0,keyElementNotString:r};if(!Array.isArray(t))return{duplicate:n,notArray:!0,keyElementNotString:r};var o=e.length,a=t.length;e:for(var c=0;c<o;c++){var i=e[c];if("string"!=typeof i){r=!0;break e}for(var u=0;u<a;u++){var s=t[u];if("string"!=typeof s){r=!0;break e}if(s===i){n=!0;break e}}}return{duplicate:n,notArray:!1,keyElementNotString:r}},Wr=P;function Fr(e,t,n,r,o,a,c,i,u){void 0===e&&(e=V),void 0===a&&(a=[]),!0===i&&function(){if(!0!==ct.isStartup)throw Error("you must startup cc by call startup method before register ReactClass to cc!")}();var s="cc"===u;mt(e,!1,"module["+e+"] is not configured in store"),ht(Ir[e],a);var d=c;Array.isArray(c)?(d={},c.forEach(function(e){return d[e]="-"})):c[pe]||(c[pe]="-");var f,l=function(e,t,n){if(t===B)return[];if(!n)return[];if("*"===n)return Ir[e];var r=kr(n,[]);if(r.notArray||r.keyElementNotString)throw Error("watchedKeys "+$+" "+Wr("ccClassKey:"+t));return n}(e,t,o),p=function(o,e,t,a){if(!$r(o))throw Error("CcFragment or CcClass's prop connect type error, it "+Se);function c(e){return i+" module["+e+"]'s value must be * or array of string"}var i="CcFragment or CcClass's prop connect is invalid,",n=Er(o);n.sort();var u=[],s={};if(n.forEach(function(t){var n=wr[t],r=a+"_"+t+"/";if(void 0===n)throw Error(i+" module["+t+"] not found in cc store ");var e=o[t];if("string"==typeof e){if("*"!==e&&"-"!==e)throw Error(c(t));u.push(r+"*"),Er(n).forEach(function(e){return s[t+"/"+e]=e})}else{if(!Array.isArray(e))throw Error(c(t));e.forEach(function(e){if(!n.hasOwnProperty(e))throw Error(i+" module["+t+"]'s key["+e+"] not declared in cc store ");r+=e+",",s[t+"/"+e]=e}),u.push(r)}}),u.push("|"),"*"===e)u.push(a+"_$"+t+"/*");else{e.sort();var r=t+"/"+e.join(",");u.push(r)}return{featureStr:u.join("@"),connectedModuleKeyMapping:s,connectedModuleNames:n}}(d,l),y=p.connectedModuleKeyMapping,_=p.connectedModuleNames,v=function(e,t,n,r,o,a,c){if(void 0===c&&(c=""),!c){if(t===V&&br(n)&&0===r.length)return o+"0";var i=o+":"+a,u=Ur[i];return u||(Ur[i]=u=""+o+ ++Dr)}if(c.startsWith(h))throw Error("user can not specify a classKey["+c+"] starts with $$Cc");if(!e&&c.toLowerCase()==B.toLowerCase())throw Error(B+" is cc built-in ccClassKey name, if you want to customize your dispatcher, \n      you can set autoCreateDispatcher=false in StartupOption, and use createDispatcher then.");if(Nr[c]){if(Or[c]!==a)throw xr(Ke.CC_CLASS_KEY_DUPLICATE,"ccClassKey:["+c+"] duplicate")}else Or[c]=a;return c}(s,e,d,l,r,p.featureStr,t);if(n){if(!Array.isArray(n)&&"*"!==n)throw Error("renderKeyClasses type err, it is must be an array or string *");f=n}else f=[v];return function(e,t,n,r,o,a,c){var i=Tr[e];i||(i=function(e,t,n,r,o){return{module:e,ccClassKey:t,renderKeyClasses:n,originalWatchedKeys:o,watchedKeys:r,ccKeys:[],connectedState:{},connectedModuleKeyMapping:null,connectedModule:{}}}(n,e,t,o,r),Tr[e]=i);var u={},s={};if(a){var d=ct.store._state,f=i.connectedState;c.forEach(function(e){f[e]=d[e],s[e]=Mr[e],u[e]=1}),i.connectedModuleKeyMapping=a,i.connectedModule=u,i.connectedComputed=s}}(v,f,e,o,l,y,_),function(e,t){var n=ee(Ar,e);if(!0===Rr[e]&&1<=n.length)throw Error("module["+e+"] is declared as single, only on ccClassKey can been registered to it, and now a ccClassKey["+n[0]+"] has been registered!");n.includes(t)||n.push(t)}(e,v),{_module:e,_connect:d,_watchedKeys:l,_ccClassKey:v}}var Lr=ct.event_handlers_,jr=ct.handlerKey_handler_,Pr=ct.ccUKey_handlerKeys_,zr=ct.ccUKey_ref_,Vr=function(e,t,n){return e+"$"+t+"$"+n},qr=ee,Hr=X;function Br(e,t,n,r,o){void 0===o&&(o=null);var a=Lr[e];if(a){var c=a;return r?c=a.filter(function(e){return e.ccUniqueKey===r}):n?c=a.filter(function(e){return e.ccClassKey===n}):t&&(c=a.filter(function(e){return e.module===t})),void 0!==o&&(c=c.filter(function(e){return e.identity===o})),c}return[]}function Gr(e){var o={},r=[];e.forEach(function(e){var t=e.ccUniqueKey,n=e.event;delete jr[e.handlerKey],o[t]=1,r.includes(n)||r.push(n)}),r.forEach(function(e){var r=Lr[e];r&&(r.forEach(function(e,t){var n=e.ccUniqueKey;1===o[n]&&(r[t]=null,delete Pr[n])}),Lr[e]=r.filter(function(e){return null!==e}))})}function Yr(e,t,n,r,o,a){var c=qr(Lr,r);if("function"!=typeof a)return Hr("event "+r+"'s handler is not a function!");var i=Vr(n,r,o),u=qr(Pr,n),s=c.findIndex(function(e){return e.handlerKey===i}),d={event:r,module:e,ccClassKey:t,ccUniqueKey:n,identity:o,handlerKey:i,fn:a};-1<s?c[s]=d:(c.push(d),u.push(i)),jr[i]=d}function Xr(e){for(var t=arguments.length,a=Array(1<t?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];var r,o,c,i,u=null,s=null;"string"==typeof e?r=e:(r=e.name,u=e.identity,o=e.module,c=e.ccClassKey,i=e.ccUniqueKey,s=e.canPerform),Br(r,o,c,i,u).forEach(function(e){var t=e.handlerKey,n=zr[e.ccUniqueKey];if(n&&t){if(n.__$$isUnmounted)return;var r=jr[t];if(r){if(s&&!s(n))return;var o=r.fn;n.__$$isMounted?o.apply(void 0,a):n.ctx.__$$onEvents.push({fn:o,args:a})}}})}function Jr(e,t){Gr(Br(e,t.module,t.ccClassKey,t.ccUniqueKey,t.identity))}function Qr(e){var t=Pr[e];if(t){var n=[];t.forEach(function(e){return n.push(jr[e])}),Gr(n)}}function Zr(e){if(e&&"object"==typeof e){var t;if(Array.isArray(e))t={name:e[0],identity:e[1]};else t=Object.assign({},e);return t}return{name:e}}var eo=Object.freeze({bindEventHandlerToCcContext:Yr,findEventHandlersToPerform:Xr,findEventHandlersToOff:Jr,offEventHandlersByCcUniqueKey:Qr,getEventItem:Zr});function to(n,e,r,o){return new Proxy(e,{get:function(e,t){return Te(n,r,t,o),e[t]},set:function(e,t,n){return e[t]=n,!0}})}var no=1;function ro(c,i){return void 0===i&&(i=!1),function(e,t,n,r,o){var a=o||no++;kt(Ce,{type:"computed",isLazyComputed:i,refCtx:c,sort:a,stateKeys:c.stateKeys,retKeyFns:c.computedRetKeyFns,module:c.module,connect:c.connect,dep:c.computedDep},e,t,n,r)}}var oo=X,ao=k;function co(e){return e?e.props||e:{}}var io=ct.store.getState;var uo=function(e,t,n){var r=n.module,o=n.state,a=!1,c="",i="",u="",s=null,d=-1,f=!1,l=e[_e],p=e.type,y=!1;if(void 0!==l){var _,v,m;if(d=e.delay,i=e.rkey,a="int"===p,f="bool"===p,(c=l).includes("/")){var h=c.split("/");_=h[1],v=c,m=h[0]}else v=r+"/"+(_=c),m=r;var C=io(m);u="bool"===p?!be(m!==r?C:o,_):function(e){var t=oe(e);return t?t.currentTarget.value:e}(t);var K=e.val;if(void 0===K);else if("function"==typeof K){var g=K(u,_,{module:m,moduleState:C,fullKeyPath:v,state:o,refCtx:n});if(null!=g)if("as"===p)u=g;else{var S=typeof g;"boolean"==S?y=!g:"object"==S?(y=!0,s=g):X("syncKey["+l+"] cb result type error.")}else"as"===p&&(y=!0)}else u=K}else{var E=oe(t);if(!E)return null;var $=E.currentTarget;u=$.value;var w=$.dataset;if(a="int"===p||void 0!==w.ccint,!(c=w.ccsync))return null;i=w.ccrkey;var b=w.ccdelay;if(b)try{d=parseInt(b)}catch(e){}}return{currentTarget:{value:u,extraState:s,noAutoExtract:y,dataset:{ccsync:c,ccint:a,ccdelay:d,ccrkey:i}},isToggleBool:f}};var so=function(e,t,n,r,o){var a=t;!0!==n||Number.isNaN(a=parseInt(t))&&(X(t+" can not convert to int but you set ccint as true!ÔºÅ"),a=t);var c=null,i=[];if(e.includes("/")){var u=e.split("/"),s=u[1];c=u[0],i=s.includes(".")?s.split("."):[s]}else i=e.includes(".")?e.split("."):[e];if(1===i.length){var d,f,l=i[0];return!0!==o?{module:c,state:(d={},d[l]=a,d)}:{module:c,state:(f={},f[l]=!r[l],f)}}var p,y=i[0],_=i.slice(1),v=r[y];return function e(t,n,r,o,a,c){void 0===c&&(c=!1);var i=n[o];if(r===o)if(!0===c){var u=t[i];"boolean"!=typeof u?X("key["+i+"]'s value type is not boolean"):t[i]=!u}else t[i]=a;else e(t[i],n,r,++o,a,c)}(v,_,_.length-1,0,a,o),{module:c,state:(p={},p[y]=v,p)}},fo=ct.store.getState;function lo(e,t,n){var r=t.ctx,o=r.module,a=uo(e,n,r);if(a){var c=a.currentTarget,i=c.dataset,u=c.value,s=c.extraState,d=c.noAutoExtract;n&&n.stopPropagation&&n.stopPropagation();var f=i.ccsync,l=i.ccint,p=i.ccdelay,y=i.ccrkey;if(f.startsWith("/")&&(i.ccsync=""+o+f),f.includes("/")){var _=f.split("/")[0];mt(_,!1);var v=r.ccKey,m=r.ccUniqueKey;if(d)return void(s&&Vn(s,{calledBy:K,ccKey:v,ccUniqueKey:m,module:_,renderKey:y,delay:p},t));var h=_!==o?fo(_):t.state;Vn(so(f,u,l,h,a.isToggleBool).state,{calledBy:K,ccKey:v,ccUniqueKey:m,module:_,renderKey:y,delay:p},t)}else{if(d)return void(s&&t.setState(s,null,y,p));var C=so(f,u,l,t.state,a.isToggleBool);t.setState(C.state,null,y,p)}}}var po=ct.reducer,yo=po._module_fnNames_,_o=po._caller,vo=ct.refStore,mo=ct.ccClassKey_ccClassContext_,ho=ct.moduleName_stateKeys_,Co=ct.store.getState,Ko=ct.moduleName_ccClassKeys_,go=ct.waKey_uKeyMap_,So=ct.waKey_effectUKeyMap_,Eo=re,$o=M,wo=P,bo=ee,xo=Z,Uo=X,Oo=R,No=0;var Do=function(){},Io=function(e){return"type of defineEffect "+e+" param must be"},Ao=function(e){return"-"===e.watchedKeys?Eo(e.__$$renderStatus===E?e.__$$compareWaKeys:e.__$$curWaKeys):e.watchedKeys},Ro=function(t,e){function n(e){return Eo(t.__$$renderStatus===E?t.__$$compareConnWaKeys[e]:t.__$$curConnWaKeys[e])}function r(e){if(c)return n(e);var t=o[e];return"*"===t?ho[e]:"-"===t?n(e):t}var o=t.connect,a=t.connectedModules,c=Array.isArray(o);if(e)return r(e);var i={};return a.forEach(function(e){return i[e]=r(e)}),i};function To(n,r,e){("*"===e?ho[r]:e).forEach(function(e){var t=go[r+"/"+e];t?t[n]=1:Uo("invalid watchedKey["+e+"] of module["+r+"]")})}function Mo(c,e,t){var n;void 0===t&&(t=5);var r=e.isSingle,o=e.ccClassKey,a=e.ccKey,i=void 0===a?"":a,u=e.module,s=e.type,d=e.state,f=e.storedKeys,l=void 0===f?[]:f,p=e.persistStoredKeys,y=void 0!==p&&p,_=e.watchedKeys,v=e.connect,m=void 0===v?{}:v,h=e.tag,C=void 0===h?"":h,K=e.ccOption,g=void 0===K?{}:K,S=u,E=c.ctx,$=Oo(E),w=c.setState,b=c.forceUpdate;!$&&E.ccUniqueKey?(w=E.__boundSetState,b=E.__boundForceUpdate):s!==ye&&(w=c.setState.bind(c),b=c.forceUpdate.bind(c));var x={};x.persistStoredKeys=void 0===g.persistStoredKeys?y:g.persistStoredKeys,x.tag=g.tag||C;var U=function(e,t,n,r){var o;if(e)n&&oo("now the ccClass is singleton, you needn't supply ccKey to instance props, cc will ignore the ccKey["+n+"]"),o=t;else if(n)o=ao(t,n);else{var a=Rt(r);o=ao(t,a)}return o}(r,o,i,x.tag);if(x.renderKey=g.renderKey||U,x.storedKeys=function(e,t,n,r){var o=n||r;return o?"*"===o?Object.keys(e).filter(function(e){return!t.includes(e)}):(ht(t,o),o):[]}(d,ho[S],g.storedKeys,l),i&&!o)throw Error("missing ccClassKey while init a cc ins with ccKey["+i+"]");if(0<x.storedKeys.length&&!i)throw $o(Ke.CC_STORED_KEYS_NEED_CCKEY,wo("ccClassKey["+o+"]"));var O=Co(u),N=vo._state[U]||{},D=Object.assign({},d,N,O),I=Eo(c.state=D),A=mo[o].connectedState,R=Eo(m),T={},M=to(c,O,u,!0),k={};R.forEach(function(e){return k[e]=Le(c,e,!1)});var W=Le(c,u),F=Le(c,pe),L=to(c,Co(pe),pe,!1),j=$e(Eo(d),ho[S]),P=bo(Ko,u);P.includes(o)||P.push(o);function z(e,t){Vn(e,t,c)}function V(e,t,n,r,o,a){z(t,{calledBy:n,module:e,renderKey:o,delay:a,reactCallback:r})}function q(e,t,n,r,o){V(e,t,me,n,r,o)}function H(e,t,n,r,o){"string"==typeof e?q(e,t,n,r,o):V(S,e,ve,t,n,r)}function B(e,t,n){V(S,c.state,he,e,t,n)}var G=[],Y=[],X={effectItems:G,eid_effectReturnCb_:{},effectPropsItems:Y,eid_effectPropsReturnCb_:{}},J={},Q=co(c.props),Z=((n={type:s,isSingle:r,module:u,ccClassKey:o,ccKey:i,ccUniqueKey:U,renderCount:1,initTime:Date.now(),watchedKeys:_,privStateKeys:j,connect:m,connectedModules:R,__$$onEvents:[],__$$hasModuleState:0<ho[u].length,__$$renderStatus:ge,__$$curWaKeys:{},__$$compareWaKeys:{},__$$compareWaKeyCount:0,__$$nextCompareWaKeys:{},__$$nextCompareWaKeyCount:0,__$$curConnWaKeys:{},__$$compareConnWaKeys:{},__$$compareConnWaKeyCount:{},__$$nextCompareConnWaKeys:{},__$$nextCompareConnWaKeyCount:{},persistStoredKeys:x.persistStoredKeys,storedKeys:x.storedKeys,renderKey:x.renderKey,tag:x.tag,prevProps:Q,props:Q,mapped:{},prevState:D,state:D,moduleState:M,mstate:O,globalState:L,connectedState:T,extra:{},staticExtra:{},refComputed:{},refComputedValue:{},refComputedOri:{},moduleComputed:W,globalComputed:F,connectedComputed:k,moduleReducer:{},connectedReducer:{},reducer:{}}).mapped={},n.stateKeys=I,n.computedDep={},n.computedRetKeyFns={},n.watchDep={},n.watchRetKeyFns={},n.execute=null,n.effectMeta=X,n.retKey_fnUid_={},n.reactSetState=Do,n.__boundSetState=w,n.reactForceUpdate=Do,n.__boundForceUpdate=b,n.setState=H,n.setModuleState=q,n.forceUpdate=B,n.changeState=z,n.refs=J,n.useRef=function(t){return function(e){return J[t]={current:e}}},n.__$$ccSetState=sr(c),n.__$$ccForceUpdate=dr(c),n.__$$settedList=[],n.__$$prevMoStateVer={},n);c.setState=H,c.forceUpdate=B,Z.initState=function(e){return c.__$$isMounted?Uo("ctx.initState can only been called before first render period!"):Ee(d)?(c.state=Object.assign({},d,e,N,M),void(Z.prevState=Z.state=c.state)):Uo("state "+Se)};var ee=pr(c,!1,!1,S);if(Z.dispatch=ee,1<t&&(Z.lazyDispatch=pr(c,!0,!1,S),Z.silentDispatch=pr(c,!1,!0,S),Z.dispatchLazy=Z.lazyDispatch,Z.dispatchSilent=Z.silentDispatch,Z.invoke=fr(c),Z.lazyInvoke=fr(c,{isLazy:!0}),Z.silentInvoke=fr(c,{isLazy:!1,isSilent:!0}),Z.invokeLazy=Z.lazyInvoke,Z.invokeSilent=Z.silentInvoke,Z.setGlobalState=function(e,t,n,r){V(pe,e,ve,t,n,r)}),2<t){var te=function(e,t,n,r,o){var a;if("string"==typeof e)return lo.bind(null,((a={})[_e]=e,a.type=o,a.val=t,a.delay=r,a.rkey=n,a),c);lo({type:"val"},c,e)};Z.sync=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=-1),te(e,t,n,r,"val")},Z.syncBool=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=-1),te(e,t,n,r,"bool")},Z.syncInt=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=-1),te(e,t,n,r,"int")},Z.syncAs=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=-1),te(e,t,n,r,"as")},Z.set=function(e,t,n,r){var o;void 0===n&&(n=""),void 0===r&&(r=-1),lo(((o={})[_e]=e,o.type="val",o.val=t,o.delay=r,o.rkey=n,o),c)},Z.setBool=function(e,t,n){var r;void 0===t&&(t=""),void 0===n&&(n=-1),lo(((r={})[_e]=e,r.type="bool",r.delay=n,r.rkey=t,r),c)}}if(3<t&&(Z.emit=function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Xr.apply(eo,[Zr(e)].concat(n))},Z.off=function(e,t){var n=void 0===t?{}:t,r=n.module,o=n.ccClassKey,a=n.ccUniqueKey,c=void 0===a?U:a,i=Zr(e);Jr(i.name,{module:r,ccClassKey:o,ccUniqueKey:c,identity:i.identity})},Z.on=function(e,t){var n=Zr(e),r=n.identity;Yr(S,o,U,n.name,void 0===r?null:r,t)}),4<t){Z.execute=function(e){return Z.execute=e},Z.watch=function(a){return function(e,t,n,r,o){kt(Ce,{type:"watch",refCtx:a,stateKeys:a.stateKeys,retKeyFns:a.watchRetKeyFns,module:a.module,connect:a.connect,dep:a.watchDep},e,t,n,r,o)}}(Z),Z.computed=ro(Z),Z.lazyComputed=ro(Z,!0);var ne=function(u,s){return function(e,t,n,r){if(void 0===n&&(n=!0),void 0===r&&(r=!0),"function"!=typeof e)throw Error(Io("first")+" function");var o=t,a=s?n:r;if(null!=t&&!Array.isArray(t))throw Error(Io("second")+" one of them(array, null, undefined)");var c=null;!s&&o&&(c=[],o.forEach(function(e){var t;t=e.includes("/")?e:S+"/"+e,c.push(t),xo(So,t)[U]=1}));var i={fn:e,isProp:s,depKeys:o,moDepKeys:c,eId:Symbol("__autoGen_"+ ++No+"__"),compare:n,immediate:a};u.push(i)}};Z.effect=ne(G,!1),Z.effectProps=ne(Y,!0)}var re=Z.moduleReducer,oe=Z.connectedReducer,ae=Z.__$$curConnWaKeys,ce=Z.__$$compareConnWaKeys,ie=Z.__$$compareConnWaKeyCount,ue=Z.__$$nextCompareConnWaKeys,se=Z.__$$nextCompareConnWaKeyCount,de=R.slice();de.includes(u)?Uo("module["+u+"] is in belongTo and connect both, it will cause redundant render."):de.push(u);var fe=!1;if(de.forEach(function(o){var e;e=o===u?re:xo(oe,o);var t=m[o];if(t){var n=A[o];"-"===t?(fe=!0,ae[o]={},ce[o]={},ie[o]=0,ue[o]={},se[o]=0,n=to(c,n,o)):To(U,o,t),T[o]=n}(yo[o]||[]).forEach(function(r){e[r]=function(e,t,n){return ee(o+"/"+r,e,t,n)}})}),Z.reducer=_o,"-"===_?(c.state=to(c,D,u,fe=!0),Z.state=c.state):To(U,u,_),Z.__$$autoWatch=fe,Z.getWatchedKeys=function(){return Ao(c.ctx||Z)},Z.getConnectWatchedKeys=function(e){return Ro(c.ctx||Z,e)},$)c.ctx=Z;else{var le=c.ctx;Object.assign(c.ctx,Z,{__$$curWaKeys:le.__$$curWaKeys,__$$compareWaKeys:le.__$$compareWaKeys,__$$compareWaKeyCount:le.__$$compareWaKeyCount,__$$nextCompareWaKeys:le.__$$nextCompareWaKeys,__$$nextCompareWaKeyCount:le.__$$nextCompareWaKeyCount,__$$curConnWaKeys:le.__$$curConnWaKeys,__$$compareConnWaKeys:le.__$$compareConnWaKeys,__$$compareConnWaKeyCount:le.__$$compareConnWaKeyCount,__$$nextCompareConnWaKeys:le.__$$nextCompareConnWaKeys,__$$nextCompareConnWaKeyCount:le.__$$nextCompareConnWaKeyCount})}}var ko=ct.store.getState;var Wo=re,Fo=ct.runtimeVar;function Lo(n,e,t){var r=n.ctx;if(n.__$$isUnmounted=!1,r.__$$isBSe=!(n.__$$isMounted=!1),e){if("function"!=typeof e)throw Error("type of setup must be function");var o=e(r)||{};if(!Ee(o))throw Error("type of setup return result must be an plain json object");(!0===t||!0===Fo.bindCtxToMethod&&!1!==t)&&Wo(o).forEach(function(e){var t=o[e];"function"==typeof t&&(o[e]=t.bind(n,r))}),r.settings=o}r.__$$isBSe=!1,r.refComputedValue=jt(r.computedRetKeyFns,r.refComputedOri),r.refComputed=Le(n,null,!0,!0),function(r){var e=r.ctx,t=e.hasComputedFn,n=e.hasWatchFn,o=e.connect,a=e.module,c=le(a),i=re(o),u=e.state;t&&(yn(r,a,u,u,c,!0,!0),i.forEach(function(e){var t=ko(e),n=le(e);yn(r,e,t,t,n,!0,!0)})),n&&(pn(r,a,u,u,c,!0,!0),i.forEach(function(e){var t=ko(e),n=le(e);pn(r,e,t,t,n,!0,!0)}))}(n)}var jo=ct.moduleName_stateKeys_,Po=ct.store,zo=Po.getPrevState,Vo=Po.getState,qo=Po.getStateVer,Ho=function(e,t){return X("effect: key["+e+"] is invalid, its "+t+" has not been declared in' store!")};function Bo(e,t){function n(a,c,i){return function(e){var t=e.fn,n=e.eId;if(!i||!1!==e.immediate){var r=a[n];r&&r(u);var o=t(u,c);a[n]=o}}}var u=e.ctx,r=u.effectMeta,o=r.effectItems,a=r.eid_effectReturnCb_,c=r.effectPropsItems,i=r.eid_effectPropsReturnCb_,m=u.__$$prevMoStateVer,h=u.__$$settedList,C=u.module;if(t)o.forEach(n(a,!0,!0)),c.forEach(n(i,!0,!0));else{var K=u.prevState,g=e.state,S=[];o.forEach(function(e){var t=e.moDepKeys,n=e.compare,r=e.fn,o=e.eId;if(t){var a=t.length;if(0===a)return;for(var c=function(e){return e.reduce(function(t,e){var n=e.module;return e.keys.forEach(function(e){return t[n+"/"+e]=1}),t},{})}(h),i=!1,u=0;u<a;u++){var s=t[u];if(n){var d=void 0,f=void 0,l=s.split("/"),p=l[0],y=l[1];if(p!==C){var _=zo(p),v=qo(p);if(m[y]===v[y])continue;if(m[y]=v[y],!_){Ho(s,"module["+p+"]");continue}if(!jo[p].includes(y)){Ho(s,"unmoduledKey["+y+"]");continue}d=Vo(p),f=_}else d=g,f=K;if(f[y]!==d[y]){i=!0;break}}else if(c[s]){i=!0;break}}i&&S.push({fn:r,eId:o})}else S.push({fn:r,eId:o})}),S.forEach(n(a,!1,!1));var s=u.prevProps,d=u.props,f=[];c.forEach(function(e){var t=e.depKeys,n=e.fn,r=e.eId;if(t){var o=t.length;if(0===o)return;for(var a=!1,c=0;c<o;c++){var i=t[c];if(s[i]!==d[i]){a=!0;break}}a&&f.push({fn:n,eId:r})}else f.push({fn:n,eId:r})}),f.forEach(n(i,!1,!1)),h.length=0}}var Go=X,Yo=M,Xo=P,Jo=G,Qo=z,Zo=ct.runtimeVar,ea=ct.ccClassKey_ccClassContext_,ta=ct.ccUKey_ref_,na={};function ra(e,t,n,r){function o(){ta[e]=t,n.push(e)}!function(e){void 0===na[e]?na[e]=1:na[e]+=1}(e),r?setTimeout(o,r):o()}function oa(e,t,n,r,o){var a=ea[n],c=a.ccKeys;Zo.isDebug&&console.log(Jo("register ccKey "+o+" to CC_CONTEXT"),Qo());var i=ct.isHotReloadMode();if(c.includes(o)){var u=function(){throw Yo(Ke.CC_CLASS_INSTANCE_KEY_DUPLICATE,Xo("ccClass:"+n+",ccKey:"+o))};if(i){var s=function(e){return void 0===na[e]?0:na[e]}(o);if(t&&0<s)throw Yo(Ke.CC_CLASS_INSTANCE_MORE_THAN_ONE,Xo("ccClass:"+n));1<s&&u(),Go("\n        found ccKey["+r+"] duplicated in hot reload mode, please make sure your ccKey is unique manually,\n        "+Xo("ccClassKey:"+n+" ccKey:"+r+" ccUniqueKey:"+o)+"\n      "),ra(o,e,c,600)}else u()}else ra(o,e,c);return a}var aa=ct.waKey_uKeyMap_;function ca(t,e,n,r){var o=!1,a=re(t);a.forEach(function(e){2===t[e]&&(o=!0,delete aa[n+"/"+e][r])}),e<a.length&&(o=!0),o&&St(n)}function ia(e){var t=e.ctx;if(t.__$$renderStatus=ge,t.__$$autoWatch){var n=t.connectedModules,r=t.connect,o=t.ccUniqueKey,a=t.__$$compareConnWaKeys,c=t.__$$compareConnWaKeyCount;ca(t.__$$compareWaKeys,t.__$$compareWaKeyCount,t.module,o),n.forEach(function(e){"-"===r[e]&&ca(a[e],c[e],e,o)})}}function ua(e){ia(e),e.__$$isMounted=!0,e.__$$isUnmounted=!1;var t=e.ctx,n=t.__$$onEvents;oa(e,t.isSingle,t.ccClassKey,t.ccKey,t.ccUniqueKey),0<n.length&&(n.forEach(function(e){return e.fn.apply(void 0,e.args)}),n.length=0),Bo(e,!0)}function sa(e){ia(e),Bo(e),e.ctx.prevState=e.state}var da=ct.ccUKey_ref_,fa=ct.ccUKey_handlerKeys_,la=ct.runtimeVar,pa=ct.ccClassKey_ccClassContext_,ya=ct.handlerKey_handler_;function _a(e,t){la.isDebug&&console.log(G(t+" unset ref"),z("purple")),delete da[t];var n=pa[e].ccKeys,r=n.indexOf(t);r<0||n.splice(r,1),function(e){void 0===na[e]?na[e]=0:na[e]-=1}(t);var o=fa[t];o&&o.forEach(function(e){delete ya[e]})}var va=re;function ma(n,r){function e(e){var t=n[e];"function"==typeof t&&t(r)}Object.getOwnPropertySymbols(n).forEach(e),va(n).forEach(e)}function ha(e){e.__$$isUnmounted=!0;var t=e.ctx,n=t.ccUniqueKey,r=t.ccClassKey;if(e.__$$isMounted){var o=t.effectMeta,a=o.eid_effectPropsReturnCb_;ma(o.eid_effectReturnCb_,t),ma(a,t),Qr(n)}_a(r,n)}function Ca(e){var t=e.ctx;if(t.__$$renderStatus=E,1!==t.renderCount&&t.__$$autoWatch){t.__$$hasModuleState&&(Object.assign(e.state,t.mstate),e.state=to(e,e.state,t.module,!0),t.state=e.state,t.__$$curWaKeys={},t.__$$compareWaKeys=t.__$$nextCompareWaKeys,t.__$$compareWaKeyCount=t.__$$nextCompareWaKeyCount,t.__$$nextCompareWaKeys={},t.__$$nextCompareWaKeyCount=0);var n=t.connect;t.connectedModules.forEach(function(e){"-"===n[e]&&(t.__$$curConnWaKeys[e]={},t.__$$compareConnWaKeys[e]=t.__$$nextCompareConnWaKeys[e],t.__$$compareConnWaKeyCount[e]=t.__$$nextCompareConnWaKeyCount[e],t.__$$nextCompareConnWaKeys[e]={},t.__$$nextCompareConnWaKeyCount[e]=0)})}}var Ka=function(e){return"CC("+e+")"},ga=xe,Sa=ce,Ea=we,$a=ct.runtimeVar,wa=z,ba=G,xa=function(e){return Error("can not defined setup both in register options and class body --verbose:"+e)};function Ua(e,t){var n=void 0===e?{}:e,r=n.module,o=void 0===r?V:r,a=n.state,u=void 0===a?{}:a,c=n.watchedKeys,s=void 0===c?"-":c,i=n.storedKeys,d=void 0===i?[]:i,f=n.setup,l=void 0===f?null:f,p=n.persistStoredKeys,y=n.connect,_=void 0===y?{}:y,v=n.tag,m=n.lite,h=n.isPropsProxy,C=void 0!==h&&h,K=n.isSingle,g=void 0!==K&&K,S=n.renderKeyClasses,E=n.__checkStartUp,$=void 0===E||E,w=n.compareProps,b=void 0===w||w,x=n.__calledBy;void 0===t&&(t="");try{var U=Fr(o,t,S,A,ga(s),d,_,$,x),O=U._module,N=U._ccClassKey,D=U._connect;return function(n){if(n.prototype&&n.prototype.$$attach)throw Error("register a cc class is prohibited!");var e=!1===C?n:I.Component,i=e.$$setup,t=function(c){function e(e,t){var n;try{n=c.call(this,e,t)||this;var r=Ea(u),o=Object.assign(n.state||{},r);n.$$attach=n.$$attach.bind(Sr(n));var a=Object.assign({},e,{isSingle:g,module:O,tag:v,state:o,type:A,watchedKeys:s,ccClassKey:N,connect:D,storedKeys:d,persistStoredKeys:p});if(Mo(Sr(n),a,m),n.ctx.reactSetState=_r(Sr(n)),n.ctx.reactForceUpdate=vr(Sr(n)),l&&(n.$$setup||i))throw xa("ccUniqueKey "+n.ctx.ccUniqueKey);C||(n.$$setup&&(n.$$setup=n.$$setup.bind(Sr(n))),Lo(Sr(n),l||n.$$setup||i,!1))}catch(e){Zt(e)}return n}gr(e,c);var t=e.prototype;return t.shouldComponentUpdate=function(e,t){var n=this.ctx.childRef;if(n&&n.shouldComponentUpdate)return n.shouldComponentUpdate(e,t);if(c.prototype.shouldComponentUpdate)return c.prototype.shouldComponentUpdate.call(this,e,t);var r=!!b&&Sa(this.props,e);return this.state!==t||r},t.$$attach=function(e){var t=this.ctx;if(((t.childRef=e).ctx=t).reactSetState=e.setState.bind(e),t.reactForceUpdate=e.forceUpdate.bind(e),e.setState=t.setState,e.forceUpdate=t.forceUpdate,t.__$$ccSetState=sr(e,this),t.__$$ccForceUpdate=dr(e),e.state||(e.state={}),Object.assign(e.state,this.state),Ca(e),e.$$setup&&(e.$$setup=e.$$setup.bind(e)),l&&(e.$$setup||i))throw xa("ccUniqueKey "+t.ccUniqueKey);Lo(e,l||e.$$setup||i,!1)},t.componentDidMount=function(){c.prototype.componentDidMount&&c.prototype.componentDidMount.call(this),ua(this)},t.componentDidUpdate=function(){c.prototype.componentDidUpdate&&c.prototype.componentDidUpdate.call(this),sa(this)},t.componentWillUnmount=function(){c.prototype.componentWillUnmount&&c.prototype.componentWillUnmount.call(this),ha(this)},t.render=function(){return this.ctx.prevProps=this.ctx.props,this.ctx.props=this.props,$a.isDebug&&console.log(ba("@@@ render "+Ka(N)),wa()),!1===C?(Ca(this),c.prototype.render.call(this)):I.createElement(n,{ctx:this.ctx,$$attach:this.$$attach})},e}(e);return t.displayName=N===B?"CcDispatcher":Ka(N),t}}catch(e){Zt(e)}}function Oa(e){var t=function(e){function t(){return e.apply(this,arguments)||this}return gr(t,e),t.prototype.render=function(){return this.props.children||I.createElement("span",{style:{display:"none"}})},t}(I.Component);if(ct.refs[B]){if(!ct.isHotReloadMode())throw Error("CcDispatcher can only be initialize one time");J("hot reload mode, CC_DISPATCHER existed")}var n=e||t;return Ua({isSingle:!0,__checkStartUp:!1,__calledBy:"cc"},B)(n)}var Na=Ee,Da=re;function Ia(e,t){if(!Na(e))throw Error(t+" "+Se)}function Aa(e){if(!Na(e))throw Error("StartupOption.moduleSingleClass "+Se);!function(t,n){Object.keys(n).forEach(function(e){t[e]=n[e]})}(ct.moduleSingleClass,e)}function Ra(e){if(0<e.length){var o=ct.plugins;o.length=0,Yt.forEach(function(e){return Xt[e].length=0});var a={};e.forEach(function(e){if(o.push(e),!e.install)throw Error("a plugin must export install handler!");var t=e.install(Qt),n=Error("plugin.install must return result:{name:string, options?:object}");if(!t)throw n;var r=t.name;if(!r)throw n;if(a[r])throw Error("pluginName["+r+"] duplicate");a[r]=1}),ct.pluginNameMap=a}}var Ta=function(e){var t=document.querySelector("#"+c);if(!t){(t=document.createElement("div")).id=c;var n=t.style;n.position="fixed",n.left=0,n.top=0,n.display="none",n.zIndex=-888666,document.body.appendChild(t)}r.render(I.createElement(e),t)},Ma=!1;function ka(e,r){void 0===e&&(e=!1),je={},ne(ct.event_handlers_),ne(ct.ccUKey_handlerKeys_);var o=ct.ccClassKey_ccClassContext_,t=ct.ccUKey_ref_;if(Object.keys(o).forEach(function(e){var t=o[e],n=[];0<r.length&&t.ccKeys.forEach(function(e){r.includes(e)&&n.push(e)}),ne(t.ccKeys,n)}),ne(ct.handlerKey_handler_),ne(t,[B].concat(r)),e){var n=ct.computed,a=ct.watch,c=n._computedValue,i=a._watchDep;re(ct.store._state).forEach(function(e){e!==q&&(c[e]&&(ct.computed._computedDep[e]={retKey_fn_:{},retKey_lazy_:{},stateKey_retKeys_:{},retKey_stateKeys_:{},fnCount:0},Vt(e,n._computedRaw[e])),i[e]&&(i[e]={retKey_fn_:{},retKey_lazy_:{},stateKey_retKeys_:{},retKey_stateKeys_:{},fnCount:0},Gt(e,a._watchRaw[e])))})}}function Wa(){var n=ct.ccUKey_ref_,r=[];return re(n).forEach(function(e){var t=n[e];t&&t.ctx.type===x&&!0!==t.props.__$$regDumb&&!0===t.__$$isMounted&&0==t.__$$isUnmounted&&r.push(e)}),r}function Fa(){ne(ct.globalStateKeys);var e=re(ct.moduleName_isConfigured_).concat([V,q,pe,a]);ne(ct.reducer._reducer,e),ne(ct.store._state,e,{}),ne(ct.computed._computedDep,e),ne(ct.computed._computedValue,e),ne(ct.watch._watchDep,e),ne(ct.middlewares),ne(ct.waKey_uKeyMap_),Ue={module:{computed:{},watch:{}},ref:{computed:{},watch:{},effect:{}}};var t=Wa();return ka(!1,t),t}function La(e){void 0===e&&(e=!1),ct.info.latestStartupTime=Date.now();var t=[];return ct.isStartup?ct.isHotReloadMode()?e?(console.warn("attention: make sure [[clearContextIfHot]] been called before app rendered!"),Ma=!0,t=Fa()):(Ma?Ma=!1:(function(){if(!ct.refs[B]){var e=Oa();Ta(e)}}(),t=Wa(),ka(ct.reComputed,t)),t):(console.warn("clear failed because of not running under hot reload mode!"),t):(Ma=!0,t)}var ja=ie,Pa=we;function za(e){var t=e.props,n=ja(t.register),r=n.module,o=n.renderKeyClasses,a=n.tag,c=n.lite,i=n.compareProps,u=void 0===i||i,s=n.setup,d=n.bindCtxToMethod,f=n.watchedKeys,l=void 0===f?"-":f,p=n.connect,y=void 0===p?{}:p,_=n.isSingle,v=n.storedKeys,m=void 0===v?[]:v,h=Pa(n.state),C=t.ccClassKey,K=t.ccKey,g=t.ccOption,S=void 0===g?{}:g,E=l,$=C,w=y;if(!0!==t.__$$regDumb){var b=Fr(r,C,o,x,xe(l),m,y,!0);E=l,$=b._ccClassKey,w=b._connect}Mo(e,{isSingle:_,ccKey:K,connect:w,state:h,module:r,storedKeys:m,watchedKeys:E,tag:a,ccClassKey:$,ccOption:S,type:x},c),e.ctx.reactSetState=_r(e),e.ctx.reactForceUpdate=vr(e),e.__$$compareProps=u,Lo(e,s,d)}var Va=J,qa=ae,Ha="";function Ba(e,t){var n=void 0===e?{}:e,r=n.store,o=void 0===r?{}:r,a=n.reducer,c=void 0===a?{}:a,i=n.init,u=void 0===i?null:i,s=n.computed,d=void 0===s?{}:s,f=n.watch,l=void 0===f?{}:f,p=n.moduleSingleClass,y=void 0===p?{}:p,_=void 0===t?{}:t,v=_.plugins,m=void 0===v?[]:v,h=_.middlewares,C=void 0===h?[]:h,K=_.isStrict,g=void 0!==K&&K,S=_.isDebug,E=void 0!==S&&S,$=_.errorHandler,w=void 0===$?null:$,b=_.isHot,x=_.bindCtxToMethod,U=void 0!==x&&x,O=_.computedCompare,N=void 0===O||O,D=_.watchCompare,I=void 0===D||D,A=_.watchImmediate,R=void 0!==A&&A,T=_.alwaysGiveState,M=void 0===T||T,k=_.reComputed,W=void 0===k||k;try{throw Error()}catch(e){var F=function(e){function t(e,t){for(var n=0;n<o;n++)if(r[n].includes(e)){a=r[n+t];break}}var n=ct.info,r=e.stack.split("\n"),o=r.length,a="";function c(){return La(ct.isHot=!0)}t("startup",2),a||t("runConcent",0);var i=Date.now(),u=[],s=!0;if(Ha)if(Ha!==a){var d="invalid run api call!(it can only be called once, changing 'call run' line location in HMR will cause this error also, \n    try refresh browser to reload your app to avoid this tip)";if(i-n.latestStartupTime<1e3)throw Error(d);fe()?(u=c(),Ha=a):(Q(d),s=!1)}else u=c();else Ha=a,n.firstStartupTime=i,n.latestStartupTime=i;return{canStartup:s,ccFragKeys:u}}(e),L=F.ccFragKeys;if(!F.canStartup)return;try{console.log("%c window.name:"+window.name,"color:green;border:1px solid green"),Va("cc version "+ct.info.version),void 0!==b&&(ct.isHot=b),ct.reComputed=W,ct.errorHandler=w;var j=ct.runtimeVar;if(j.alwaysGiveState=M,j.isStrict=g,j.isDebug=E,j.computedCompare=N,j.watchCompare=I,j.watchImmediate=R,j.bindCtxToMethod=U,!ct.refs[B]){var P=Oa();Ta(P)}Aa(y),function(e){Ia(e,"state"),delete e[H],delete e[q],void 0===e[pe]&&(e[pe]={}),void 0===e[V]&&(e[V]={});for(var t=Da(e),n=t.length,r=0;r<n;r++){var o=t[r];$t(o,e[o])}}(o),function(t){Ia(t,"reducer"),void 0===t[V]&&(t[V]={}),void 0===t[pe]&&(t[pe]={}),Da(t).forEach(function(e){return Dt(e,t[e])})}(c),function(t){Ia(t,"computed"),Da(t).forEach(function(e){return Vt(e,t[e])})}(d),function(t){Ia(t,"watch"),Object.keys(t).forEach(function(e){return Gt(e,t[e])})}(l),function(n){if(n){if(!Na(n))throw Error("init "+Se);Da(n).forEach(function(t){mt(t,!1);var e=n[t];e&&Promise.resolve().then(e).then(function(e){yr(t)(e)})}),ct.init._init=n}}(u),function(e){if(0<e.length){var t=ct.middlewares;t.length=0,e.forEach(function(e){return t.push(e)})}}(C);var z=function(e){qa("CC_CONTEXT",ct,e),qa("ccc",ct,e),qa("cccc",ct.computed._computedValue,e),qa("sss",ct.store._state,e)};window.mcc?setTimeout(function(){z(window.mcc[se()])},1200):z(),ct.isStartup=!0,Ra(m),L.forEach(function(e){var t=ct.ccUKey_ref_[e];ha(t),za(t),ua(t)})}catch(e){if(!w)throw e;w(e)}}}function Ga(e){throw Error("[[run]]: param error, "+e+" "+Se)}var Ya=Ee,Xa=re,Ja=R,Qa=we;function Za(e,t){var n=ie(e);return delete n.__checkStartUp,delete n.__calledBy,Ua(n,t)}var ec=ce,tc=I.createElement("span",{style:{display:"none"}}),nc=function(r){function e(e,t){var n;return za(Sr(n=r.call(this,e,t)||this)),n}gr(e,r);var t=e.prototype;return t.componentDidMount=function(){ua(this)},t.shouldComponentUpdate=function(e,t){var n=!!this.__$$compareProps&&ec(co(e),co(this.props));return this.state!==t||n},t.componentDidUpdate=function(){sa(this)},t.componentWillUnmount=function(){r.prototype.componentWillUnmount&&r.prototype.componentWillUnmount.call(this),ha(this)},t.render=function(){var e=this.props;this.ctx.prevProps=this.ctx.props,this.ctx.props=co(e);var t=e.render,n=t||e.children;if("function"==typeof n){Ca(this);var r=e.register,o=void 0===r?{}:r,a=this.ctx;return!0!==e.__$$regDumb&&o.mapProps?(a.mapped=o.mapProps(a)||{},n(a.mapped)||tc):n(a)||tc}if(I.isValidElement(n))throw Error("CcFragment's children can not b a react dom ");return n},e}(I.Component);function rc(e,t){var n=ie(e),r=n.renderKeyClasses,o=n.module,a=n.watchedKeys,c=void 0===a?"-":a,i=n.storedKeys,u=n.render,s=n.connect,d=void 0===s?{}:s,f=xe(c),l=Fr(o,t,r,x,f,i,d,!0),p=l._ccClassKey,y=l._connect;function _(t){return function(e){return n.props=e,function(t,e){var n=e.mapProps,r=e.props,o=void 0===r?{}:r,a={__$$regDumb:!0,props:o,ccOption:o.ccOption,ccClassKey:e.ccClassKey,render:function(e){return n?(e.mapped=n(e),I.createElement(t,e.mapped)):I.createElement(t,e)},ccKey:o.ccKey,register:e};return I.createElement(nc,a)}(t,n)}}return n.module=l._module,n.watchedKeys=c,n.ccClassKey=p,n.connect=y,u?_(u):function(e){return _(e)}}var oc=ct.ccUKey_ref_,ac=1;function cc(e,t,n){this.setState=t,this.forceUpdate=t,this.state=e,this.isFirstRendered=!0,this.props=n}function ic(e,t,n,r,o,a,c,i,u,s){var d=n||we(r),f=o.bindCtxToMethod,l=o.watchedKeys,p=void 0===l?"-":l,y=o.storedKeys,_=void 0===y?[]:y,v=o.connect,m=void 0===v?{}:v,h=o.setup,C=o.lite;ac+=1;var K=Fr(o.module,s,o.renderKeyClasses,ye,xe(p),_,m,!0),g=K._module,S=K._ccClassKey,E=K._connect,$=e||new cc(a,c,i),w=Object.assign({},o,{module:g,watchedKeys:p,state:d,type:ye,ccClassKey:S,connect:E,ccOption:i.ccOption});$.props=i,Mo($,w,C),$.ctx.reactSetState=_r($),$.ctx.reactForceUpdate=vr($);var b=$.ctx;return b.props=i,b.extra=u,Lo($,h,f),t.current=$.ctx.ccUniqueKey,b.useRef=function(e){var t=I.useRef(null);return b.refs[e]=t},$}function uc(e,t){e.__boundSetState=t,e.__boundForceUpdate=t}var sc="react version is LTE 16.8";function dc(e,t){var n=ie(e),r=n.state,o=void 0===r?{}:r,a=n.props,c=void 0===a?{}:a,i=n.mapProps,u=n.layoutEffect,s=void 0!==u&&u,d=n.extra,f=void 0===d?{}:d,l=I.useState;if(!l)throw Error(sc);function p(e){return ic(e,g,m,o,n,C,K,c,f,t)}var y,_=ac,v=l(_)[0]===_,m=v?we(o):0,h=l(m),C=h[0],K=h[1],g=I.useRef(null);if(v)y=p();else if(y=oc[g.current]){var S=y.ctx;S.prevProps=S.props,y.props=S.props=c,S.extra=f}else y=p();var E=y.ctx,$=s?I.useLayoutEffect:I.useEffect;if($(function(){y.isFirstRendered||sa(y),uc(E,K)}),$(function(){return!1===y.isFirstRendered?p(y):y.isFirstRendered=!1,uc(E,K),ua(y),function(){ha(y)}},[]),i){var w=i(E);if(!Ee(w))throw Error("mapProps ret "+Se);E.mapped=w}return Ca(y),E}function fc(){throw Error("api doc: cc.setState(module:string, state:object, renderKey:string, delayMs?:number, skipMiddleware?:boolean, throwError?:boolean)")}function lc(e){return ct.store.getState(e)}var pc=ct.computed._computedValue;var yc=ct.ccUKey_ref_,_c=ct.ccClassKey_ccClassContext_;function vc(){var n=[],r=ct.ccUKey_ref_;return re(r).forEach(function(e){var t=r[e];t&&!t.__$$isUnmounted&&n.push(t)}),n}function mc(e,t,n){var r=void 0===n?{}:n,o=r.state,a=r.reducer,c=r.computed,i=r.watch,u=r.init;if(!ct.isStartup)throw Error("cc is not startup yet");vt(e),mt(t,!1);var s=ct.moduleName_stateFn_[t];if(!s)throw Error("target module["+t+"] state must be a function when use cloneModule");var d=s();Object.assign(d,we(o));var f=Kr(ct.reducer._reducer[t]||{},e);a&&Object.assign(f,Kr(a,e));var l=ct.computed._computedRaw[t]||{};c&&Object.assign(l,c);var p=ct.watch._watchRaw[t]||{};i&&Object.assign(p,i);var y=ct.init._init[t];u&&(y=u);var _={state:d,reducer:f,computed:l,watch:p};y&&(_.init=y),Cr(e,_)}function hc(t,e){function r(e,t){var n=t.state,r=t.reducer,o=void 0===r?{}:r,a=t.watch,c=t.computed,i=t.init,u=t.isClassSingle;if(s.store[e])throw Error("run api error: module"+e+" duplicate");s.store[e]=Qa(n),"function"==typeof n&&(ct.moduleName_stateFn_[e]=n),s.reducer[e]=o,a&&(s.watch[e]=a),c&&(s.computed[e]=c),i&&(s.init[e]=i),s.moduleSingleClass[e]=!0===u}void 0===t&&(t={}),void 0===e&&(e={}),Ya(t)||Ga("store"),Ya(e)||Ga("options");var s={store:{},reducer:{},watch:{},computed:{},init:{},moduleSingleClass:{}};Xa(t).forEach(function(e){return r(e,t[e])}),ft.forEach(function(e){var t=e.module,n=e.config;J("configure pending module["+t+"]"),r(t,n)}),ft.length=0,Ja(s.init)&&(s.init=null),Ba(s,e)}function Cc(e,t){return Za({connect:e},t)}function Kc(e,t){return rc({connect:e},t)}function gc(e,o){var a=ie(e);function t(n){var e=a.memo,t=void 0===e||e;function r(){return function(e){a.props=e;var t=dc(a,o);return I.createElement(n,a.mapProps?t.mapped:t)}}return delete a.memo,t&&I.memo?I.memo(r()):r()}"function"==typeof a.state&&(a.state=a.state());var n=a.render;return n?t(n):function(e){return t(e)}}function Sc(e,t,n,r,o){void 0===o&&(o=!1);try{wt().ctx.setGlobalState(e,t,n,r)}catch(e){if(o)throw e;X(e.message)}}function Ec(e,t,n,r,o,a){void 0===r&&(r=-1),void 0===a&&(a=!1),void 0===e&&void 0===t&&fc(),"string"!=typeof e&&fc(),Hn(e,t,n,r,o)}function $c(e,t,n,r){wt().ctx.set(e,t,n,r)}function wc(e,t){if(!e.includes("/"))throw Error("keyPath must start with module");var n=e.split("/"),r=lc(n[0]);return so(e,t,!1,r,!1).state}function bc(e){return kc[e].connectedState||{}}function xc(e){return e?pc[e]:pc}function Uc(e){if(void 0===e)throw Error("api doc: cc.emit(event:string|{name:string, identity?:string, ctx?:boolean}, ...args)");try{for(var t,n=wt(),r=arguments.length,o=Array(1<r?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];(t=n.ctx).emit.apply(t,[e].concat(o))}catch(e){X(e)}}function Oc(e,t){try{wt().ctx.off(e,t)}catch(e){if(t.throwError)throw e;X(e.message)}}function Nc(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];(function(e){var n=[],t=_c[e];return t&&t.ccKeys.forEach(function(e){var t=yc[e];t&&n.push(t)}),n})(e).forEach(function(e){var t;e.__$$isUnmounted||e.ctx.execute&&(t=e.ctx).execute.apply(t,n)})}function Dc(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];vc().forEach(function(e){var t;e.ctx.execute&&(t=e.ctx).execute.apply(t,n)})}function Ic(e,t,n,r){return{fn:e,depKeys:t,compare:n,sort:r||Zc++}}function Ac(e,t,n,r){return{fn:e,depKeys:t,compare:n,lazy:!0,sort:r||Zc++}}function Rc(e,t,n){return void 0===t&&(t=!0),{fn:function(){return e},depKeys:[],compare:t,sort:n||Zc++}}function Tc(e,t,n,r,o){return{fn:e,depKeys:t,compare:n,immediate:r,sort:o||Zc++}}function Mc(e,t,n,r){return{fn:e,depKeys:t,compare:n,immediate:!0,sort:r||Zc++}}var kc=ct.ccClassKey_ccClassContext_,Wc=Za,Fc=rc,Lc=Cr,jc=lc,Pc=ct.store.getGlobalState,zc=Nt,Vc=ct,qc=Oa,Hc=vc,Bc=ct.reducer._caller,Gc=La,Yc=nc,Xc=u,Jc=ct.store.appendState,Qc=dc,Zc=1e3,ei={cloneModule:mc,emit:Uc,off:Oc,connect:Cc,connectDumb:Kc,register:Wc,registerDumb:Fc,registerHookComp:gc,configure:Lc,dispatch:zc,run:hc,setGlobalState:Sc,setState:Ec,set:$c,setValue:wc,getGlobalState:Pc,getState:jc,getComputed:xc,getConnectedState:bc,ccContext:Vc,createDispatcher:qc,execute:Nc,executeAll:Dc,getRefs:Hc,reducer:Bc,clearContextIfHot:Gc,CcFragment:Yc,cst:Xc,appendState:Jc,useConcent:Qc,bindCcToMcc:ti,defComputed:Ic,defLazyComputed:Ac,defComputedVal:Rc,defWatch:Tc,defWatchImmediate:Mc};function ti(e){if(!ri)throw Error("current env is not multi concent ins mode");if(ri[e])throw Error("ccNamespace["+e+"] already existed in window.mcc");!function(e){ue=e}(e),ae(e,ei,ri)}function ni(){var e=ue?window.mcc[ue]:window.cc;if(e&&e.ccContext&&e.ccContext.info){var t=e.ccContext.info.version,n=Vc.info.version;if(t!==n)throw Error("a existed version concent "+t+" is different with current about to import concent "+n+", \n        it may caused by some of your concent-eco-module with older version concent, please reinstall them (concent-*** module)")}}var ri=window.mcc;ri?setTimeout(function(){if(!se())throw Error("detect window.mcc, but user forget call bindCcToMcc in bundle entry");ni()},1e3):(ni(),ae("cc",ei)),e.cloneModule=mc,e.run=hc,e.connect=Cc,e.connectDumb=Kc,e.register=Wc,e.registerDumb=Fc,e.registerHookComp=gc,e.configure=Lc,e.setGlobalState=Sc,e.setState=Ec,e.set=$c,e.setValue=wc,e.getState=jc,e.getGlobalState=Pc,e.getConnectedState=bc,e.getComputed=xc,e.emit=Uc,e.off=Oc,e.dispatch=zc,e.ccContext=Vc,e.createDispatcher=qc,e.execute=Nc,e.executeAll=Dc,e.getRefs=Hc,e.reducer=Bc,e.clearContextIfHot=Gc,e.CcFragment=Yc,e.cst=Xc,e.appendState=Jc,e.useConcent=Qc,e.defComputed=Ic,e.defLazyComputed=Ac,e.defComputedVal=Rc,e.defWatch=Tc,e.defWatchImmediate=Mc,e.bindCcToMcc=ti,e.default=ei,Object.defineProperty(e,"__esModule",{value:!0})});
